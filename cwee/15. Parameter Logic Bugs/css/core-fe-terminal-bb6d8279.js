import{a as br}from"./lodash-4cdd6148.js";(function(){try{var je=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qe=new Error().stack;qe&&(je._sentryDebugIds=je._sentryDebugIds||{},je._sentryDebugIds[qe]="ddab03f1-db51-4633-ab9d-0037771348f7",je._sentryDebugIdIdentifier="sentry-dbid-ddab03f1-db51-4633-ab9d-0037771348f7")}catch{}})();var mr={exports:{}};(function(je){(function(){var qe={6244:function(j){(function(q,R){j.exports=R()})(self,function(){return(()=>{var q={775:(H,B)=>{Object.defineProperty(B,"__esModule",{value:!0}),B.FitAddon=void 0;var M=function(){function o(){}return o.prototype.activate=function(y){this._terminal=y},o.prototype.dispose=function(){},o.prototype.fit=function(){var y=this.proposeDimensions();if(y&&this._terminal){var l=this._terminal._core;this._terminal.rows===y.rows&&this._terminal.cols===y.cols||(l._renderService.clear(),this._terminal.resize(y.cols,y.rows))}},o.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var y=this._terminal._core;if(y._renderService.dimensions.actualCellWidth!==0&&y._renderService.dimensions.actualCellHeight!==0){var l=window.getComputedStyle(this._terminal.element.parentElement),h=parseInt(l.getPropertyValue("height")),u=Math.max(0,parseInt(l.getPropertyValue("width"))),d=window.getComputedStyle(this._terminal.element),g=h-(parseInt(d.getPropertyValue("padding-top"))+parseInt(d.getPropertyValue("padding-bottom"))),v=u-(parseInt(d.getPropertyValue("padding-right"))+parseInt(d.getPropertyValue("padding-left")))-y.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(v/y._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(g/y._renderService.dimensions.actualCellHeight))}}}},o}();B.FitAddon=M}},R={};return function H(B){if(R[B])return R[B].exports;var M=R[B]={exports:{}};return q[B](M,M.exports,H),M.exports}(775)})()})},2510:function(j,q,R){R(1719),R(560),R(5847),R(3429),R(4224),R(1121),R(7133),function(H,B){j.exports=B()}(self,function(){return(()=>{var H={4567:function(M,o,y){var l,h=this&&this.__extends||(l=function(i,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},l(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}l(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;var u=y(9042),d=y(6114),g=y(9924),v=y(3656),s=y(844),a=y(5596),_=y(9631),f=function(i){function e(t,r){var n=i.call(this)||this;n._terminal=t,n._renderService=r,n._liveRegionLineCount=0,n._charsToConsume=[],n._charsToAnnounce="",n._accessibilityTreeRoot=document.createElement("div"),n._accessibilityTreeRoot.classList.add("xterm-accessibility"),n._accessibilityTreeRoot.tabIndex=0,n._rowContainer=document.createElement("div"),n._rowContainer.setAttribute("role","list"),n._rowContainer.classList.add("xterm-accessibility-tree"),n._rowElements=[];for(var p=0;p<n._terminal.rows;p++)n._rowElements[p]=n._createAccessibilityTreeNode(),n._rowContainer.appendChild(n._rowElements[p]);if(n._topBoundaryFocusListener=function(c){return n._onBoundaryFocus(c,0)},n._bottomBoundaryFocusListener=function(c){return n._onBoundaryFocus(c,1)},n._rowElements[0].addEventListener("focus",n._topBoundaryFocusListener),n._rowElements[n._rowElements.length-1].addEventListener("focus",n._bottomBoundaryFocusListener),n._refreshRowsDimensions(),n._accessibilityTreeRoot.appendChild(n._rowContainer),n._renderRowsDebouncer=new g.TimeBasedDebouncer(n._renderRows.bind(n)),n._refreshRows(),n._liveRegion=document.createElement("div"),n._liveRegion.classList.add("live-region"),n._liveRegion.setAttribute("aria-live","assertive"),n._accessibilityTreeRoot.appendChild(n._liveRegion),!n._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return n._terminal.element.insertAdjacentElement("afterbegin",n._accessibilityTreeRoot),n.register(n._renderRowsDebouncer),n.register(n._terminal.onResize(function(c){return n._onResize(c.rows)})),n.register(n._terminal.onRender(function(c){return n._refreshRows(c.start,c.end)})),n.register(n._terminal.onScroll(function(){return n._refreshRows()})),n.register(n._terminal.onA11yChar(function(c){return n._onChar(c)})),n.register(n._terminal.onLineFeed(function(){return n._onChar(`
`)})),n.register(n._terminal.onA11yTab(function(c){return n._onTab(c)})),n.register(n._terminal.onKey(function(c){return n._onKey(c.key)})),n.register(n._terminal.onBlur(function(){return n._clearLiveRegion()})),n.register(n._renderService.onDimensionsChange(function(){return n._refreshRowsDimensions()})),n._screenDprMonitor=new a.ScreenDprMonitor,n.register(n._screenDprMonitor),n._screenDprMonitor.setListener(function(){return n._refreshRowsDimensions()}),n.register((0,v.addDisposableDomListener)(window,"resize",function(){return n._refreshRowsDimensions()})),n}return h(e,i),e.prototype.dispose=function(){i.prototype.dispose.call(this),(0,_.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(t,r){var n=t.target,p=this._rowElements[r===0?1:this._rowElements.length-2];if(n.getAttribute("aria-posinset")!==(r===0?"1":""+this._terminal.buffer.lines.length)&&t.relatedTarget===p){var c,m;if(r===0?(c=n,m=this._rowElements.pop(),this._rowContainer.removeChild(m)):(c=this._rowElements.shift(),m=n,this._rowContainer.removeChild(c)),c.removeEventListener("focus",this._topBoundaryFocusListener),m.removeEventListener("focus",this._bottomBoundaryFocusListener),r===0){var C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else C=this._createAccessibilityTreeNode(),this._rowElements.push(C),this._rowContainer.appendChild(C);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(r===0?-1:1),this._rowElements[r===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}},e.prototype._onResize=function(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var r=this._rowContainer.children.length;r<this._terminal.rows;r++)this._rowElements[r]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[r]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var t=document.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t},e.prototype._onTab=function(t){for(var r=0;r<t;r++)this._onChar(" ")},e.prototype._onChar=function(t){var r=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)),d.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){r._accessibilityTreeRoot.appendChild(r._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,d.isMac&&(0,_.removeElementFromParent)(this._liveRegion)},e.prototype._onKey=function(t){this._clearLiveRegion(),this._charsToConsume.push(t)},e.prototype._refreshRows=function(t,r){this._renderRowsDebouncer.refresh(t,r,this._terminal.rows)},e.prototype._renderRows=function(t,r){for(var n=this._terminal.buffer,p=n.lines.length.toString(),c=t;c<=r;c++){var m=n.translateBufferLineToString(n.ydisp+c,!0),C=(n.ydisp+c+1).toString(),S=this._rowElements[c];S&&(m.length===0?S.innerText="Â ":S.textContent=m,S.setAttribute("aria-posinset",C),S.setAttribute("aria-setsize",p))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t])}},e.prototype._refreshRowDimensions=function(t){t.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(s.Disposable);o.AccessibilityManager=f},3614:(M,o)=>{function y(d){return d.replace(/\r?\n/g,"\r")}function l(d,g){return g?"\x1B[200~"+d+"\x1B[201~":d}function h(d,g,v){d=l(d=y(d),v.decPrivateModes.bracketedPasteMode),v.triggerDataEvent(d,!0),g.value=""}function u(d,g,v){var s=v.getBoundingClientRect(),a=d.clientX-s.left-10,_=d.clientY-s.top-10;g.style.width="20px",g.style.height="20px",g.style.left=a+"px",g.style.top=_+"px",g.style.zIndex="1000",g.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=y,o.bracketTextForPaste=l,o.copyHandler=function(d,g){d.clipboardData&&d.clipboardData.setData("text/plain",g.selectionText),d.preventDefault()},o.handlePasteEvent=function(d,g,v){d.stopPropagation(),d.clipboardData&&h(d.clipboardData.getData("text/plain"),g,v)},o.paste=h,o.moveTextAreaUnderMouseCursor=u,o.rightClickHandler=function(d,g,v,s,a){u(d,g,v),a&&s.rightClickSelect(d),g.value=s.selectionText,g.select()}},7239:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;var y=function(){function l(){this._color={},this._rgba={}}return l.prototype.clear=function(){this._color={},this._rgba={}},l.prototype.setCss=function(h,u,d){this._rgba[h]||(this._rgba[h]={}),this._rgba[h][u]=d},l.prototype.getCss=function(h,u){return this._rgba[h]?this._rgba[h][u]:void 0},l.prototype.setColor=function(h,u,d){this._color[h]||(this._color[h]={}),this._color[h][u]=d},l.prototype.getColor=function(h,u){return this._color[h]?this._color[h][u]:void 0},l}();o.ColorContrastCache=y},5680:function(M,o,y){var l=this&&this.__read||function(f,i){var e=typeof Symbol=="function"&&f[Symbol.iterator];if(!e)return f;var t,r,n=e.call(f),p=[];try{for(;(i===void 0||i-- >0)&&!(t=n.next()).done;)p.push(t.value)}catch(c){r={error:c}}finally{try{t&&!t.done&&(e=n.return)&&e.call(n)}finally{if(r)throw r.error}}return p};Object.defineProperty(o,"__esModule",{value:!0}),o.ColorManager=o.DEFAULT_ANSI_COLORS=void 0;var h=y(8055),u=y(7239),d=h.css.toColor("#ffffff"),g=h.css.toColor("#000000"),v=h.css.toColor("#ffffff"),s=h.css.toColor("#000000"),a={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var f=[h.css.toColor("#2e3436"),h.css.toColor("#cc0000"),h.css.toColor("#4e9a06"),h.css.toColor("#c4a000"),h.css.toColor("#3465a4"),h.css.toColor("#75507b"),h.css.toColor("#06989a"),h.css.toColor("#d3d7cf"),h.css.toColor("#555753"),h.css.toColor("#ef2929"),h.css.toColor("#8ae234"),h.css.toColor("#fce94f"),h.css.toColor("#729fcf"),h.css.toColor("#ad7fa8"),h.css.toColor("#34e2e2"),h.css.toColor("#eeeeec")],i=[0,95,135,175,215,255],e=0;e<216;e++){var t=i[e/36%6|0],r=i[e/6%6|0],n=i[e%6];f.push({css:h.channels.toCss(t,r,n),rgba:h.channels.toRgba(t,r,n)})}for(e=0;e<24;e++){var p=8+10*e;f.push({css:h.channels.toCss(p,p,p),rgba:h.channels.toRgba(p,p,p)})}return f}());var _=function(){function f(i,e){this.allowTransparency=e;var t=i.createElement("canvas");t.width=1,t.height=1;var r=t.getContext("2d");if(!r)throw new Error("Could not get rendering context");this._ctx=r,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new u.ColorContrastCache,this.colors={foreground:d,background:g,cursor:v,cursorAccent:s,selectionTransparent:a,selectionOpaque:h.color.blend(g,a),selectionForeground:void 0,ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return f.prototype.onOptionsChange=function(i){i==="minimumContrastRatio"&&this._contrastCache.clear()},f.prototype.setTheme=function(i){i===void 0&&(i={}),this.colors.foreground=this._parseColor(i.foreground,d),this.colors.background=this._parseColor(i.background,g),this.colors.cursor=this._parseColor(i.cursor,v,!0),this.colors.cursorAccent=this._parseColor(i.cursorAccent,s,!0),this.colors.selectionTransparent=this._parseColor(i.selection,a,!0),this.colors.selectionOpaque=h.color.blend(this.colors.background,this.colors.selectionTransparent);var e={css:"",rgba:0};this.colors.selectionForeground=i.selectionForeground?this._parseColor(i.selectionForeground,e):void 0,this.colors.selectionForeground===e&&(this.colors.selectionForeground=void 0),h.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=h.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(i.black,o.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(i.red,o.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(i.green,o.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(i.yellow,o.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(i.blue,o.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(i.magenta,o.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(i.cyan,o.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(i.white,o.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(i.brightBlack,o.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(i.brightRed,o.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(i.brightGreen,o.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(i.brightYellow,o.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(i.brightBlue,o.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(i.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(i.brightCyan,o.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(i.brightWhite,o.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},f.prototype.restoreColor=function(i){if(i!==void 0)switch(i){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[i]=this._restoreColors.ansi[i]}else for(var e=0;e<this._restoreColors.ansi.length;++e)this.colors.ansi[e]=this._restoreColors.ansi[e]},f.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:this.colors.ansi.slice()}},f.prototype._parseColor=function(i,e,t){if(t===void 0&&(t=this.allowTransparency),i===void 0)return e;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=i,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+i+" is invalid using fallback "+e.css),e;this._ctx.fillRect(0,0,1,1);var r=this._ctx.getImageData(0,0,1,1).data;if(r[3]!==255){if(!t)return console.warn("Color: "+i+" is using transparency, but allowTransparency is false. Using fallback "+e.css+"."),e;var n=l(this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(b){return Number(b)}),4),p=n[0],c=n[1],m=n[2],C=n[3],S=Math.round(255*C);return{rgba:h.channels.toRgba(p,c,m,S),css:i}}return{css:this._ctx.fillStyle,rgba:h.channels.toRgba(r[0],r[1],r[2],r[3])}},f}();o.ColorManager=_},9631:function(M,o){var y=this&&this.__values||function(l){var h=typeof Symbol=="function"&&Symbol.iterator,u=h&&l[h],d=0;if(u)return u.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&d>=l.length&&(l=void 0),{value:l&&l[d++],done:!l}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.removeElementFromParent=void 0,o.removeElementFromParent=function(){for(var l,h,u,d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];try{for(var v=y(d),s=v.next();!s.done;s=v.next()){var a=s.value;(u=a?.parentElement)===null||u===void 0||u.removeChild(a)}}catch(_){l={error:_}}finally{try{s&&!s.done&&(h=v.return)&&h.call(v)}finally{if(l)throw l.error}}}},3656:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(y,l,h,u){y.addEventListener(l,h,u);var d=!1;return{dispose:function(){d||(d=!0,y.removeEventListener(l,h,u))}}}},3551:function(M,o,y){var l=this&&this.__decorate||function(s,a,_,f){var i,e=arguments.length,t=e<3?a:f===null?f=Object.getOwnPropertyDescriptor(a,_):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(s,a,_,f);else for(var r=s.length-1;r>=0;r--)(i=s[r])&&(t=(e<3?i(t):e>3?i(a,_,t):i(a,_))||t);return e>3&&t&&Object.defineProperty(a,_,t),t},h=this&&this.__param||function(s,a){return function(_,f){a(_,f,s)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseZone=o.Linkifier=void 0;var u=y(8460),d=y(2585),g=function(){function s(a,_,f){this._bufferService=a,this._logService=_,this._unicodeService=f,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new u.EventEmitter,this._onHideLinkUnderline=new u.EventEmitter,this._onLinkTooltip=new u.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(s.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),s.prototype.attachToDom=function(a,_){this._element=a,this._mouseZoneManager=_},s.prototype.linkifyRows=function(a,_){var f=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=a,this._rowsToLinkify.end=_):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,a),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,_)),this._mouseZoneManager.clearAll(a,_),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return f._linkifyRows()},s._timeBeforeLatency))},s.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var a=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var _=a.ydisp+this._rowsToLinkify.start;if(!(_>=a.lines.length)){for(var f=a.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,i=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,_,f,i,i);e.hasNext();)for(var t=e.next(),r=0;r<this._linkMatchers.length;r++)this._doLinkifyRow(t.range.first,t.content,this._linkMatchers[r]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},s.prototype.registerLinkMatcher=function(a,_,f){if(f===void 0&&(f={}),!_)throw new Error("handler must be defined");var i={id:this._nextLinkMatcherId++,regex:a,handler:_,matchIndex:f.matchIndex,validationCallback:f.validationCallback,hoverTooltipCallback:f.tooltipCallback,hoverLeaveCallback:f.leaveCallback,willLinkActivate:f.willLinkActivate,priority:f.priority||0};return this._addLinkMatcherToList(i),i.id},s.prototype._addLinkMatcherToList=function(a){if(this._linkMatchers.length!==0){for(var _=this._linkMatchers.length-1;_>=0;_--)if(a.priority<=this._linkMatchers[_].priority)return void this._linkMatchers.splice(_+1,0,a);this._linkMatchers.splice(0,0,a)}else this._linkMatchers.push(a)},s.prototype.deregisterLinkMatcher=function(a){for(var _=0;_<this._linkMatchers.length;_++)if(this._linkMatchers[_].id===a)return this._linkMatchers.splice(_,1),!0;return!1},s.prototype._doLinkifyRow=function(a,_,f){for(var i,e=this,t=new RegExp(f.regex.source,(f.regex.flags||"")+"g"),r=-1,n=function(){var c=i[typeof f.matchIndex!="number"?0:f.matchIndex];if(!c)return p._logService.debug("match found without corresponding matchIndex",i,f),"break";if(r=_.indexOf(c,r+1),t.lastIndex=r+c.length,r<0)return"break";var m=p._bufferService.buffer.stringIndexToBufferIndex(a,r);if(m[0]<0)return"break";var C=p._bufferService.buffer.lines.get(m[0]);if(!C)return"break";var S=C.getFg(m[1]),b=S?S>>9&511:void 0;f.validationCallback?f.validationCallback(c,function(w){e._rowsTimeoutId||w&&e._addLink(m[1],m[0]-e._bufferService.buffer.ydisp,c,f,b)}):p._addLink(m[1],m[0]-p._bufferService.buffer.ydisp,c,f,b)},p=this;(i=t.exec(_))!==null&&n()!=="break";);},s.prototype._addLink=function(a,_,f,i,e){var t=this;if(this._mouseZoneManager&&this._element){var r=this._unicodeService.getStringCellWidth(f),n=a%this._bufferService.cols,p=_+Math.floor(a/this._bufferService.cols),c=(n+r)%this._bufferService.cols,m=p+Math.floor((n+r)/this._bufferService.cols);c===0&&(c=this._bufferService.cols,m--),this._mouseZoneManager.add(new v(n+1,p+1,c+1,m+1,function(C){if(i.handler)return i.handler(C,f);var S=window.open();S?(S.opener=null,S.location.href=f):console.warn("Opening link blocked as opener could not be cleared")},function(){t._onShowLinkUnderline.fire(t._createLinkHoverEvent(n,p,c,m,e)),t._element.classList.add("xterm-cursor-pointer")},function(C){t._onLinkTooltip.fire(t._createLinkHoverEvent(n,p,c,m,e)),i.hoverTooltipCallback&&i.hoverTooltipCallback(C,f,{start:{x:n,y:p},end:{x:c,y:m}})},function(){t._onHideLinkUnderline.fire(t._createLinkHoverEvent(n,p,c,m,e)),t._element.classList.remove("xterm-cursor-pointer"),i.hoverLeaveCallback&&i.hoverLeaveCallback()},function(C){return!i.willLinkActivate||i.willLinkActivate(C,f)}))}},s.prototype._createLinkHoverEvent=function(a,_,f,i,e){return{x1:a,y1:_,x2:f,y2:i,cols:this._bufferService.cols,fg:e}},s._timeBeforeLatency=200,s=l([h(0,d.IBufferService),h(1,d.ILogService),h(2,d.IUnicodeService)],s)}();o.Linkifier=g;var v=function(s,a,_,f,i,e,t,r,n){this.x1=s,this.y1=a,this.x2=_,this.y2=f,this.clickCallback=i,this.hoverCallback=e,this.tooltipCallback=t,this.leaveCallback=r,this.willLinkActivate=n};o.MouseZone=v},6465:function(M,o,y){var l,h=this&&this.__extends||(l=function(e,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(r[p]=n[p])},l(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}l(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}),u=this&&this.__decorate||function(e,t,r,n){var p,c=arguments.length,m=c<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,t,r,n);else for(var C=e.length-1;C>=0;C--)(p=e[C])&&(m=(c<3?p(m):c>3?p(t,r,m):p(t,r))||m);return c>3&&m&&Object.defineProperty(t,r,m),m},d=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},g=this&&this.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},v=this&&this.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n,p,c=r.call(e),m=[];try{for(;(t===void 0||t-- >0)&&!(n=c.next()).done;)m.push(n.value)}catch(C){p={error:C}}finally{try{n&&!n.done&&(r=c.return)&&r.call(c)}finally{if(p)throw p.error}}return m};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier2=void 0;var s=y(2585),a=y(8460),_=y(844),f=y(3656),i=function(e){function t(r){var n=e.call(this)||this;return n._bufferService=r,n._linkProviders=[],n._linkCacheDisposables=[],n._isMouseOut=!0,n._activeLine=-1,n._onShowLinkUnderline=n.register(new a.EventEmitter),n._onHideLinkUnderline=n.register(new a.EventEmitter),n.register((0,_.getDisposeArrayDisposable)(n._linkCacheDisposables)),n}return h(t,e),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(r){var n=this;return this._linkProviders.push(r),{dispose:function(){var p=n._linkProviders.indexOf(r);p!==-1&&n._linkProviders.splice(p,1)}}},t.prototype.attachToDom=function(r,n,p){var c=this;this._element=r,this._mouseService=n,this._renderService=p,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",function(){c._isMouseOut=!0,c._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))},t.prototype._onMouseMove=function(r){if(this._lastMouseEvent=r,this._element&&this._mouseService){var n=this._positionFromMouseEvent(r,this._element,this._mouseService);if(n){this._isMouseOut=!1;for(var p=r.composedPath(),c=0;c<p.length;c++){var m=p[c];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&n.x===this._lastBufferCell.x&&n.y===this._lastBufferCell.y||(this._onHover(n),this._lastBufferCell=n)}}},t.prototype._onHover=function(r){if(this._activeLine!==r.y)return this._clearCurrentLink(),void this._askForLink(r,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,r)||(this._clearCurrentLink(),this._askForLink(r,!0))},t.prototype._askForLink=function(r,n){var p,c,m,C,S=this;this._activeProviderReplies&&n||((m=this._activeProviderReplies)===null||m===void 0||m.forEach(function(L){L?.forEach(function(A){A.link.dispose&&A.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=r.y);var b=!1,w=function(L,A){n?!((C=T._activeProviderReplies)===null||C===void 0)&&C.get(L)&&(b=T._checkLinkProviderResult(L,r,b)):A.provideLinks(r.y,function(I){var V,G;if(!S._isMouseOut){var K=I?.map(function(Y){return{link:Y}});(V=S._activeProviderReplies)===null||V===void 0||V.set(L,K),b=S._checkLinkProviderResult(L,r,b),((G=S._activeProviderReplies)===null||G===void 0?void 0:G.size)===S._linkProviders.length&&S._removeIntersectingLinks(r.y,S._activeProviderReplies)}})},T=this;try{for(var x=g(this._linkProviders.entries()),O=x.next();!O.done;O=x.next()){var E=v(O.value,2);w(E[0],E[1])}}catch(L){p={error:L}}finally{try{O&&!O.done&&(c=x.return)&&c.call(x)}finally{if(p)throw p.error}}},t.prototype._removeIntersectingLinks=function(r,n){for(var p=new Set,c=0;c<n.size;c++){var m=n.get(c);if(m)for(var C=0;C<m.length;C++)for(var S=m[C],b=S.link.range.start.y<r?0:S.link.range.start.x,w=S.link.range.end.y>r?this._bufferService.cols:S.link.range.end.x,T=b;T<=w;T++){if(p.has(T)){m.splice(C--,1);break}p.add(T)}}},t.prototype._checkLinkProviderResult=function(r,n,p){var c,m=this;if(!this._activeProviderReplies)return p;for(var C=this._activeProviderReplies.get(r),S=!1,b=0;b<r;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(S=!0);if(!S&&C){var w=C.find(function(x){return m._linkAtPosition(x.link,n)});w&&(p=!0,this._handleNewLink(w))}if(this._activeProviderReplies.size===this._linkProviders.length&&!p)for(b=0;b<this._activeProviderReplies.size;b++){var T=(c=this._activeProviderReplies.get(b))===null||c===void 0?void 0:c.find(function(x){return m._linkAtPosition(x.link,n)});if(T){p=!0,this._handleNewLink(T);break}}return p},t.prototype._handleMouseDown=function(){this._mouseDownLink=this._currentLink},t.prototype._handleMouseUp=function(r){if(this._element&&this._mouseService&&this._currentLink){var n=this._positionFromMouseEvent(r,this._element,this._mouseService);n&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,n)&&this._currentLink.link.activate(r,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(r,n){this._element&&this._currentLink&&this._lastMouseEvent&&(!r||!n||this._currentLink.link.range.start.y>=r&&this._currentLink.link.range.end.y<=n)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,_.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(r){var n=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var p=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);p&&this._linkAtPosition(r.link,p)&&(this._currentLink=r,this._currentLink.state={decorations:{underline:r.link.decorations===void 0||r.link.decorations.underline,pointerCursor:r.link.decorations===void 0||r.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,r.link,this._lastMouseEvent),r.link.decorations={},Object.defineProperties(r.link.decorations,{pointerCursor:{get:function(){var c,m;return(m=(c=n._currentLink)===null||c===void 0?void 0:c.state)===null||m===void 0?void 0:m.decorations.pointerCursor},set:function(c){var m,C;!((m=n._currentLink)===null||m===void 0)&&m.state&&n._currentLink.state.decorations.pointerCursor!==c&&(n._currentLink.state.decorations.pointerCursor=c,n._currentLink.state.isHovered&&((C=n._element)===null||C===void 0||C.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:function(){var c,m;return(m=(c=n._currentLink)===null||c===void 0?void 0:c.state)===null||m===void 0?void 0:m.decorations.underline},set:function(c){var m,C,S;!((m=n._currentLink)===null||m===void 0)&&m.state&&((S=(C=n._currentLink)===null||C===void 0?void 0:C.state)===null||S===void 0?void 0:S.decorations.underline)!==c&&(n._currentLink.state.decorations.underline=c,n._currentLink.state.isHovered&&n._fireUnderlineEvent(r.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(function(c){var m=c.start===0?0:c.start+1+n._bufferService.buffer.ydisp;n._clearCurrentLink(m,c.end+1+n._bufferService.buffer.ydisp)})))}},t.prototype._linkHover=function(r,n,p){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!0),this._currentLink.state.decorations.pointerCursor&&r.classList.add("xterm-cursor-pointer")),n.hover&&n.hover(p,n.text)},t.prototype._fireUnderlineEvent=function(r,n){var p=r.range,c=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(p.start.x-1,p.start.y-c-1,p.end.x,p.end.y-c-1,void 0);(n?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)},t.prototype._linkLeave=function(r,n,p){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!1),this._currentLink.state.decorations.pointerCursor&&r.classList.remove("xterm-cursor-pointer")),n.leave&&n.leave(p,n.text)},t.prototype._linkAtPosition=function(r,n){var p=r.range.start.y===r.range.end.y,c=r.range.start.y<n.y,m=r.range.end.y>n.y;return(p&&r.range.start.x<=n.x&&r.range.end.x>=n.x||c&&r.range.end.x>=n.x||m&&r.range.start.x<=n.x||c&&m)&&r.range.start.y<=n.y&&r.range.end.y>=n.y},t.prototype._positionFromMouseEvent=function(r,n,p){var c=p.getCoords(r,n,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(r,n,p,c,m){return{x1:r,y1:n,x2:p,y2:c,cols:this._bufferService.cols,fg:m}},u([d(0,s.IBufferService)],t)}(_.Disposable);o.Linkifier2=i},9042:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(M,o,y){var l,h=this&&this.__extends||(l=function(f,i){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},l(f,i)},function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=f}l(f,i),f.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),u=this&&this.__decorate||function(f,i,e,t){var r,n=arguments.length,p=n<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(f,i,e,t);else for(var c=f.length-1;c>=0;c--)(r=f[c])&&(p=(n<3?r(p):n>3?r(i,e,p):r(i,e))||p);return n>3&&p&&Object.defineProperty(i,e,p),p},d=this&&this.__param||function(f,i){return function(e,t){i(e,t,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseZoneManager=void 0;var g=y(844),v=y(3656),s=y(4725),a=y(2585),_=function(f){function i(e,t,r,n,p,c){var m=f.call(this)||this;return m._element=e,m._screenElement=t,m._bufferService=r,m._mouseService=n,m._selectionService=p,m._optionsService=c,m._zones=[],m._areZonesActive=!1,m._lastHoverCoords=[void 0,void 0],m._initialSelectionLength=0,m.register((0,v.addDisposableDomListener)(m._element,"mousedown",function(C){return m._onMouseDown(C)})),m._mouseMoveListener=function(C){return m._onMouseMove(C)},m._mouseLeaveListener=function(C){return m._onMouseLeave(C)},m._clickListener=function(C){return m._onClick(C)},m}return h(i,f),i.prototype.dispose=function(){f.prototype.dispose.call(this),this._deactivate()},i.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},i.prototype.clearAll=function(e,t){if(this._zones.length!==0){e&&t||(e=0,t=this._bufferService.rows-1);for(var r=0;r<this._zones.length;r++){var n=this._zones[r];(n.y1>e&&n.y1<=t+1||n.y2>e&&n.y2<=t+1||n.y1<e&&n.y2>t+1)&&(this._currentZone&&this._currentZone===n&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(r--,1))}this._zones.length===0&&this._deactivate()}},i.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},i.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},i.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},i.prototype._onHover=function(e){var t=this,r=this._findZoneEventAt(e);r!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),r&&(this._currentZone=r,r.hoverCallback&&r.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return t._onTooltip(e)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},i.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var t=this._findZoneEventAt(e);t?.tooltipCallback(e)},i.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var t=this._findZoneEventAt(e);t?.willLinkActivate(e)&&(e.preventDefault(),e.stopImmediatePropagation())}},i.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},i.prototype._onClick=function(e){var t=this._findZoneEventAt(e),r=this._getSelectionLength();t&&r===this._initialSelectionLength&&(t.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},i.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},i.prototype._findZoneEventAt=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(t)for(var r=t[0],n=t[1],p=0;p<this._zones.length;p++){var c=this._zones[p];if(c.y1===c.y2){if(n===c.y1&&r>=c.x1&&r<c.x2)return c}else if(n===c.y1&&r>=c.x1||n===c.y2&&r<c.x2||n>c.y1&&n<c.y2)return c}},u([d(2,a.IBufferService),d(3,s.IMouseService),d(4,s.ISelectionService),d(5,a.IOptionsService)],i)}(g.Disposable);o.MouseZoneManager=_},6193:function(M,o){var y=this&&this.__values||function(h){var u=typeof Symbol=="function"&&Symbol.iterator,d=u&&h[u],g=0;if(d)return d.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&g>=h.length&&(h=void 0),{value:h&&h[g++],done:!h}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0;var l=function(){function h(u){this._renderCallback=u,this._refreshCallbacks=[]}return h.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},h.prototype.addRefreshCallback=function(u){var d=this;return this._refreshCallbacks.push(u),this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return d._innerRefresh()})),this._animationFrame},h.prototype.refresh=function(u,d,g){var v=this;this._rowCount=g,u=u!==void 0?u:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return v._innerRefresh()}))},h.prototype._innerRefresh=function(){if(this._animationFrame=void 0,this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var u=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,d),this._runRefreshCallbacks()}else this._runRefreshCallbacks()},h.prototype._runRefreshCallbacks=function(){var u,d;try{for(var g=y(this._refreshCallbacks),v=g.next();!v.done;v=g.next())(0,v.value)(0)}catch(s){u={error:s}}finally{try{v&&!v.done&&(d=g.return)&&d.call(g)}finally{if(u)throw u.error}}this._refreshCallbacks=[]},h}();o.RenderDebouncer=l},5596:function(M,o,y){var l,h=this&&this.__extends||(l=function(d,g){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,s){v.__proto__=s}||function(v,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(v[a]=s[a])},l(d,g)},function(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=d}l(d,g),d.prototype=g===null?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenDprMonitor=void 0;var u=function(d){function g(){var v=d!==null&&d.apply(this,arguments)||this;return v._currentDevicePixelRatio=window.devicePixelRatio,v}return h(g,d),g.prototype.setListener=function(v){var s=this;this._listener&&this.clearListener(),this._listener=v,this._outerListener=function(){s._listener&&(s._listener(window.devicePixelRatio,s._currentDevicePixelRatio),s._updateDpr())},this._updateDpr()},g.prototype.dispose=function(){d.prototype.dispose.call(this),this.clearListener()},g.prototype._updateDpr=function(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},g.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},g}(y(844).Disposable);o.ScreenDprMonitor=u},3236:function(M,o,y){var l,h=this&&this.__extends||(l=function(Z,z){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,D){P.__proto__=D}||function(P,D){for(var N in D)Object.prototype.hasOwnProperty.call(D,N)&&(P[N]=D[N])},l(Z,z)},function(Z,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function P(){this.constructor=Z}l(Z,z),Z.prototype=z===null?Object.create(z):(P.prototype=z.prototype,new P)}),u=this&&this.__values||function(Z){var z=typeof Symbol=="function"&&Symbol.iterator,P=z&&Z[z],D=0;if(P)return P.call(Z);if(Z&&typeof Z.length=="number")return{next:function(){return Z&&D>=Z.length&&(Z=void 0),{value:Z&&Z[D++],done:!Z}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")},d=this&&this.__read||function(Z,z){var P=typeof Symbol=="function"&&Z[Symbol.iterator];if(!P)return Z;var D,N,ee=P.call(Z),te=[];try{for(;(z===void 0||z-- >0)&&!(D=ee.next()).done;)te.push(D.value)}catch(ie){N={error:ie}}finally{try{D&&!D.done&&(P=ee.return)&&P.call(ee)}finally{if(N)throw N.error}}return te},g=this&&this.__spreadArray||function(Z,z,P){if(P||arguments.length===2)for(var D,N=0,ee=z.length;N<ee;N++)!D&&N in z||(D||(D=Array.prototype.slice.call(z,0,N)),D[N]=z[N]);return Z.concat(D||Array.prototype.slice.call(z))};Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;var v=y(2950),s=y(1680),a=y(3614),_=y(2584),f=y(5435),i=y(3525),e=y(3551),t=y(9312),r=y(6114),n=y(3656),p=y(9042),c=y(357),m=y(6954),C=y(4567),S=y(1296),b=y(7399),w=y(8460),T=y(8437),x=y(5680),O=y(3230),E=y(4725),L=y(428),A=y(8934),I=y(6465),V=y(5114),G=y(8969),K=y(8055),Y=y(4269),X=y(5941),k=y(3107),re=y(5744),Q=y(9074),ne=y(2585),F=typeof window<"u"?window.document:null,J=function(Z){function z(P){P===void 0&&(P={});var D=Z.call(this,P)||this;return D.browser=r,D._keyDownHandled=!1,D._keyDownSeen=!1,D._keyPressHandled=!1,D._unprocessedDeadKey=!1,D._onCursorMove=new w.EventEmitter,D._onKey=new w.EventEmitter,D._onRender=new w.EventEmitter,D._onSelectionChange=new w.EventEmitter,D._onTitleChange=new w.EventEmitter,D._onBell=new w.EventEmitter,D._onFocus=new w.EventEmitter,D._onBlur=new w.EventEmitter,D._onA11yCharEmitter=new w.EventEmitter,D._onA11yTabEmitter=new w.EventEmitter,D._setup(),D.linkifier=D._instantiationService.createInstance(e.Linkifier),D.linkifier2=D.register(D._instantiationService.createInstance(I.Linkifier2)),D._decorationService=D._instantiationService.createInstance(Q.DecorationService),D._instantiationService.setService(ne.IDecorationService,D._decorationService),D.register(D._inputHandler.onRequestBell(function(){return D.bell()})),D.register(D._inputHandler.onRequestRefreshRows(function(N,ee){return D.refresh(N,ee)})),D.register(D._inputHandler.onRequestSendFocus(function(){return D._reportFocus()})),D.register(D._inputHandler.onRequestReset(function(){return D.reset()})),D.register(D._inputHandler.onRequestWindowsOptionsReport(function(N){return D._reportWindowsOptions(N)})),D.register(D._inputHandler.onColor(function(N){return D._handleColorEvent(N)})),D.register((0,w.forwardEvent)(D._inputHandler.onCursorMove,D._onCursorMove)),D.register((0,w.forwardEvent)(D._inputHandler.onTitleChange,D._onTitleChange)),D.register((0,w.forwardEvent)(D._inputHandler.onA11yChar,D._onA11yCharEmitter)),D.register((0,w.forwardEvent)(D._inputHandler.onA11yTab,D._onA11yTabEmitter)),D.register(D._bufferService.onResize(function(N){return D._afterResize(N.cols,N.rows)})),D}return h(z,Z),Object.defineProperty(z.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),z.prototype._handleColorEvent=function(P){var D,N,ee,te;if(this._colorManager){try{for(var ie=u(P),ae=ie.next();!ae.done;ae=ie.next()){var he=ae.value,ue=void 0,$="";switch(he.index){case 256:ue="foreground",$="10";break;case 257:ue="background",$="11";break;case 258:ue="cursor",$="12";break;default:ue="ansi",$="4;"+he.index}if(ue)switch(he.type){case 0:var fe=K.color.toColorRGB(ue==="ansi"?this._colorManager.colors.ansi[he.index]:this._colorManager.colors[ue]);this.coreService.triggerDataEvent(_.C0.ESC+"]"+$+";"+(0,X.toRgbString)(fe)+_.C1_ESCAPED.ST);break;case 1:ue==="ansi"?this._colorManager.colors.ansi[he.index]=K.rgba.toColor.apply(K.rgba,g([],d(he.color),!1)):this._colorManager.colors[ue]=K.rgba.toColor.apply(K.rgba,g([],d(he.color),!1));break;case 2:this._colorManager.restoreColor(he.index)}}}catch(ye){D={error:ye}}finally{try{ae&&!ae.done&&(N=ie.return)&&N.call(ie)}finally{if(D)throw D.error}}(ee=this._renderService)===null||ee===void 0||ee.setColors(this._colorManager.colors),(te=this.viewport)===null||te===void 0||te.onThemeChange(this._colorManager.colors)}},z.prototype.dispose=function(){var P,D,N;this._isDisposed||(Z.prototype.dispose.call(this),(P=this._renderService)===null||P===void 0||P.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(N=(D=this.element)===null||D===void 0?void 0:D.parentNode)===null||N===void 0||N.removeChild(this.element))},z.prototype._setup=function(){Z.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(z.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),z.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},z.prototype._updateOptions=function(P){var D,N,ee,te;switch(Z.prototype._updateOptions.call(this,P),P){case"fontFamily":case"fontSize":(D=this._renderService)===null||D===void 0||D.clear(),(N=this._charSizeService)===null||N===void 0||N.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(ee=this.viewport)===null||ee===void 0||ee.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new C.AccessibilityManager(this,this._renderService)):((te=this._accessibilityManager)===null||te===void 0||te.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},z.prototype._onTextAreaFocus=function(P){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(_.C0.ESC+"[I"),this.updateCursorStyle(P),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},z.prototype.blur=function(){var P;return(P=this.textarea)===null||P===void 0?void 0:P.blur()},z.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(_.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},z.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var P=this.buffer.ybase+this.buffer.y,D=this.buffer.lines.get(P);if(D){var N=Math.min(this.buffer.x,this.cols-1),ee=this._renderService.dimensions.actualCellHeight,te=D.getWidth(N),ie=this._renderService.dimensions.actualCellWidth*te,ae=this.buffer.y*this._renderService.dimensions.actualCellHeight,he=N*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=he+"px",this.textarea.style.top=ae+"px",this.textarea.style.width=ie+"px",this.textarea.style.height=ee+"px",this.textarea.style.lineHeight=ee+"px",this.textarea.style.zIndex="-5"}}},z.prototype._initGlobal=function(){var P=this;this._bindKeys(),this.register((0,n.addDisposableDomListener)(this.element,"copy",function(N){P.hasSelection()&&(0,a.copyHandler)(N,P._selectionService)}));var D=function(N){return(0,a.handlePasteEvent)(N,P.textarea,P.coreService)};this.register((0,n.addDisposableDomListener)(this.textarea,"paste",D)),this.register((0,n.addDisposableDomListener)(this.element,"paste",D)),r.isFirefox?this.register((0,n.addDisposableDomListener)(this.element,"mousedown",function(N){N.button===2&&(0,a.rightClickHandler)(N,P.textarea,P.screenElement,P._selectionService,P.options.rightClickSelectsWord)})):this.register((0,n.addDisposableDomListener)(this.element,"contextmenu",function(N){(0,a.rightClickHandler)(N,P.textarea,P.screenElement,P._selectionService,P.options.rightClickSelectsWord)})),r.isLinux&&this.register((0,n.addDisposableDomListener)(this.element,"auxclick",function(N){N.button===1&&(0,a.moveTextAreaUnderMouseCursor)(N,P.textarea,P.screenElement)}))},z.prototype._bindKeys=function(){var P=this;this.register((0,n.addDisposableDomListener)(this.textarea,"keyup",function(D){return P._keyUp(D)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keydown",function(D){return P._keyDown(D)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keypress",function(D){return P._keyPress(D)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionstart",function(){return P._compositionHelper.compositionstart()})),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionupdate",function(D){return P._compositionHelper.compositionupdate(D)})),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionend",function(){return P._compositionHelper.compositionend()})),this.register((0,n.addDisposableDomListener)(this.textarea,"input",function(D){return P._inputEvent(D)},!0)),this.register(this.onRender(function(){return P._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(D){return P._queueLinkification(D.start,D.end)}))},z.prototype.open=function(P){var D=this;if(!P)throw new Error("Terminal requires a parent element.");P.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=P.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),P.appendChild(this.element);var N=F.createDocumentFragment();this._viewportElement=F.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),N.appendChild(this._viewportElement),this._viewportScrollArea=F.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=F.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=F.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),N.appendChild(this.screenElement),this.textarea=F.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,n.addDisposableDomListener)(this.textarea,"focus",function(ie){return D._onTextAreaFocus(ie)})),this.register((0,n.addDisposableDomListener)(this.textarea,"blur",function(){return D._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var ee=this._instantiationService.createInstance(V.CoreBrowserService,this.textarea);this._instantiationService.setService(E.ICoreBrowserService,ee),this._charSizeService=this._instantiationService.createInstance(L.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new x.ColorManager(F,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(ie){return D._colorManager.onOptionsChange(ie)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(Y.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService);var te=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(O.RenderService,te,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(function(ie){return D._onRender.fire(ie)})),this.onResize(function(ie){return D._renderService.resize(ie.cols,ie.rows)}),this._compositionView=F.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(v.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(N),this._soundService=this._instantiationService.createInstance(c.SoundService),this._instantiationService.setService(E.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(A.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(s.Viewport,function(ie){return D.scrollLines(ie,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return D.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){D._renderService.onCursorMove(),D._syncTextArea()})),this.register(this.onResize(function(){return D._renderService.onResize(D.cols,D.rows)})),this.register(this.onBlur(function(){return D._renderService.onBlur()})),this.register(this.onFocus(function(){return D._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return D.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(t.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(ie){return D.scrollLines(ie.amount,ie.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return D._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(ie){return D._renderService.onSelectionChanged(ie.start,ie.end,ie.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(ie){D.textarea.value=ie,D.textarea.focus(),D.textarea.select()})),this.register(this._onScroll.event(function(ie){D.viewport.syncScrollArea(),D._selectionService.refresh()})),this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",function(){return D._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(m.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return D._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(k.BufferDecorationRenderer,this.screenElement)),this.register((0,n.addDisposableDomListener)(this.element,"mousedown",function(ie){return D._selectionService.onMouseDown(ie)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new C.AccessibilityManager(this,this._renderService)),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this._instantiationService.createInstance(re.OverviewRulerRenderer,this._viewportElement,this.screenElement)),this.optionsService.onOptionChange(function(){!D._overviewRulerRenderer&&D.options.overviewRulerWidth&&D._viewportElement&&D.screenElement&&(D._overviewRulerRenderer=D._instantiationService.createInstance(re.OverviewRulerRenderer,D._viewportElement,D.screenElement))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},z.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(i.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(S.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},z.prototype._setTheme=function(P){var D,N,ee;this._theme=P,(D=this._colorManager)===null||D===void 0||D.setTheme(P),(N=this._renderService)===null||N===void 0||N.setColors(this._colorManager.colors),(ee=this.viewport)===null||ee===void 0||ee.onThemeChange(this._colorManager.colors)},z.prototype.bindMouse=function(){var P=this,D=this,N=this.element;function ee($){var fe,ye,Le=D._mouseService.getRawByteCoords($,D.screenElement,D.cols,D.rows);if(!Le)return!1;switch($.overrideType||$.type){case"mousemove":ye=32,$.buttons===void 0?(fe=3,$.button!==void 0&&(fe=$.button<3?$.button:3)):fe=1&$.buttons?0:4&$.buttons?1:2&$.buttons?2:3;break;case"mouseup":ye=0,fe=$.button<3?$.button:3;break;case"mousedown":ye=1,fe=$.button<3?$.button:3;break;case"wheel":if(D.viewport.getLinesScrolled($)===0)return!1;ye=$.deltaY<0?0:1,fe=4;break;default:return!1}return!(ye===void 0||fe===void 0||fe>4)&&D.coreMouseService.triggerMouseEvent({col:Le.x-33,row:Le.y-33,button:fe,action:ye,ctrl:$.ctrlKey,alt:$.altKey,shift:$.shiftKey})}var te={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ie=function($){return ee($),$.buttons||(P._document.removeEventListener("mouseup",te.mouseup),te.mousedrag&&P._document.removeEventListener("mousemove",te.mousedrag)),P.cancel($)},ae=function($){return ee($),P.cancel($,!0)},he=function($){$.buttons&&ee($)},ue=function($){$.buttons||ee($)};this.register(this.coreMouseService.onProtocolChange(function($){$?(P.optionsService.rawOptions.logLevel==="debug"&&P._logService.debug("Binding to mouse events:",P.coreMouseService.explainEvents($)),P.element.classList.add("enable-mouse-events"),P._selectionService.disable()):(P._logService.debug("Unbinding from mouse events."),P.element.classList.remove("enable-mouse-events"),P._selectionService.enable()),8&$?te.mousemove||(N.addEventListener("mousemove",ue),te.mousemove=ue):(N.removeEventListener("mousemove",te.mousemove),te.mousemove=null),16&$?te.wheel||(N.addEventListener("wheel",ae,{passive:!1}),te.wheel=ae):(N.removeEventListener("wheel",te.wheel),te.wheel=null),2&$?te.mouseup||(te.mouseup=ie):(P._document.removeEventListener("mouseup",te.mouseup),te.mouseup=null),4&$?te.mousedrag||(te.mousedrag=he):(P._document.removeEventListener("mousemove",te.mousedrag),te.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,n.addDisposableDomListener)(N,"mousedown",function($){if($.preventDefault(),P.focus(),P.coreMouseService.areMouseEventsActive&&!P._selectionService.shouldForceSelection($))return ee($),te.mouseup&&P._document.addEventListener("mouseup",te.mouseup),te.mousedrag&&P._document.addEventListener("mousemove",te.mousedrag),P.cancel($)})),this.register((0,n.addDisposableDomListener)(N,"wheel",function($){if(!te.wheel){if(!P.buffer.hasScrollback){var fe=P.viewport.getLinesScrolled($);if(fe===0)return;for(var ye=_.C0.ESC+(P.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+($.deltaY<0?"A":"B"),Le="",Fe=0;Fe<Math.abs(fe);Fe++)Le+=ye;return P.coreService.triggerDataEvent(Le,!0),P.cancel($,!0)}return P.viewport.onWheel($)?P.cancel($):void 0}},{passive:!1})),this.register((0,n.addDisposableDomListener)(N,"touchstart",function($){if(!P.coreMouseService.areMouseEventsActive)return P.viewport.onTouchStart($),P.cancel($)},{passive:!0})),this.register((0,n.addDisposableDomListener)(N,"touchmove",function($){if(!P.coreMouseService.areMouseEventsActive)return P.viewport.onTouchMove($)?void 0:P.cancel($)},{passive:!1}))},z.prototype.refresh=function(P,D){var N;(N=this._renderService)===null||N===void 0||N.refreshRows(P,D)},z.prototype._queueLinkification=function(P,D){var N;(N=this.linkifier)===null||N===void 0||N.linkifyRows(P,D)},z.prototype.updateCursorStyle=function(P){var D;!((D=this._selectionService)===null||D===void 0)&&D.shouldColumnSelect(P)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},z.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},z.prototype.scrollLines=function(P,D,N){N===void 0&&(N=0),Z.prototype.scrollLines.call(this,P,D,N),this.refresh(0,this.rows-1)},z.prototype.paste=function(P){(0,a.paste)(P,this.textarea,this.coreService)},z.prototype.attachCustomKeyEventHandler=function(P){this._customKeyEventHandler=P},z.prototype.registerLinkMatcher=function(P,D,N){var ee=this.linkifier.registerLinkMatcher(P,D,N);return this.refresh(0,this.rows-1),ee},z.prototype.deregisterLinkMatcher=function(P){this.linkifier.deregisterLinkMatcher(P)&&this.refresh(0,this.rows-1)},z.prototype.registerLinkProvider=function(P){return this.linkifier2.registerLinkProvider(P)},z.prototype.registerCharacterJoiner=function(P){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var D=this._characterJoinerService.register(P);return this.refresh(0,this.rows-1),D},z.prototype.deregisterCharacterJoiner=function(P){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(P)&&this.refresh(0,this.rows-1)},Object.defineProperty(z.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),z.prototype.addMarker=function(P){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+P)},z.prototype.registerDecoration=function(P){return this._decorationService.registerDecoration(P)},z.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},z.prototype.select=function(P,D,N){this._selectionService.setSelection(P,D,N)},z.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},z.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},z.prototype.clearSelection=function(){var P;(P=this._selectionService)===null||P===void 0||P.clearSelection()},z.prototype.selectAll=function(){var P;(P=this._selectionService)===null||P===void 0||P.selectAll()},z.prototype.selectLines=function(P,D){var N;(N=this._selectionService)===null||N===void 0||N.selectLines(P,D)},z.prototype._keyDown=function(P){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1)return!1;var D=this.browser.isMac&&this.options.macOptionIsMeta&&P.altKey;if(!D&&!this._compositionHelper.keydown(P))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;D||P.key!=="Dead"&&P.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var N=(0,b.evaluateKeyboardEvent)(P,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(P),N.type===3||N.type===2){var ee=this.rows-1;return this.scrollLines(N.type===2?-ee:ee),this.cancel(P,!0)}return N.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,P)||(N.cancel&&this.cancel(P,!0),!N.key||!!(P.key&&!P.ctrlKey&&!P.altKey&&!P.metaKey&&P.key.length===1&&P.key.charCodeAt(0)>=65&&P.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(N.key!==_.C0.ETX&&N.key!==_.C0.CR||(this.textarea.value=""),this._onKey.fire({key:N.key,domEvent:P}),this._showCursor(),this.coreService.triggerDataEvent(N.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(P,!0))))},z.prototype._isThirdLevelShift=function(P,D){var N=P.isMac&&!this.options.macOptionIsMeta&&D.altKey&&!D.ctrlKey&&!D.metaKey||P.isWindows&&D.altKey&&D.ctrlKey&&!D.metaKey||P.isWindows&&D.getModifierState("AltGraph");return D.type==="keypress"?N:N&&(!D.keyCode||D.keyCode>47)},z.prototype._keyUp=function(P){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1||(function(D){return D.keyCode===16||D.keyCode===17||D.keyCode===18}(P)||this.focus(),this.updateCursorStyle(P),this._keyPressHandled=!1)},z.prototype._keyPress=function(P){var D;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1)return!1;if(this.cancel(P),P.charCode)D=P.charCode;else if(P.which===null||P.which===void 0)D=P.keyCode;else{if(P.which===0||P.charCode===0)return!1;D=P.which}return!(!D||(P.altKey||P.ctrlKey||P.metaKey)&&!this._isThirdLevelShift(this.browser,P)||(D=String.fromCharCode(D),this._onKey.fire({key:D,domEvent:P}),this._showCursor(),this.coreService.triggerDataEvent(D,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},z.prototype._inputEvent=function(P){if(P.data&&P.inputType==="insertText"&&(!P.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var D=P.data;return this.coreService.triggerDataEvent(D,!0),this.cancel(P),!0}return!1},z.prototype.bell=function(){var P;this._soundBell()&&((P=this._soundService)===null||P===void 0||P.playBellSound()),this._onBell.fire()},z.prototype.resize=function(P,D){P!==this.cols||D!==this.rows?Z.prototype.resize.call(this,P,D):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},z.prototype._afterResize=function(P,D){var N,ee;(N=this._charSizeService)===null||N===void 0||N.measure(),(ee=this.viewport)===null||ee===void 0||ee.syncScrollArea(!0)},z.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var P=1;P<this.rows;P++)this.buffer.lines.push(this.buffer.getBlankLine(T.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},z.prototype.reset=function(){var P,D;this.options.rows=this.rows,this.options.cols=this.cols;var N=this._customKeyEventHandler;this._setup(),Z.prototype.reset.call(this),(P=this._selectionService)===null||P===void 0||P.reset(),this._decorationService.reset(),this._customKeyEventHandler=N,this.refresh(0,this.rows-1),(D=this.viewport)===null||D===void 0||D.syncScrollArea()},z.prototype.clearTextureAtlas=function(){var P;(P=this._renderService)===null||P===void 0||P.clearTextureAtlas()},z.prototype._reportFocus=function(){var P;!((P=this.element)===null||P===void 0)&&P.classList.contains("focus")?this.coreService.triggerDataEvent(_.C0.ESC+"[I"):this.coreService.triggerDataEvent(_.C0.ESC+"[O")},z.prototype._reportWindowsOptions=function(P){if(this._renderService)switch(P){case f.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var D=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),N=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(_.C0.ESC+"[4;"+N+";"+D+"t");break;case f.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var ee=this._renderService.dimensions.scaledCellWidth.toFixed(0),te=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(_.C0.ESC+"[6;"+te+";"+ee+"t")}},z.prototype.cancel=function(P,D){if(this.options.cancelEvents||D)return P.preventDefault(),P.stopPropagation(),!1},z.prototype._visualBell=function(){return!1},z.prototype._soundBell=function(){return this.options.bellStyle==="sound"},z}(G.CoreTerminal);o.Terminal=J},9924:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0;var y=function(){function l(h,u){u===void 0&&(u=1e3),this._renderCallback=h,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return l.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},l.prototype.refresh=function(h,u,d){var g=this;this._rowCount=d,h=h!==void 0?h:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,h):h,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;var v=Date.now();if(v-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=v,this._innerRefresh();else if(!this._additionalRefreshRequested){var s=v-this._lastRefreshMs,a=this._debounceThresholdMS-s;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){g._lastRefreshMs=Date.now(),g._innerRefresh(),g._additionalRefreshRequested=!1,g._refreshTimeoutID=void 0},a)}},l.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var h=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(h,u)}},l}();o.TimeBasedDebouncer=y},1680:function(M,o,y){var l,h=this&&this.__extends||(l=function(f,i){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},l(f,i)},function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=f}l(f,i),f.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),u=this&&this.__decorate||function(f,i,e,t){var r,n=arguments.length,p=n<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(f,i,e,t);else for(var c=f.length-1;c>=0;c--)(r=f[c])&&(p=(n<3?r(p):n>3?r(i,e,p):r(i,e))||p);return n>3&&p&&Object.defineProperty(i,e,p),p},d=this&&this.__param||function(f,i){return function(e,t){i(e,t,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;var g=y(844),v=y(3656),s=y(4725),a=y(2585),_=function(f){function i(e,t,r,n,p,c,m,C){var S=f.call(this)||this;return S._scrollLines=e,S._viewportElement=t,S._scrollArea=r,S._element=n,S._bufferService=p,S._optionsService=c,S._charSizeService=m,S._renderService=C,S.scrollBarWidth=0,S._currentRowHeight=0,S._currentScaledCellHeight=0,S._lastRecordedBufferLength=0,S._lastRecordedViewportHeight=0,S._lastRecordedBufferHeight=0,S._lastTouchY=0,S._lastScrollTop=0,S._wheelPartialScroll=0,S._refreshAnimationFrame=null,S._ignoreNextScrollEvent=!1,S.scrollBarWidth=S._viewportElement.offsetWidth-S._scrollArea.offsetWidth||15,S.register((0,v.addDisposableDomListener)(S._viewportElement,"scroll",S._onScroll.bind(S))),S._activeBuffer=S._bufferService.buffer,S.register(S._bufferService.buffers.onBufferActivate(function(b){return S._activeBuffer=b.activeBuffer})),S._renderDimensions=S._renderService.dimensions,S.register(S._renderService.onDimensionsChange(function(b){return S._renderDimensions=b})),setTimeout(function(){return S.syncScrollArea()},0),S}return h(i,f),i.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},i.prototype._refresh=function(e){var t=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return t._innerRefresh()}))},i.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null},i.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight||this._refresh(e)},i.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(t)}},i.prototype._bubbleScroll=function(e,t){var r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&this._viewportElement.scrollTop!==0||t>0&&r<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},i.prototype.onWheel=function(e){var t=this._getPixelsScrolled(e);return t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},i.prototype._getPixelsScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t},i.prototype.getLinesScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t},i.prototype._applyScrollModifier=function(e,t){var r=this._optionsService.rawOptions.fastScrollModifier;return r==="alt"&&t.altKey||r==="ctrl"&&t.ctrlKey||r==="shift"&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity},i.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},i.prototype.onTouchMove=function(e){var t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},u([d(4,a.IBufferService),d(5,a.IOptionsService),d(6,s.ICharSizeService),d(7,s.IRenderService)],i)}(g.Disposable);o.Viewport=_},3107:function(M,o,y){var l,h=this&&this.__extends||(l=function(i,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},l(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}l(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),u=this&&this.__decorate||function(i,e,t,r){var n,p=arguments.length,c=p<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,r);else for(var m=i.length-1;m>=0;m--)(n=i[m])&&(c=(p<3?n(c):p>3?n(e,t,c):n(e,t))||c);return p>3&&c&&Object.defineProperty(e,t,c),c},d=this&&this.__param||function(i,e){return function(t,r){e(t,r,i)}},g=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;var v=y(3656),s=y(4725),a=y(844),_=y(2585),f=function(i){function e(t,r,n,p){var c=i.call(this)||this;return c._screenElement=t,c._bufferService=r,c._decorationService=n,c._renderService=p,c._decorationElements=new Map,c._altBufferIsActive=!1,c._dimensionsChanged=!1,c._container=document.createElement("div"),c._container.classList.add("xterm-decoration-container"),c._screenElement.appendChild(c._container),c.register(c._renderService.onRenderedViewportChange(function(){return c._queueRefresh()})),c.register(c._renderService.onDimensionsChange(function(){c._dimensionsChanged=!0,c._queueRefresh()})),c.register((0,v.addDisposableDomListener)(window,"resize",function(){return c._queueRefresh()})),c.register(c._bufferService.buffers.onBufferActivate(function(){c._altBufferIsActive=c._bufferService.buffer===c._bufferService.buffers.alt})),c.register(c._decorationService.onDecorationRegistered(function(){return c._queueRefresh()})),c.register(c._decorationService.onDecorationRemoved(function(m){return c._removeDecoration(m)})),c}return h(e,i),e.prototype.dispose=function(){this._container.remove(),this._decorationElements.clear(),i.prototype.dispose.call(this)},e.prototype._queueRefresh=function(){var t=this;this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(function(){t.refreshDecorations(),t._animationFrame=void 0}))},e.prototype.refreshDecorations=function(){var t,r;try{for(var n=g(this._decorationService.decorations),p=n.next();!p.done;p=n.next()){var c=p.value;this._renderDecoration(c)}}catch(m){t={error:m}}finally{try{p&&!p.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this._dimensionsChanged=!1},e.prototype._renderDecoration=function(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)},e.prototype._createElement=function(t){var r,n=document.createElement("div");n.classList.add("xterm-decoration"),n.style.width=Math.round((t.options.width||1)*this._renderService.dimensions.actualCellWidth)+"px",n.style.height=(t.options.height||1)*this._renderService.dimensions.actualCellHeight+"px",n.style.top=(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.actualCellHeight+"px",n.style.lineHeight=this._renderService.dimensions.actualCellHeight+"px";var p=(r=t.options.x)!==null&&r!==void 0?r:0;return p&&p>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(t,n),n},e.prototype._refreshStyle=function(t){var r=this,n=t.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{var p=this._decorationElements.get(t);p||(t.onDispose(function(){return r._removeDecoration(t)}),p=this._createElement(t),t.element=p,this._decorationElements.set(t,p),this._container.appendChild(p)),p.style.top=n*this._renderService.dimensions.actualCellHeight+"px",p.style.display=this._altBufferIsActive?"none":"block",t.onRenderEmitter.fire(p)}},e.prototype._refreshXPosition=function(t,r){var n;if(r===void 0&&(r=t.element),r){var p=(n=t.options.x)!==null&&n!==void 0?n:0;(t.options.anchor||"left")==="right"?r.style.right=p?p*this._renderService.dimensions.actualCellWidth+"px":"":r.style.left=p?p*this._renderService.dimensions.actualCellWidth+"px":""}},e.prototype._removeDecoration=function(t){var r;(r=this._decorationElements.get(t))===null||r===void 0||r.remove(),this._decorationElements.delete(t)},u([d(1,_.IBufferService),d(2,_.IDecorationService),d(3,s.IRenderService)],e)}(a.Disposable);o.BufferDecorationRenderer=f},5871:function(M,o){var y=this&&this.__values||function(h){var u=typeof Symbol=="function"&&Symbol.iterator,d=u&&h[u],g=0;if(d)return d.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&g>=h.length&&(h=void 0),{value:h&&h[g++],done:!h}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0;var l=function(){function h(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}return Object.defineProperty(h.prototype,"zones",{get:function(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones},enumerable:!1,configurable:!0}),h.prototype.clear=function(){this._zones.length=0,this._zonePoolIndex=0},h.prototype.addDecoration=function(u){var d,g;if(u.options.overviewRulerOptions){try{for(var v=y(this._zones),s=v.next();!s.done;s=v.next()){var a=s.value;if(a.color===u.options.overviewRulerOptions.color&&a.position===u.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,u.marker.line))return;if(this._lineAdjacentToZone(a,u.marker.line,u.options.overviewRulerOptions.position))return void this._addLineToZone(a,u.marker.line)}}}catch(_){d={error:_}}finally{try{s&&!s.done&&(g=v.return)&&g.call(v)}finally{if(d)throw d.error}}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=u.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=u.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=u.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=u.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:u.options.overviewRulerOptions.color,position:u.options.overviewRulerOptions.position,startBufferLine:u.marker.line,endBufferLine:u.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}},h.prototype.setPadding=function(u){this._linePadding=u},h.prototype._lineIntersectsZone=function(u,d){return d>=u.startBufferLine&&d<=u.endBufferLine},h.prototype._lineAdjacentToZone=function(u,d,g){return d>=u.startBufferLine-this._linePadding[g||"full"]&&d<=u.endBufferLine+this._linePadding[g||"full"]},h.prototype._addLineToZone=function(u,d){u.startBufferLine=Math.min(u.startBufferLine,d),u.endBufferLine=Math.max(u.endBufferLine,d)},h}();o.ColorZoneStore=l},5744:function(M,o,y){var l,h=this&&this.__extends||(l=function(n,p){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,m){c.__proto__=m}||function(c,m){for(var C in m)Object.prototype.hasOwnProperty.call(m,C)&&(c[C]=m[C])},l(n,p)},function(n,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function c(){this.constructor=n}l(n,p),n.prototype=p===null?Object.create(p):(c.prototype=p.prototype,new c)}),u=this&&this.__decorate||function(n,p,c,m){var C,S=arguments.length,b=S<3?p:m===null?m=Object.getOwnPropertyDescriptor(p,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,p,c,m);else for(var w=n.length-1;w>=0;w--)(C=n[w])&&(b=(S<3?C(b):S>3?C(p,c,b):C(p,c))||b);return S>3&&b&&Object.defineProperty(p,c,b),b},d=this&&this.__param||function(n,p){return function(c,m){p(c,m,n)}},g=this&&this.__values||function(n){var p=typeof Symbol=="function"&&Symbol.iterator,c=p&&n[p],m=0;if(c)return c.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&m>=n.length&&(n=void 0),{value:n&&n[m++],done:!n}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;var v=y(5871),s=y(3656),a=y(4725),_=y(844),f=y(2585),i={full:0,left:0,center:0,right:0},e={full:0,left:0,center:0,right:0},t={full:0,left:0,center:0,right:0},r=function(n){function p(c,m,C,S,b,w){var T,x=n.call(this)||this;x._viewportElement=c,x._screenElement=m,x._bufferService=C,x._decorationService=S,x._renderService=b,x._optionsService=w,x._colorZoneStore=new v.ColorZoneStore,x._shouldUpdateDimensions=!0,x._shouldUpdateAnchor=!0,x._lastKnownBufferLength=0,x._canvas=document.createElement("canvas"),x._canvas.classList.add("xterm-decoration-overview-ruler"),x._refreshCanvasDimensions(),(T=x._viewportElement.parentElement)===null||T===void 0||T.insertBefore(x._canvas,x._viewportElement);var O=x._canvas.getContext("2d");if(!O)throw new Error("Ctx cannot be null");return x._ctx=O,x._registerDecorationListeners(),x._registerBufferChangeListeners(),x._registerDimensionChangeListeners(),x}return h(p,n),Object.defineProperty(p.prototype,"_width",{get:function(){return this._optionsService.options.overviewRulerWidth||0},enumerable:!1,configurable:!0}),p.prototype._registerDecorationListeners=function(){var c=this;this.register(this._decorationService.onDecorationRegistered(function(){return c._queueRefresh(void 0,!0)})),this.register(this._decorationService.onDecorationRemoved(function(){return c._queueRefresh(void 0,!0)}))},p.prototype._registerBufferChangeListeners=function(){var c=this;this.register(this._renderService.onRenderedViewportChange(function(){return c._queueRefresh()})),this.register(this._bufferService.buffers.onBufferActivate(function(){c._canvas.style.display=c._bufferService.buffer===c._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(function(){c._lastKnownBufferLength!==c._bufferService.buffers.normal.lines.length&&(c._refreshDrawHeightConstants(),c._refreshColorZonePadding())}))},p.prototype._registerDimensionChangeListeners=function(){var c=this;this.register(this._renderService.onRender(function(){c._containerHeight&&c._containerHeight===c._screenElement.clientHeight||(c._queueRefresh(!0),c._containerHeight=c._screenElement.clientHeight)})),this.register(this._optionsService.onOptionChange(function(m){m==="overviewRulerWidth"&&c._queueRefresh(!0)})),this.register((0,s.addDisposableDomListener)(window,"resize",function(){c._queueRefresh(!0)})),this._queueRefresh(!0)},p.prototype.dispose=function(){var c;(c=this._canvas)===null||c===void 0||c.remove(),n.prototype.dispose.call(this)},p.prototype._refreshDrawConstants=function(){var c=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);e.full=this._canvas.width,e.left=c,e.center=m,e.right=c,this._refreshDrawHeightConstants(),t.full=0,t.left=0,t.center=e.left,t.right=e.left+e.center},p.prototype._refreshDrawHeightConstants=function(){i.full=Math.round(2*window.devicePixelRatio);var c=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(c,12),6)*window.devicePixelRatio);i.left=m,i.center=m,i.right=m},p.prototype._refreshColorZonePadding=function(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*i.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length},p.prototype._refreshCanvasDimensions=function(){this._canvas.style.width=this._width+"px",this._canvas.width=Math.round(this._width*window.devicePixelRatio),this._canvas.style.height=this._screenElement.clientHeight+"px",this._canvas.height=Math.round(this._screenElement.clientHeight*window.devicePixelRatio),this._refreshDrawConstants(),this._refreshColorZonePadding()},p.prototype._refreshDecorations=function(){var c,m,C,S,b,w;this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();try{for(var T=g(this._decorationService.decorations),x=T.next();!x.done;x=T.next()){var O=x.value;this._colorZoneStore.addDecoration(O)}}catch(K){c={error:K}}finally{try{x&&!x.done&&(m=T.return)&&m.call(T)}finally{if(c)throw c.error}}this._ctx.lineWidth=1;var E=this._colorZoneStore.zones;try{for(var L=g(E),A=L.next();!A.done;A=L.next())(G=A.value).position!=="full"&&this._renderColorZone(G)}catch(K){C={error:K}}finally{try{A&&!A.done&&(S=L.return)&&S.call(L)}finally{if(C)throw C.error}}try{for(var I=g(E),V=I.next();!V.done;V=I.next()){var G;(G=V.value).position==="full"&&this._renderColorZone(G)}}catch(K){b={error:K}}finally{try{V&&!V.done&&(w=I.return)&&w.call(I)}finally{if(b)throw b.error}}this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1},p.prototype._renderColorZone=function(c){this._ctx.fillStyle=c.color,this._ctx.fillRect(t[c.position||"full"],Math.round((this._canvas.height-1)*(c.startBufferLine/this._bufferService.buffers.active.lines.length)-i[c.position||"full"]/2),e[c.position||"full"],Math.round((this._canvas.height-1)*((c.endBufferLine-c.startBufferLine)/this._bufferService.buffers.active.lines.length)+i[c.position||"full"]))},p.prototype._queueRefresh=function(c,m){var C=this;this._shouldUpdateDimensions=c||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=window.requestAnimationFrame(function(){C._refreshDecorations(),C._animationFrame=void 0}))},u([d(2,f.IBufferService),d(3,f.IDecorationService),d(4,a.IRenderService),d(5,f.IOptionsService)],p)}(_.Disposable);o.OverviewRulerRenderer=r},2950:function(M,o,y){var l=this&&this.__decorate||function(v,s,a,_){var f,i=arguments.length,e=i<3?s:_===null?_=Object.getOwnPropertyDescriptor(s,a):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(v,s,a,_);else for(var t=v.length-1;t>=0;t--)(f=v[t])&&(e=(i<3?f(e):i>3?f(s,a,e):f(s,a))||e);return i>3&&e&&Object.defineProperty(s,a,e),e},h=this&&this.__param||function(v,s){return function(a,_){s(a,_,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;var u=y(4725),d=y(2585),g=function(){function v(s,a,_,f,i,e){this._textarea=s,this._compositionView=a,this._bufferService=_,this._optionsService=f,this._coreService=i,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(v.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),v.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},v.prototype.compositionupdate=function(s){var a=this;this._compositionView.textContent=s.data,this.updateCompositionElements(),setTimeout(function(){a._compositionPosition.end=a._textarea.value.length},0)},v.prototype.compositionend=function(){this._finalizeComposition(!0)},v.prototype.keydown=function(s){if(this._isComposing||this._isSendingComposition){if(s.keyCode===229||s.keyCode===16||s.keyCode===17||s.keyCode===18)return!1;this._finalizeComposition(!1)}return s.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},v.prototype._finalizeComposition=function(s){var a=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,s){var _={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(a._isSendingComposition){a._isSendingComposition=!1;var i;_.start+=a._dataAlreadySent.length,(i=a._isComposing?a._textarea.value.substring(_.start,_.end):a._textarea.value.substring(_.start)).length>0&&a._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;var f=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(f,!0)}},v.prototype._handleAnyTextareaChanges=function(){var s=this,a=this._textarea.value;setTimeout(function(){if(!s._isComposing){var _=s._textarea.value.replace(a,"");_.length>0&&(s._dataAlreadySent=_,s._coreService.triggerDataEvent(_,!0))}},0)},v.prototype.updateCompositionElements=function(s){var a=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var _=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),f=this._renderService.dimensions.actualCellHeight,i=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=_*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=f+"px",this._compositionView.style.lineHeight=f+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var t=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(t.width,1)+"px",this._textarea.style.height=Math.max(t.height,1)+"px",this._textarea.style.lineHeight=t.height+"px"}s||setTimeout(function(){return a.updateCompositionElements(!0)},0)}},l([h(2,d.IBufferService),h(3,d.IOptionsService),h(4,d.ICoreService),h(5,u.IRenderService)],v)}();o.CompositionHelper=g},9806:(M,o)=>{function y(l,h,u){var d=u.getBoundingClientRect(),g=l.getComputedStyle(u),v=parseInt(g.getPropertyValue("padding-left")),s=parseInt(g.getPropertyValue("padding-top"));return[h.clientX-d.left-v,h.clientY-d.top-s]}Object.defineProperty(o,"__esModule",{value:!0}),o.getRawByteCoords=o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=y,o.getCoords=function(l,h,u,d,g,v,s,a,_){if(v){var f=y(l,h,u);if(f)return f[0]=Math.ceil((f[0]+(_?s/2:0))/s),f[1]=Math.ceil(f[1]/a),f[0]=Math.min(Math.max(f[0],1),d+(_?1:0)),f[1]=Math.min(Math.max(f[1],1),g),f}},o.getRawByteCoords=function(l){if(l)return{x:l[0]+32,y:l[1]+32}}},9504:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;var l=y(2584);function h(a,_,f,i){var e=a-u(f,a),t=_-u(f,_),r=Math.abs(e-t)-function(n,p,c){for(var m=0,C=n-u(c,n),S=p-u(c,p),b=0;b<Math.abs(C-S);b++){var w=d(n,p)==="A"?-1:1,T=c.buffer.lines.get(C+w*b);T?.isWrapped&&m++}return m}(a,_,f);return s(r,v(d(a,_),i))}function u(a,_){for(var f=0,i=a.buffer.lines.get(_),e=i?.isWrapped;e&&_>=0&&_<a.rows;)f++,e=(i=a.buffer.lines.get(--_))==null?void 0:i.isWrapped;return f}function d(a,_){return a>_?"A":"B"}function g(a,_,f,i,e,t){for(var r=a,n=_,p="";r!==f||n!==i;)r+=e?1:-1,e&&r>t.cols-1?(p+=t.buffer.translateBufferLineToString(n,!1,a,r),r=0,a=0,n++):!e&&r<0&&(p+=t.buffer.translateBufferLineToString(n,!1,0,a+1),a=r=t.cols-1,n--);return p+t.buffer.translateBufferLineToString(n,!1,a,r)}function v(a,_){var f=_?"O":"[";return l.C0.ESC+f+a}function s(a,_){a=Math.floor(a);for(var f="",i=0;i<a;i++)f+=_;return f}o.moveToCellSequence=function(a,_,f,i){var e,t=f.buffer.x,r=f.buffer.y;if(!f.buffer.hasScrollback)return function(p,c,m,C,S,b){return h(c,C,S,b).length===0?"":s(g(p,c,p,c-u(S,c),!1,S).length,v("D",b))}(t,r,0,_,f,i)+h(r,_,f,i)+function(p,c,m,C,S,b){var w;w=h(c,C,S,b).length>0?C-u(S,C):c;var T=C,x=function(O,E,L,A,I,V){var G;return G=h(L,A,I,V).length>0?A-u(I,A):E,O<L&&G<=A||O>=L&&G<A?"C":"D"}(p,c,m,C,S,b);return s(g(p,w,m,T,x==="C",S).length,v(x,b))}(t,r,a,_,f,i);if(r===_)return e=t>a?"D":"C",s(Math.abs(t-a),v(e,i));e=r>_?"D":"C";var n=Math.abs(r-_);return s(function(p,c){return c.cols-p}(r>_?a:t,f)+(n-1)*f.cols+1+((r>_?t:a)-1),v(e,i))}},4389:function(M,o,y){var l=this&&this.__assign||function(){return l=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i},l.apply(this,arguments)},h=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;var u=y(3236),d=y(9042),g=y(7975),v=y(7090),s=y(5741),a=y(8285),_=["cols","rows"],f=function(){function i(e){var t=this;this._core=new u.Terminal(e),this._addonManager=new s.AddonManager,this._publicOptions=l({},this._core.options);var r=function(m){return t._core.options[m]},n=function(m,C){t._checkReadonlyOptions(m),t._core.options[m]=C};for(var p in this._core.options){var c={get:r.bind(this,p),set:n.bind(this,p)};Object.defineProperty(this._publicOptions,p,c)}}return i.prototype._checkReadonlyOptions=function(e){if(_.includes(e))throw new Error('Option "'+e+'" can only be set in the constructor')},i.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(i.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onWriteParsed",{get:function(){return this._core.onWriteParsed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new g.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"unicode",{get:function(){return this._checkProposedApi(),new v.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new a.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modes",{get:function(){var e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this._publicOptions},set:function(e){for(var t in e)this._publicOptions[t]=e[t]},enumerable:!1,configurable:!0}),i.prototype.blur=function(){this._core.blur()},i.prototype.focus=function(){this._core.focus()},i.prototype.resize=function(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)},i.prototype.open=function(e){this._core.open(e)},i.prototype.attachCustomKeyEventHandler=function(e){this._core.attachCustomKeyEventHandler(e)},i.prototype.registerLinkMatcher=function(e,t,r){return this._checkProposedApi(),this._core.registerLinkMatcher(e,t,r)},i.prototype.deregisterLinkMatcher=function(e){this._checkProposedApi(),this._core.deregisterLinkMatcher(e)},i.prototype.registerLinkProvider=function(e){return this._checkProposedApi(),this._core.registerLinkProvider(e)},i.prototype.registerCharacterJoiner=function(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)},i.prototype.deregisterCharacterJoiner=function(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)},i.prototype.registerMarker=function(e){return e===void 0&&(e=0),this._checkProposedApi(),this._verifyIntegers(e),this._core.addMarker(e)},i.prototype.registerDecoration=function(e){var t,r,n;return this._checkProposedApi(),this._verifyPositiveIntegers((t=e.x)!==null&&t!==void 0?t:0,(r=e.width)!==null&&r!==void 0?r:0,(n=e.height)!==null&&n!==void 0?n:0),this._core.registerDecoration(e)},i.prototype.addMarker=function(e){return this.registerMarker(e)},i.prototype.hasSelection=function(){return this._core.hasSelection()},i.prototype.select=function(e,t,r){this._verifyIntegers(e,t,r),this._core.select(e,t,r)},i.prototype.getSelection=function(){return this._core.getSelection()},i.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},i.prototype.clearSelection=function(){this._core.clearSelection()},i.prototype.selectAll=function(){this._core.selectAll()},i.prototype.selectLines=function(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)},i.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},i.prototype.scrollLines=function(e){this._verifyIntegers(e),this._core.scrollLines(e)},i.prototype.scrollPages=function(e){this._verifyIntegers(e),this._core.scrollPages(e)},i.prototype.scrollToTop=function(){this._core.scrollToTop()},i.prototype.scrollToBottom=function(){this._core.scrollToBottom()},i.prototype.scrollToLine=function(e){this._verifyIntegers(e),this._core.scrollToLine(e)},i.prototype.clear=function(){this._core.clear()},i.prototype.write=function(e,t){this._core.write(e,t)},i.prototype.writeUtf8=function(e,t){this._core.write(e,t)},i.prototype.writeln=function(e,t){this._core.write(e),this._core.write(`\r
`,t)},i.prototype.paste=function(e){this._core.paste(e)},i.prototype.getOption=function(e){return this._core.optionsService.getOption(e)},i.prototype.setOption=function(e,t){this._checkReadonlyOptions(e),this._core.optionsService.setOption(e,t)},i.prototype.refresh=function(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)},i.prototype.reset=function(){this._core.reset()},i.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},i.prototype.loadAddon=function(e){return this._addonManager.loadAddon(this,e)},Object.defineProperty(i,"strings",{get:function(){return d},enumerable:!1,configurable:!0}),i.prototype._verifyIntegers=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var p=h(r),c=p.next();!c.done;c=p.next()){var m=c.value;if(m===1/0||isNaN(m)||m%1!=0)throw new Error("This API only accepts integers")}}catch(C){e={error:C}}finally{try{c&&!c.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}},i.prototype._verifyPositiveIntegers=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var p=h(r),c=p.next();!c.done;c=p.next()){var m=c.value;if(m&&(m===1/0||isNaN(m)||m%1!=0||m<0))throw new Error("This API only accepts positive integers")}}catch(C){e={error:C}}finally{try{c&&!c.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}},i}();o.Terminal=f},1546:function(M,o,y){var l=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.BaseRenderLayer=void 0;var h=y(643),u=y(8803),d=y(1420),g=y(3734),v=y(1752),s=y(8055),a=y(9631),_=y(8978),f=function(){function i(e,t,r,n,p,c,m,C,S){this._container=e,this._alpha=n,this._colors=p,this._rendererId=c,this._bufferService=m,this._optionsService=C,this._decorationService=S,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._columnSelectMode=!1,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+t+"-layer"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return i.prototype.dispose=function(){var e;(0,a.removeElementFromParent)(this._canvas),(e=this._charAtlas)===null||e===void 0||e.dispose()},i.prototype._initCanvas=function(){this._ctx=(0,v.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},i.prototype.onOptionsChanged=function(){},i.prototype.onBlur=function(){},i.prototype.onFocus=function(){},i.prototype.onCursorMove=function(){},i.prototype.onGridChanged=function(e,t){},i.prototype.onSelectionChanged=function(e,t,r){r===void 0&&(r=!1),this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=r},i.prototype.setColors=function(e){this._refreshCharAtlas(e)},i.prototype._setTransparency=function(e){if(e!==this._alpha){var t=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},i.prototype._refreshCharAtlas=function(e){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,d.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,e,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},i.prototype.resize=function(e){this._scaledCellWidth=e.scaledCellWidth,this._scaledCellHeight=e.scaledCellHeight,this._scaledCharWidth=e.scaledCharWidth,this._scaledCharHeight=e.scaledCharHeight,this._scaledCharLeft=e.scaledCharLeft,this._scaledCharTop=e.scaledCharTop,this._canvas.width=e.scaledCanvasWidth,this._canvas.height=e.scaledCanvasHeight,this._canvas.style.width=e.canvasWidth+"px",this._canvas.style.height=e.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},i.prototype.clearTextureAtlas=function(){var e;(e=this._charAtlas)===null||e===void 0||e.clear()},i.prototype._fillCells=function(e,t,r,n){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,n*this._scaledCellHeight)},i.prototype._fillMiddleLineAtCells=function(e,t,r){r===void 0&&(r=1);var n=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-n-window.devicePixelRatio,r*this._scaledCellWidth,window.devicePixelRatio)},i.prototype._fillBottomLineAtCells=function(e,t,r){r===void 0&&(r=1),this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},i.prototype._fillLeftLineAtCell=function(e,t,r){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,window.devicePixelRatio*r,this._scaledCellHeight)},i.prototype._strokeRectAtCell=function(e,t,r,n){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(e*this._scaledCellWidth+window.devicePixelRatio/2,t*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,n*this._scaledCellHeight-window.devicePixelRatio)},i.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},i.prototype._clearCells=function(e,t,r,n){this._alpha?this._ctx.clearRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,n*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,n*this._scaledCellHeight))},i.prototype._fillCharTrueColor=function(e,t,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=u.TEXT_BASELINE,this._clipRow(r);var n=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(n=(0,_.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),n||this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},i.prototype._drawChars=function(e,t,r){var n,p,c,m=this._getContrastColor(e,t,r);if(m||e.isFgRGB()||e.isBgRGB())this._drawUncachedChars(e,t,r,m);else{var C,S;e.isInverse()?(C=e.isBgDefault()?u.INVERTED_DEFAULT_COLOR:e.getBgColor(),S=e.isFgDefault()?u.INVERTED_DEFAULT_COLOR:e.getFgColor()):(S=e.isBgDefault()?h.DEFAULT_COLOR:e.getBgColor(),C=e.isFgDefault()?h.DEFAULT_COLOR:e.getFgColor()),C+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&C<8?8:0,this._currentGlyphIdentifier.chars=e.getChars()||h.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=e.getCode()||h.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=S,this._currentGlyphIdentifier.fg=C,this._currentGlyphIdentifier.bold=!!e.isBold(),this._currentGlyphIdentifier.dim=!!e.isDim(),this._currentGlyphIdentifier.italic=!!e.isItalic();var b=!1;try{for(var w=l(this._decorationService.getDecorationsAtCell(t,r)),T=w.next();!T.done;T=w.next()){var x=T.value;if(x.backgroundColorRGB||x.foregroundColorRGB){b=!0;break}}}catch(O){n={error:O}}finally{try{T&&!T.done&&(p=w.return)&&p.call(w)}finally{if(n)throw n.error}}!b&&(!((c=this._charAtlas)===null||c===void 0)&&c.draw(this._ctx,this._currentGlyphIdentifier,t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(e,t,r)}},i.prototype._drawUncachedChars=function(e,t,r,n){if(this._ctx.save(),this._ctx.font=this._getFont(!!e.isBold(),!!e.isItalic()),this._ctx.textBaseline=u.TEXT_BASELINE,e.isInverse())if(n)this._ctx.fillStyle=n.css;else if(e.isBgDefault())this._ctx.fillStyle=s.color.opaque(this._colors.background).css;else if(e.isBgRGB())this._ctx.fillStyle="rgb("+g.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var p=e.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&p<8&&(p+=8),this._ctx.fillStyle=this._colors.ansi[p].css}else if(n)this._ctx.fillStyle=n.css;else if(e.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(e.isFgRGB())this._ctx.fillStyle="rgb("+g.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var c=e.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&c<8&&(c+=8),this._ctx.fillStyle=this._colors.ansi[c].css}this._clipRow(r),e.isDim()&&(this._ctx.globalAlpha=u.DIM_OPACITY);var m=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(m=(0,_.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),m||this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},i.prototype._clipRow=function(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},i.prototype._getFont=function(e,t){return(t?"italic":"")+" "+(e?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},i.prototype._getContrastColor=function(e,t,r){var n,p,c,m,C=!1;try{for(var S=l(this._decorationService.getDecorationsAtCell(t,r)),b=S.next();!b.done;b=S.next()){var w=b.value;w.options.layer!=="top"&&C||(w.backgroundColorRGB&&(c=w.backgroundColorRGB.rgba),w.foregroundColorRGB&&(m=w.foregroundColorRGB.rgba),C=w.options.layer==="top")}}catch(re){n={error:re}}finally{try{b&&!b.done&&(p=S.return)&&p.call(S)}finally{if(n)throw n.error}}if(C||this._colors.selectionForeground&&this._isCellInSelection(t,r)&&(m=this._colors.selectionForeground.rgba),c||m||this._optionsService.rawOptions.minimumContrastRatio!==1&&!(0,v.excludeFromContrastRatioDemands)(e.getCode())){if(!c&&!m){var T=this._colors.contrastCache.getColor(e.bg,e.fg);if(T!==void 0)return T||void 0}var x=e.getFgColor(),O=e.getFgColorMode(),E=e.getBgColor(),L=e.getBgColorMode(),A=!!e.isInverse(),I=!!e.isInverse();if(A){var V=x;x=E,E=V;var G=O;O=L,L=G}var K=this._resolveBackgroundRgba(c!==void 0?50331648:L,c??E,A),Y=this._resolveForegroundRgba(O,x,A,I),X=s.rgba.ensureContrastRatio(c??K,m??Y,this._optionsService.rawOptions.minimumContrastRatio);if(!X){if(!m)return void this._colors.contrastCache.setColor(e.bg,e.fg,null);X=m}var k={css:s.channels.toCss(X>>24&255,X>>16&255,X>>8&255),rgba:X};return c||m||this._colors.contrastCache.setColor(e.bg,e.fg,k),k}},i.prototype._resolveBackgroundRgba=function(e,t,r){switch(e){case 16777216:case 33554432:return this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return r?this._colors.foreground.rgba:this._colors.background.rgba}},i.prototype._resolveForegroundRgba=function(e,t,r,n){switch(e){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&n&&t<8&&(t+=8),this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return r?this._colors.background.rgba:this._colors.foreground.rgba}},i.prototype._isCellInSelection=function(e,t){var r=this._selectionStart,n=this._selectionEnd;return!(!r||!n)&&(this._columnSelectMode?e>=r[0]&&t>=r[1]&&e<n[0]&&t<n[1]:t>r[1]&&t<n[1]||r[1]===n[1]&&t===r[1]&&e>=r[0]&&e<n[0]||r[1]<n[1]&&t===n[1]&&e<n[0]||r[1]<n[1]&&t===r[1]&&e>=r[0])},i}();o.BaseRenderLayer=f},2512:function(M,o,y){var l,h=this&&this.__extends||(l=function(e,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(r[p]=n[p])},l(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}l(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}),u=this&&this.__decorate||function(e,t,r,n){var p,c=arguments.length,m=c<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,t,r,n);else for(var C=e.length-1;C>=0;C--)(p=e[C])&&(m=(c<3?p(m):c>3?p(t,r,m):p(t,r))||m);return c>3&&m&&Object.defineProperty(t,r,m),m},d=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CursorRenderLayer=void 0;var g=y(1546),v=y(511),s=y(2585),a=y(4725),_=600,f=function(e){function t(r,n,p,c,m,C,S,b,w,T){var x=e.call(this,r,"cursor",n,!0,p,c,C,S,T)||this;return x._onRequestRedraw=m,x._coreService=b,x._coreBrowserService=w,x._cell=new v.CellData,x._state={x:0,y:0,isFocused:!1,style:"",width:0},x._cursorRenderers={bar:x._renderBarCursor.bind(x),block:x._renderBlockCursor.bind(x),underline:x._renderUnderlineCursor.bind(x)},x}return h(t,e),t.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},t.prototype.resize=function(r){e.prototype.resize.call(this,r),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},t.prototype.reset=function(){var r;this._clearCursor(),(r=this._cursorBlinkStateManager)===null||r===void 0||r.restartBlinkAnimation(),this.onOptionsChanged()},t.prototype.onBlur=function(){var r;(r=this._cursorBlinkStateManager)===null||r===void 0||r.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onFocus=function(){var r;(r=this._cursorBlinkStateManager)===null||r===void 0||r.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onOptionsChanged=function(){var r,n=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new i(this._coreBrowserService.isFocused,function(){n._render(!0)})):((r=this._cursorBlinkStateManager)===null||r===void 0||r.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onCursorMove=function(){var r;(r=this._cursorBlinkStateManager)===null||r===void 0||r.restartBlinkAnimation()},t.prototype.onGridChanged=function(r,n){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(r){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var n=this._bufferService.buffer.ybase+this._bufferService.buffer.y,p=n-this._bufferService.buffer.ydisp;if(p<0||p>=this._bufferService.rows)this._clearCursor();else{var c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(n).loadCell(c,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var m=this._optionsService.rawOptions.cursorStyle;return m&&m!=="block"?this._cursorRenderers[m](c,p,this._cell):this._renderBlurCursor(c,p,this._cell),this._ctx.restore(),this._state.x=c,this._state.y=p,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===c&&this._state.y===p&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](c,p,this._cell),this._ctx.restore(),this._state.x=c,this._state.y=p,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},t.prototype._renderBarCursor=function(r,n,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(r,n,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},t.prototype._renderBlockCursor=function(r,n,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(r,n,p.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(p,r,n),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(r,n,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(r,n),this._ctx.restore()},t.prototype._renderBlurCursor=function(r,n,p){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(r,n,p.getWidth(),1),this._ctx.restore()},u([d(5,s.IBufferService),d(6,s.IOptionsService),d(7,s.ICoreService),d(8,a.ICoreBrowserService),d(9,s.IDecorationService)],t)}(g.BaseRenderLayer);o.CursorRenderLayer=f;var i=function(){function e(t,r){this._renderCallback=r,this.isCursorVisible=!0,t&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var t=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){t._renderCallback(),t._animationFrame=void 0})))},e.prototype._restartInterval=function(t){var r=this;t===void 0&&(t=_),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(r._animationTimeRestarted){var n=_-(Date.now()-r._animationTimeRestarted);if(r._animationTimeRestarted=void 0,n>0)return void r._restartInterval(n)}r.isCursorVisible=!1,r._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0}),r._blinkInterval=window.setInterval(function(){if(r._animationTimeRestarted){var p=_-(Date.now()-r._animationTimeRestarted);return r._animationTimeRestarted=void 0,void r._restartInterval(p)}r.isCursorVisible=!r.isCursorVisible,r._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})},_)},t)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:function(M,o,y){var l,h,u,d,g,v,s,a,_,f,i,e,t,r,n,p,c,m,C,S,b,w,T,x,O,E,L,A,I,V,G,K,Y,X,k,re,Q,ne,F,J,Z,z,P,D,N,ee,te,ie,ae,he,ue,$,fe,ye,Le,Fe,zt,qt,Kt,Vt,Gt,Xt,Ke,Ve,Ge,Xe,Ye,Ze,$e,Je,Qe,et,tt,rt,it,nt,ot,st,at,ct,lt,ht,ut,ft,dt,pt,_t,vt,yt,gt,mt,St,bt,Ct,wt,Et,Lt,xt,Rt,Ot,At,Mt,Tt,kt,Dt,Pt,Bt,It,Ht,jt,Ft,Wt,Yt,Zt,$t,Jt,Qt,er,tr,rr,ir,nr,or,sr,ar,cr,lr,hr,dr=this&&this.__read||function(W,U){var le=typeof Symbol=="function"&&W[Symbol.iterator];if(!le)return W;var ge,xe,be=le.call(W),ce=[];try{for(;(U===void 0||U-- >0)&&!(ge=be.next()).done;)ce.push(ge.value)}catch(Ce){xe={error:Ce}}finally{try{ge&&!ge.done&&(le=be.return)&&le.call(be)}finally{if(xe)throw xe.error}}return ce},ur=this&&this.__values||function(W){var U=typeof Symbol=="function"&&Symbol.iterator,le=U&&W[U],ge=0;if(le)return le.call(W);if(W&&typeof W.length=="number")return{next:function(){return W&&ge>=W.length&&(W=void 0),{value:W&&W[ge++],done:!W}}};throw new TypeError(U?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.tryDrawCustomChar=o.powerlineDefinitions=o.boxDrawingDefinitions=o.blockElementDefinitions=void 0;var pr=y(1752);o.blockElementDefinitions={"â":[{x:0,y:0,w:8,h:4}],"â":[{x:0,y:7,w:8,h:1}],"â":[{x:0,y:6,w:8,h:2}],"â":[{x:0,y:5,w:8,h:3}],"â":[{x:0,y:4,w:8,h:4}],"â":[{x:0,y:3,w:8,h:5}],"â":[{x:0,y:2,w:8,h:6}],"â":[{x:0,y:1,w:8,h:7}],"â":[{x:0,y:0,w:8,h:8}],"â":[{x:0,y:0,w:7,h:8}],"â":[{x:0,y:0,w:6,h:8}],"â":[{x:0,y:0,w:5,h:8}],"â":[{x:0,y:0,w:4,h:8}],"â":[{x:0,y:0,w:3,h:8}],"â":[{x:0,y:0,w:2,h:8}],"â":[{x:0,y:0,w:1,h:8}],"â":[{x:4,y:0,w:4,h:8}],"â":[{x:0,y:0,w:9,h:1}],"â":[{x:7,y:0,w:1,h:8}],"â":[{x:0,y:4,w:4,h:4}],"â":[{x:4,y:4,w:4,h:4}],"â":[{x:0,y:0,w:4,h:4}],"â":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"â":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"â":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"â":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"â":[{x:4,y:0,w:4,h:4}],"â":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"â":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"ð­°":[{x:1,y:0,w:1,h:8}],"ð­±":[{x:2,y:0,w:1,h:8}],"ð­²":[{x:3,y:0,w:1,h:8}],"ð­³":[{x:4,y:0,w:1,h:8}],"ð­´":[{x:5,y:0,w:1,h:8}],"ð­µ":[{x:6,y:0,w:1,h:8}],"ð­¶":[{x:0,y:1,w:8,h:1}],"ð­·":[{x:0,y:2,w:8,h:1}],"ð­¸":[{x:0,y:3,w:8,h:1}],"ð­¹":[{x:0,y:4,w:8,h:1}],"ð­º":[{x:0,y:5,w:8,h:1}],"ð­»":[{x:0,y:6,w:8,h:1}],"ð­¼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ð­½":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ð­¾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ð­¿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ð®":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"ð®":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"ð®":[{x:0,y:0,w:8,h:2}],"ð®":[{x:0,y:0,w:8,h:3}],"ð®":[{x:0,y:0,w:8,h:5}],"ð®":[{x:0,y:0,w:8,h:6}],"ð®":[{x:0,y:0,w:8,h:7}],"ð®":[{x:6,y:0,w:2,h:8}],"ð®":[{x:5,y:0,w:3,h:8}],"ð®":[{x:3,y:0,w:5,h:8}],"ð®":[{x:2,y:0,w:6,h:8}],"ð®":[{x:1,y:0,w:7,h:8}],"ð®":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"ð®":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"ð®":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Sr={"â":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"â":[[1,0],[0,0],[0,1],[0,0]],"â":[[0,1],[1,1],[1,0],[1,1]]};o.boxDrawingDefinitions={"â":(l={},l[1]="M0,.5 L1,.5",l),"â":(h={},h[3]="M0,.5 L1,.5",h),"â":(u={},u[1]="M.5,0 L.5,1",u),"â":(d={},d[3]="M.5,0 L.5,1",d),"â":(g={},g[1]="M0.5,1 L.5,.5 L1,.5",g),"â":(v={},v[3]="M0.5,1 L.5,.5 L1,.5",v),"â":(s={},s[1]="M0,.5 L.5,.5 L.5,1",s),"â":(a={},a[3]="M0,.5 L.5,.5 L.5,1",a),"â":(_={},_[1]="M.5,0 L.5,.5 L1,.5",_),"â":(f={},f[3]="M.5,0 L.5,.5 L1,.5",f),"â":(i={},i[1]="M.5,0 L.5,.5 L0,.5",i),"â":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"â":(t={},t[1]="M.5,0 L.5,1 M.5,.5 L1,.5",t),"â£":(r={},r[3]="M.5,0 L.5,1 M.5,.5 L1,.5",r),"â¤":(n={},n[1]="M.5,0 L.5,1 M.5,.5 L0,.5",n),"â«":(p={},p[3]="M.5,0 L.5,1 M.5,.5 L0,.5",p),"â¬":(c={},c[1]="M0,.5 L1,.5 M.5,.5 L.5,1",c),"â³":(m={},m[3]="M0,.5 L1,.5 M.5,.5 L.5,1",m),"â´":(C={},C[1]="M0,.5 L1,.5 M.5,.5 L.5,0",C),"â»":(S={},S[3]="M0,.5 L1,.5 M.5,.5 L.5,0",S),"â¼":(b={},b[1]="M0,.5 L1,.5 M.5,0 L.5,1",b),"â":(w={},w[3]="M0,.5 L1,.5 M.5,0 L.5,1",w),"â´":(T={},T[1]="M.5,.5 L0,.5",T),"â¸":(x={},x[3]="M.5,.5 L0,.5",x),"âµ":(O={},O[1]="M.5,.5 L.5,0",O),"â¹":(E={},E[3]="M.5,.5 L.5,0",E),"â¶":(L={},L[1]="M.5,.5 L1,.5",L),"âº":(A={},A[3]="M.5,.5 L1,.5",A),"â·":(I={},I[1]="M.5,.5 L.5,1",I),"â»":(V={},V[3]="M.5,.5 L.5,1",V),"â":(G={},G[1]=function(W,U){return"M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)},G),"â":(K={},K[1]=function(W,U){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},K),"â":(Y={},Y[1]=function(W,U){return"M.5,1 L.5,"+(.5-U)+" L1,"+(.5-U)+" M.5,"+(.5+U)+" L1,"+(.5+U)},Y),"â":(X={},X[1]=function(W,U){return"M"+(.5-W)+",1 L"+(.5-W)+",.5 L1,.5 M"+(.5+W)+",.5 L"+(.5+W)+",1"},X),"â":(k={},k[1]=function(W,U){return"M1,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1"},k),"â":(re={},re[1]=function(W,U){return"M0,"+(.5-U)+" L.5,"+(.5-U)+" L.5,1 M0,"+(.5+U)+" L.5,"+(.5+U)},re),"â":(Q={},Q[1]=function(W,U){return"M"+(.5+W)+",1 L"+(.5+W)+",.5 L0,.5 M"+(.5-W)+",.5 L"+(.5-W)+",1"},Q),"â":(ne={},ne[1]=function(W,U){return"M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M0,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",1"},ne),"â":(F={},F[1]=function(W,U){return"M.5,0 L.5,"+(.5+U)+" L1,"+(.5+U)+" M.5,"+(.5-U)+" L1,"+(.5-U)},F),"â":(J={},J[1]=function(W,U){return"M1,.5 L"+(.5-W)+",.5 L"+(.5-W)+",0 M"+(.5+W)+",.5 L"+(.5+W)+",0"},J),"â":(Z={},Z[1]=function(W,U){return"M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0 M1,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",0"},Z),"â":(z={},z[1]=function(W,U){return"M0,"+(.5+U)+" L.5,"+(.5+U)+" L.5,0 M0,"+(.5-U)+" L.5,"+(.5-U)},z),"â":(P={},P[1]=function(W,U){return"M0,.5 L"+(.5+W)+",.5 L"+(.5+W)+",0 M"+(.5-W)+",.5 L"+(.5-W)+",0"},P),"â":(D={},D[1]=function(W,U){return"M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0 M0,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",0"},D),"â":(N={},N[1]=function(W,U){return"M.5,0 L.5,1 M.5,"+(.5-U)+" L1,"+(.5-U)+" M.5,"+(.5+U)+" L1,"+(.5+U)},N),"â":(ee={},ee[1]=function(W,U){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1 M"+(.5+W)+",.5 L1,.5"},ee),"â ":(te={},te[1]=function(W,U){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1 M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0"},te),"â¡":(ie={},ie[1]=function(W,U){return"M.5,0 L.5,1 M0,"+(.5-U)+" L.5,"+(.5-U)+" M0,"+(.5+U)+" L.5,"+(.5+U)},ie),"â¢":(ae={},ae[1]=function(W,U){return"M0,.5 L"+(.5-W)+",.5 M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},ae),"â£":(he={},he[1]=function(W,U){return"M"+(.5+W)+",0 L"+(.5+W)+",1 M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0"},he),"â¤":(ue={},ue[1]=function(W,U){return"M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)+" M.5,"+(.5+U)+" L.5,1"},ue),"â¥":($={},$[1]=function(W,U){return"M0,.5 L1,.5 M"+(.5-W)+",.5 L"+(.5-W)+",1 M"+(.5+W)+",.5 L"+(.5+W)+",1"},$),"â¦":(fe={},fe[1]=function(W,U){return"M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1"},fe),"â§":(ye={},ye[1]=function(W,U){return"M.5,0 L.5,"+(.5-U)+" M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)},ye),"â¨":(Le={},Le[1]=function(W,U){return"M0,.5 L1,.5 M"+(.5-W)+",.5 L"+(.5-W)+",0 M"+(.5+W)+",.5 L"+(.5+W)+",0"},Le),"â©":(Fe={},Fe[1]=function(W,U){return"M0,"+(.5+U)+" L1,"+(.5+U)+" M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0 M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0"},Fe),"âª":(zt={},zt[1]=function(W,U){return"M.5,0 L.5,1 M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)},zt),"â«":(qt={},qt[1]=function(W,U){return"M0,.5 L1,.5 M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},qt),"â¬":(Kt={},Kt[1]=function(W,U){return"M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1 M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0 M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0"},Kt),"â±":(Vt={},Vt[1]="M1,0 L0,1",Vt),"â²":(Gt={},Gt[1]="M0,0 L1,1",Gt),"â³":(Xt={},Xt[1]="M1,0 L0,1 M0,0 L1,1",Xt),"â¼":(Ke={},Ke[1]="M.5,.5 L0,.5",Ke[3]="M.5,.5 L1,.5",Ke),"â½":(Ve={},Ve[1]="M.5,.5 L.5,0",Ve[3]="M.5,.5 L.5,1",Ve),"â¾":(Ge={},Ge[1]="M.5,.5 L1,.5",Ge[3]="M.5,.5 L0,.5",Ge),"â¿":(Xe={},Xe[1]="M.5,.5 L.5,1",Xe[3]="M.5,.5 L.5,0",Xe),"â":(Ye={},Ye[1]="M.5,.5 L.5,1",Ye[3]="M.5,.5 L1,.5",Ye),"â":(Ze={},Ze[1]="M.5,.5 L1,.5",Ze[3]="M.5,.5 L.5,1",Ze),"â":($e={},$e[1]="M.5,.5 L.5,1",$e[3]="M.5,.5 L0,.5",$e),"â":(Je={},Je[1]="M.5,.5 L0,.5",Je[3]="M.5,.5 L.5,1",Je),"â":(Qe={},Qe[1]="M.5,.5 L.5,0",Qe[3]="M.5,.5 L1,.5",Qe),"â":(et={},et[1]="M.5,.5 L1,.5",et[3]="M.5,.5 L.5,0",et),"â":(tt={},tt[1]="M.5,.5 L.5,0",tt[3]="M.5,.5 L0,.5",tt),"â":(rt={},rt[1]="M.5,.5 L0,.5",rt[3]="M.5,.5 L.5,0",rt),"â":(it={},it[1]="M.5,0 L.5,1",it[3]="M.5,.5 L1,.5",it),"â":(nt={},nt[1]="M0.5,1 L.5,.5 L1,.5",nt[3]="M.5,.5 L.5,0",nt),"â":(ot={},ot[1]="M.5,0 L.5,.5 L1,.5",ot[3]="M.5,.5 L.5,1",ot),"â ":(st={},st[1]="M.5,.5 L1,.5",st[3]="M.5,0 L.5,1",st),"â¡":(at={},at[1]="M.5,.5 L.5,1",at[3]="M.5,0 L.5,.5 L1,.5",at),"â¢":(ct={},ct[1]="M.5,.5 L.5,0",ct[3]="M0.5,1 L.5,.5 L1,.5",ct),"â¥":(lt={},lt[1]="M.5,0 L.5,1",lt[3]="M.5,.5 L0,.5",lt),"â¦":(ht={},ht[1]="M0,.5 L.5,.5 L.5,1",ht[3]="M.5,.5 L.5,0",ht),"â§":(ut={},ut[1]="M.5,0 L.5,.5 L0,.5",ut[3]="M.5,.5 L.5,1",ut),"â¨":(ft={},ft[1]="M.5,.5 L0,.5",ft[3]="M.5,0 L.5,1",ft),"â©":(dt={},dt[1]="M.5,.5 L.5,1",dt[3]="M.5,0 L.5,.5 L0,.5",dt),"âª":(pt={},pt[1]="M.5,.5 L.5,0",pt[3]="M0,.5 L.5,.5 L.5,1",pt),"â­":(_t={},_t[1]="M0.5,1 L.5,.5 L1,.5",_t[3]="M.5,.5 L0,.5",_t),"â®":(vt={},vt[1]="M0,.5 L.5,.5 L.5,1",vt[3]="M.5,.5 L1,.5",vt),"â¯":(yt={},yt[1]="M.5,.5 L.5,1",yt[3]="M0,.5 L1,.5",yt),"â°":(gt={},gt[1]="M0,.5 L1,.5",gt[3]="M.5,.5 L.5,1",gt),"â±":(mt={},mt[1]="M.5,.5 L1,.5",mt[3]="M0,.5 L.5,.5 L.5,1",mt),"â²":(St={},St[1]="M.5,.5 L0,.5",St[3]="M0.5,1 L.5,.5 L1,.5",St),"âµ":(bt={},bt[1]="M.5,0 L.5,.5 L1,.5",bt[3]="M.5,.5 L0,.5",bt),"â¶":(Ct={},Ct[1]="M.5,0 L.5,.5 L0,.5",Ct[3]="M.5,.5 L1,.5",Ct),"â·":(wt={},wt[1]="M.5,.5 L.5,0",wt[3]="M0,.5 L1,.5",wt),"â¸":(Et={},Et[1]="M0,.5 L1,.5",Et[3]="M.5,.5 L.5,0",Et),"â¹":(Lt={},Lt[1]="M.5,.5 L1,.5",Lt[3]="M.5,0 L.5,.5 L0,.5",Lt),"âº":(xt={},xt[1]="M.5,.5 L0,.5",xt[3]="M.5,0 L.5,.5 L1,.5",xt),"â½":(Rt={},Rt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Rt[3]="M.5,.5 L0,.5",Rt),"â¾":(Ot={},Ot[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Ot[3]="M.5,.5 L1,.5",Ot),"â¿":(At={},At[1]="M.5,0 L.5,1",At[3]="M0,.5 L1,.5",At),"â":(Mt={},Mt[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Mt[3]="M.5,.5 L.5,0",Mt),"â":(Tt={},Tt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Tt[3]="M.5,.5 L.5,1",Tt),"â":(kt={},kt[1]="M0,.5 L1,.5",kt[3]="M.5,0 L.5,1",kt),"â":(Dt={},Dt[1]="M0.5,1 L.5,.5 L1,.5",Dt[3]="M.5,0 L.5,.5 L0,.5",Dt),"â":(Pt={},Pt[1]="M0,.5 L.5,.5 L.5,1",Pt[3]="M.5,0 L.5,.5 L1,.5",Pt),"â":(Bt={},Bt[1]="M.5,0 L.5,.5 L1,.5",Bt[3]="M0,.5 L.5,.5 L.5,1",Bt),"â":(It={},It[1]="M.5,0 L.5,.5 L0,.5",It[3]="M0.5,1 L.5,.5 L1,.5",It),"â":(Ht={},Ht[1]="M.5,.5 L.5,1",Ht[3]="M.5,.5 L.5,0 M0,.5 L1,.5",Ht),"â":(jt={},jt[1]="M.5,.5 L.5,0",jt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",jt),"â":(Ft={},Ft[1]="M.5,.5 L1,.5",Ft[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Ft),"â":(Wt={},Wt[1]="M.5,.5 L0,.5",Wt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Wt),"â":(Yt={},Yt[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Yt),"â":(Zt={},Zt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Zt),"â":($t={},$t[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",$t),"â":(Jt={},Jt[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Jt),"â":(Qt={},Qt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Qt),"â":(er={},er[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",er),"â":(tr={},tr[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",tr),"â":(rr={},rr[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",rr),"â":(ir={},ir[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",ir),"â":(nr={},nr[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",nr),"â":(or={},or[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",or),"â":(sr={},sr[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",sr),"â­":(ar={},ar[1]="C.5,1,.5,.5,1,.5",ar),"â®":(cr={},cr[1]="C.5,1,.5,.5,0,.5",cr),"â¯":(lr={},lr[1]="C.5,0,.5,.5,0,.5",lr),"â°":(hr={},hr[1]="C.5,0,.5,.5,1,.5",hr)},o.powerlineDefinitions={"î°":{d:"M0,0 L1,.5 L0,1",type:0},"î±":{d:"M0,0 L1,.5 L0,1",type:1,horizontalPadding:.5},"î²":{d:"M1,0 L0,.5 L1,1",type:0},"î³":{d:"M1,0 L0,.5 L1,1",type:1,horizontalPadding:.5}},o.tryDrawCustomChar=function(W,U,le,ge,xe,be){var ce=o.blockElementDefinitions[U];if(ce)return function(se,me,Be,Ie,ke,De){for(var de=0;de<me.length;de++){var pe=me[de],oe=ke/8,_e=De/8;se.fillRect(Be+pe.x*oe,Ie+pe.y*_e,pe.w*oe,pe.h*_e)}}(W,ce,le,ge,xe,be),!0;var Ce=Sr[U];if(Ce)return function(se,me,Be,Ie,ke,De){var de,pe=_r.get(me);pe||(pe=new Map,_r.set(me,pe));var oe=se.fillStyle;if(typeof oe!="string")throw new Error('Unexpected fillStyle type "'+oe+'"');var _e=pe.get(oe);if(!_e){var ve=me[0].length,we=me.length,Oe=document.createElement("canvas");Oe.width=ve,Oe.height=we;var He=(0,pr.throwIfFalsy)(Oe.getContext("2d")),Ee=new ImageData(ve,we),We=void 0,Pe=void 0,Te=void 0,Ue=void 0;if(oe.startsWith("#"))We=parseInt(oe.slice(1,3),16),Pe=parseInt(oe.slice(3,5),16),Te=parseInt(oe.slice(5,7),16),Ue=oe.length>7&&parseInt(oe.slice(7,9),16)||1;else{if(!oe.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+oe+'" when drawing pattern glyph');We=(de=dr(oe.substring(5,oe.length-1).split(",").map(function(ze){return parseFloat(ze)}),4))[0],Pe=de[1],Te=de[2],Ue=de[3]}for(var Ae=0;Ae<we;Ae++)for(var Me=0;Me<ve;Me++)Ee.data[4*(Ae*ve+Me)]=We,Ee.data[4*(Ae*ve+Me)+1]=Pe,Ee.data[4*(Ae*ve+Me)+2]=Te,Ee.data[4*(Ae*ve+Me)+3]=me[Ae][Me]*(255*Ue);He.putImageData(Ee,0,0),_e=(0,pr.throwIfFalsy)(se.createPattern(Oe,null)),pe.set(oe,_e)}se.fillStyle=_e,se.fillRect(Be,Ie,ke,De)}(W,Ce,le,ge,xe,be),!0;var Re=o.boxDrawingDefinitions[U];if(Re)return function(se,me,Be,Ie,ke,De){var de,pe,oe,_e;se.strokeStyle=se.fillStyle;try{for(var ve=ur(Object.entries(me)),we=ve.next();!we.done;we=ve.next()){var Oe=dr(we.value,2),He=Oe[0],Ee=Oe[1];se.beginPath(),se.lineWidth=window.devicePixelRatio*Number.parseInt(He);var We=void 0;We=typeof Ee=="function"?Ee(.15,.15/De*ke):Ee;try{for(var Pe=(oe=void 0,ur(We.split(" "))),Te=Pe.next();!Te.done;Te=Pe.next()){var Ue=Te.value,Ae=Ue[0],Me=yr[Ae];if(Me){var ze=Ue.substring(1).split(",");ze[0]&&ze[1]&&Me(se,gr(ze,ke,De,Be,Ie))}else console.error('Could not find drawing instructions for "'+Ae+'"')}}catch(fr){oe={error:fr}}finally{try{Te&&!Te.done&&(_e=Pe.return)&&_e.call(Pe)}finally{if(oe)throw oe.error}}se.stroke(),se.closePath()}}catch(fr){de={error:fr}}finally{try{we&&!we.done&&(pe=ve.return)&&pe.call(ve)}finally{if(de)throw de.error}}}(W,Re,le,ge,xe,be),!0;var Ne=o.powerlineDefinitions[U];return!!Ne&&(function(se,me,Be,Ie,ke,De){var de,pe;se.beginPath(),se.lineWidth=window.devicePixelRatio;try{for(var oe=ur(me.d.split(" ")),_e=oe.next();!_e.done;_e=oe.next()){var ve=_e.value,we=ve[0],Oe=yr[we];if(Oe){var He=ve.substring(1).split(",");He[0]&&He[1]&&Oe(se,gr(He,ke,De,Be,Ie,me.horizontalPadding))}else console.error('Could not find drawing instructions for "'+we+'"')}}catch(Ee){de={error:Ee}}finally{try{_e&&!_e.done&&(pe=oe.return)&&pe.call(oe)}finally{if(de)throw de.error}}me.type===1?(se.strokeStyle=se.fillStyle,se.stroke()):se.fill(),se.closePath()}(W,Ne,le,ge,xe,be),!0)};var _r=new Map;function vr(W,U,le){return le===void 0&&(le=0),Math.max(Math.min(W,U),le)}var yr={C:function(W,U){return W.bezierCurveTo(U[0],U[1],U[2],U[3],U[4],U[5])},L:function(W,U){return W.lineTo(U[0],U[1])},M:function(W,U){return W.moveTo(U[0],U[1])}};function gr(W,U,le,ge,xe,be){be===void 0&&(be=0);var ce=W.map(function(Ne){return parseFloat(Ne)||parseInt(Ne)});if(ce.length<2)throw new Error("Too few arguments for instruction");for(var Ce=0;Ce<ce.length;Ce+=2)ce[Ce]*=U-2*be*window.devicePixelRatio,ce[Ce]!==0&&(ce[Ce]=vr(Math.round(ce[Ce]+.5)-.5,U,0)),ce[Ce]+=ge+be*window.devicePixelRatio;for(var Re=1;Re<ce.length;Re+=2)ce[Re]*=le,ce[Re]!==0&&(ce[Re]=vr(Math.round(ce[Re]+.5)-.5,le,0)),ce[Re]+=xe;return ce}},3700:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GridCache=void 0;var y=function(){function l(){this.cache=[]}return l.prototype.resize=function(h,u){for(var d=0;d<h;d++){this.cache.length<=d&&this.cache.push([]);for(var g=this.cache[d].length;g<u;g++)this.cache[d].push(void 0);this.cache[d].length=u}this.cache.length=h},l.prototype.clear=function(){for(var h=0;h<this.cache.length;h++)for(var u=0;u<this.cache[h].length;u++)this.cache[h][u]=void 0},l}();o.GridCache=y},5098:function(M,o,y){var l,h=this&&this.__extends||(l=function(f,i){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},l(f,i)},function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=f}l(f,i),f.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),u=this&&this.__decorate||function(f,i,e,t){var r,n=arguments.length,p=n<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(f,i,e,t);else for(var c=f.length-1;c>=0;c--)(r=f[c])&&(p=(n<3?r(p):n>3?r(i,e,p):r(i,e))||p);return n>3&&p&&Object.defineProperty(i,e,p),p},d=this&&this.__param||function(f,i){return function(e,t){i(e,t,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.LinkRenderLayer=void 0;var g=y(1546),v=y(8803),s=y(2040),a=y(2585),_=function(f){function i(e,t,r,n,p,c,m,C,S){var b=f.call(this,e,"link",t,!0,r,n,m,C,S)||this;return p.onShowLinkUnderline(function(w){return b._onShowLinkUnderline(w)}),p.onHideLinkUnderline(function(w){return b._onHideLinkUnderline(w)}),c.onShowLinkUnderline(function(w){return b._onShowLinkUnderline(w)}),c.onHideLinkUnderline(function(w){return b._onHideLinkUnderline(w)}),b}return h(i,f),i.prototype.resize=function(e){f.prototype.resize.call(this,e),this._state=void 0},i.prototype.reset=function(){this._clearCurrentLink()},i.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},i.prototype._onShowLinkUnderline=function(e){if(e.fg===v.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,s.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},i.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},u([d(6,a.IBufferService),d(7,a.IOptionsService),d(8,a.IDecorationService)],i)}(g.BaseRenderLayer);o.LinkRenderLayer=_},3525:function(M,o,y){var l,h=this&&this.__extends||(l=function(c,m){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,S){C.__proto__=S}||function(C,S){for(var b in S)Object.prototype.hasOwnProperty.call(S,b)&&(C[b]=S[b])},l(c,m)},function(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function C(){this.constructor=c}l(c,m),c.prototype=m===null?Object.create(m):(C.prototype=m.prototype,new C)}),u=this&&this.__decorate||function(c,m,C,S){var b,w=arguments.length,T=w<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,m,C,S);else for(var x=c.length-1;x>=0;x--)(b=c[x])&&(T=(w<3?b(T):w>3?b(m,C,T):b(m,C))||T);return w>3&&T&&Object.defineProperty(m,C,T),T},d=this&&this.__param||function(c,m){return function(C,S){m(C,S,c)}},g=this&&this.__values||function(c){var m=typeof Symbol=="function"&&Symbol.iterator,C=m&&c[m],S=0;if(C)return C.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&S>=c.length&&(c=void 0),{value:c&&c[S++],done:!c}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.Renderer=void 0;var v=y(9596),s=y(4149),a=y(2512),_=y(5098),f=y(844),i=y(4725),e=y(2585),t=y(1420),r=y(8460),n=1,p=function(c){function m(C,S,b,w,T,x,O,E){var L=c.call(this)||this;L._colors=C,L._screenElement=S,L._bufferService=x,L._charSizeService=O,L._optionsService=E,L._id=n++,L._onRequestRedraw=new r.EventEmitter;var A=L._optionsService.rawOptions.allowTransparency;return L._renderLayers=[T.createInstance(v.TextRenderLayer,L._screenElement,0,L._colors,A,L._id),T.createInstance(s.SelectionRenderLayer,L._screenElement,1,L._colors,L._id),T.createInstance(_.LinkRenderLayer,L._screenElement,2,L._colors,L._id,b,w),T.createInstance(a.CursorRenderLayer,L._screenElement,3,L._colors,L._id,L._onRequestRedraw)],L.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},L._devicePixelRatio=window.devicePixelRatio,L._updateDimensions(),L.onOptionsChanged(),L}return h(m,c),Object.defineProperty(m.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),m.prototype.dispose=function(){var C,S;try{for(var b=g(this._renderLayers),w=b.next();!w.done;w=b.next())w.value.dispose()}catch(T){C={error:T}}finally{try{w&&!w.done&&(S=b.return)&&S.call(b)}finally{if(C)throw C.error}}c.prototype.dispose.call(this),(0,t.removeTerminalFromCache)(this._id)},m.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},m.prototype.setColors=function(C){var S,b;this._colors=C;try{for(var w=g(this._renderLayers),T=w.next();!T.done;T=w.next()){var x=T.value;x.setColors(this._colors),x.reset()}}catch(O){S={error:O}}finally{try{T&&!T.done&&(b=w.return)&&b.call(w)}finally{if(S)throw S.error}}},m.prototype.onResize=function(C,S){var b,w;this._updateDimensions();try{for(var T=g(this._renderLayers),x=T.next();!x.done;x=T.next())x.value.resize(this.dimensions)}catch(O){b={error:O}}finally{try{x&&!x.done&&(w=T.return)&&w.call(T)}finally{if(b)throw b.error}}this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},m.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},m.prototype.onBlur=function(){this._runOperation(function(C){return C.onBlur()})},m.prototype.onFocus=function(){this._runOperation(function(C){return C.onFocus()})},m.prototype.onSelectionChanged=function(C,S,b){b===void 0&&(b=!1),this._runOperation(function(w){return w.onSelectionChanged(C,S,b)}),this._colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})},m.prototype.onCursorMove=function(){this._runOperation(function(C){return C.onCursorMove()})},m.prototype.onOptionsChanged=function(){this._runOperation(function(C){return C.onOptionsChanged()})},m.prototype.clear=function(){this._runOperation(function(C){return C.reset()})},m.prototype._runOperation=function(C){var S,b;try{for(var w=g(this._renderLayers),T=w.next();!T.done;T=w.next())C(T.value)}catch(x){S={error:x}}finally{try{T&&!T.done&&(b=w.return)&&b.call(w)}finally{if(S)throw S.error}}},m.prototype.renderRows=function(C,S){var b,w;try{for(var T=g(this._renderLayers),x=T.next();!x.done;x=T.next())x.value.onGridChanged(C,S)}catch(O){b={error:O}}finally{try{x&&!x.done&&(w=T.return)&&w.call(T)}finally{if(b)throw b.error}}},m.prototype.clearTextureAtlas=function(){var C,S;try{for(var b=g(this._renderLayers),w=b.next();!w.done;w=b.next())w.value.clearTextureAtlas()}catch(T){C={error:T}}finally{try{w&&!w.done&&(S=b.return)&&S.call(b)}finally{if(C)throw C.error}}},m.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},u([d(4,e.IInstantiationService),d(5,e.IBufferService),d(6,i.ICharSizeService),d(7,e.IOptionsService)],m)}(f.Disposable);o.Renderer=p},1752:(M,o)=>{function y(l){return 57508<=l&&l<=57558}Object.defineProperty(o,"__esModule",{value:!0}),o.excludeFromContrastRatioDemands=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},o.isPowerlineGlyph=y,o.excludeFromContrastRatioDemands=function(l){return y(l)||function(h){return 9472<=h&&h<=9631}(l)}},4149:function(M,o,y){var l,h=this&&this.__extends||(l=function(a,_){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,i){f.__proto__=i}||function(f,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(f[e]=i[e])},l(a,_)},function(a,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function f(){this.constructor=a}l(a,_),a.prototype=_===null?Object.create(_):(f.prototype=_.prototype,new f)}),u=this&&this.__decorate||function(a,_,f,i){var e,t=arguments.length,r=t<3?_:i===null?i=Object.getOwnPropertyDescriptor(_,f):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,_,f,i);else for(var n=a.length-1;n>=0;n--)(e=a[n])&&(r=(t<3?e(r):t>3?e(_,f,r):e(_,f))||r);return t>3&&r&&Object.defineProperty(_,f,r),r},d=this&&this.__param||function(a,_){return function(f,i){_(f,i,a)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionRenderLayer=void 0;var g=y(1546),v=y(2585),s=function(a){function _(f,i,e,t,r,n,p){var c=a.call(this,f,"selection",i,!0,e,t,r,n,p)||this;return c._clearState(),c}return h(_,a),_.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},_.prototype.resize=function(f){a.prototype.resize.call(this,f),this._clearState()},_.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},_.prototype.onSelectionChanged=function(f,i,e){if(a.prototype.onSelectionChanged.call(this,f,i,e),this._didStateChange(f,i,e,this._bufferService.buffer.ydisp))if(this._clearAll(),f&&i){var t=f[1]-this._bufferService.buffer.ydisp,r=i[1]-this._bufferService.buffer.ydisp,n=Math.max(t,0),p=Math.min(r,this._bufferService.rows-1);if(n>=this._bufferService.rows||p<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var c=f[0],m=i[0]-c,C=p-n+1;this._fillCells(c,n,m,C)}else{c=t===n?f[0]:0;var S=n===r?i[0]:this._bufferService.cols;this._fillCells(c,n,S-c,1);var b=Math.max(p-n-1,0);if(this._fillCells(0,n+1,this._bufferService.cols,b),n!==p){var w=r===p?i[0]:this._bufferService.cols;this._fillCells(0,p,w,1)}}this._state.start=[f[0],f[1]],this._state.end=[i[0],i[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},_.prototype._didStateChange=function(f,i,e,t){return!this._areCoordinatesEqual(f,this._state.start)||!this._areCoordinatesEqual(i,this._state.end)||e!==this._state.columnSelectMode||t!==this._state.ydisp},_.prototype._areCoordinatesEqual=function(f,i){return!(!f||!i)&&f[0]===i[0]&&f[1]===i[1]},u([d(4,v.IBufferService),d(5,v.IOptionsService),d(6,v.IDecorationService)],_)}(g.BaseRenderLayer);o.SelectionRenderLayer=s},9596:function(M,o,y){var l,h=this&&this.__extends||(l=function(n,p){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,m){c.__proto__=m}||function(c,m){for(var C in m)Object.prototype.hasOwnProperty.call(m,C)&&(c[C]=m[C])},l(n,p)},function(n,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function c(){this.constructor=n}l(n,p),n.prototype=p===null?Object.create(p):(c.prototype=p.prototype,new c)}),u=this&&this.__decorate||function(n,p,c,m){var C,S=arguments.length,b=S<3?p:m===null?m=Object.getOwnPropertyDescriptor(p,c):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,p,c,m);else for(var w=n.length-1;w>=0;w--)(C=n[w])&&(b=(S<3?C(b):S>3?C(p,c,b):C(p,c))||b);return S>3&&b&&Object.defineProperty(p,c,b),b},d=this&&this.__param||function(n,p){return function(c,m){p(c,m,n)}},g=this&&this.__values||function(n){var p=typeof Symbol=="function"&&Symbol.iterator,c=p&&n[p],m=0;if(c)return c.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&m>=n.length&&(n=void 0),{value:n&&n[m++],done:!n}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.TextRenderLayer=void 0;var v=y(3700),s=y(1546),a=y(3734),_=y(643),f=y(511),i=y(2585),e=y(4725),t=y(4269),r=function(n){function p(c,m,C,S,b,w,T,x,O){var E=n.call(this,c,"text",m,S,C,b,w,T,O)||this;return E._characterJoinerService=x,E._characterWidth=0,E._characterFont="",E._characterOverlapCache={},E._workCell=new f.CellData,E._state=new v.GridCache,E}return h(p,n),p.prototype.resize=function(c){n.prototype.resize.call(this,c);var m=this._getFont(!1,!1);this._characterWidth===c.scaledCharWidth&&this._characterFont===m||(this._characterWidth=c.scaledCharWidth,this._characterFont=m,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},p.prototype.reset=function(){this._state.clear(),this._clearAll()},p.prototype._forEachCell=function(c,m,C){for(var S=c;S<=m;S++)for(var b=S+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.lines.get(b),T=this._characterJoinerService.getJoinedCharacters(b),x=0;x<this._bufferService.cols;x++){w.loadCell(x,this._workCell);var O=this._workCell,E=!1,L=x;if(O.getWidth()!==0){if(T.length>0&&x===T[0][0]){E=!0;var A=T.shift();O=new t.JoinedCellData(this._workCell,w.translateToString(!0,A[0],A[1]),A[1]-A[0]),L=A[1]-1}!E&&this._isOverlapping(O)&&L<w.length-1&&w.getCodePoint(L+1)===_.NULL_CELL_CODE&&(O.content&=-12582913,O.content|=2<<22),C(O,x,S),x=L}}},p.prototype._drawBackground=function(c,m){var C=this,S=this._ctx,b=this._bufferService.cols,w=0,T=0,x=null;S.save(),this._forEachCell(c,m,function(O,E,L){var A,I,V=null;O.isInverse()?V=O.isFgDefault()?C._colors.foreground.css:O.isFgRGB()?"rgb("+a.AttributeData.toColorRGB(O.getFgColor()).join(",")+")":C._colors.ansi[O.getFgColor()].css:O.isBgRGB()?V="rgb("+a.AttributeData.toColorRGB(O.getBgColor()).join(",")+")":O.isBgPalette()&&(V=C._colors.ansi[O.getBgColor()].css);var G=!1;try{for(var K=g(C._decorationService.getDecorationsAtCell(E,C._bufferService.buffer.ydisp+L)),Y=K.next();!Y.done;Y=K.next()){var X=Y.value;X.options.layer!=="top"&&G||(X.backgroundColorRGB&&(V=X.backgroundColorRGB.css),G=X.options.layer==="top")}}catch(k){A={error:k}}finally{try{Y&&!Y.done&&(I=K.return)&&I.call(K)}finally{if(A)throw A.error}}x===null&&(w=E,T=L),L!==T?(S.fillStyle=x||"",C._fillCells(w,T,b-w,1),w=E,T=L):x!==V&&(S.fillStyle=x||"",C._fillCells(w,T,E-w,1),w=E,T=L),x=V}),x!==null&&(S.fillStyle=x,this._fillCells(w,T,b-w,1)),S.restore()},p.prototype._drawForeground=function(c,m){var C=this;this._forEachCell(c,m,function(S,b,w){if(!S.isInvisible()&&(C._drawChars(S,b,w),S.isUnderline()||S.isStrikethrough())){if(C._ctx.save(),S.isInverse())if(S.isBgDefault())C._ctx.fillStyle=C._colors.background.css;else if(S.isBgRGB())C._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(S.getBgColor()).join(",")+")";else{var T=S.getBgColor();C._optionsService.rawOptions.drawBoldTextInBrightColors&&S.isBold()&&T<8&&(T+=8),C._ctx.fillStyle=C._colors.ansi[T].css}else if(S.isFgDefault())C._ctx.fillStyle=C._colors.foreground.css;else if(S.isFgRGB())C._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(S.getFgColor()).join(",")+")";else{var x=S.getFgColor();C._optionsService.rawOptions.drawBoldTextInBrightColors&&S.isBold()&&x<8&&(x+=8),C._ctx.fillStyle=C._colors.ansi[x].css}S.isStrikethrough()&&C._fillMiddleLineAtCells(b,w,S.getWidth()),S.isUnderline()&&C._fillBottomLineAtCells(b,w,S.getWidth()),C._ctx.restore()}})},p.prototype.onGridChanged=function(c,m){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,c,this._bufferService.cols,m-c+1),this._drawBackground(c,m),this._drawForeground(c,m))},p.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},p.prototype._isOverlapping=function(c){if(c.getWidth()!==1||c.getCode()<256)return!1;var m=c.getChars();if(this._characterOverlapCache.hasOwnProperty(m))return this._characterOverlapCache[m];this._ctx.save(),this._ctx.font=this._characterFont;var C=Math.floor(this._ctx.measureText(m).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[m]=C,C},u([d(5,i.IBufferService),d(6,i.IOptionsService),d(7,e.ICharacterJoinerService),d(8,i.IDecorationService)],p)}(s.BaseRenderLayer);o.TextRenderLayer=r},9616:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseCharAtlas=void 0;var y=function(){function l(){this._didWarmUp=!1}return l.prototype.dispose=function(){},l.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},l.prototype._doWarmUp=function(){},l.prototype.clear=function(){},l.prototype.beginFrame=function(){},l}();o.BaseCharAtlas=y},1420:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.removeTerminalFromCache=o.acquireCharAtlas=void 0;var l=y(2040),h=y(1906),u=[];o.acquireCharAtlas=function(d,g,v,s,a){for(var _=(0,l.generateConfig)(s,a,d,v),f=0;f<u.length;f++){var i=(e=u[f]).ownedBy.indexOf(g);if(i>=0){if((0,l.configEquals)(e.config,_))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),u.splice(f,1)):e.ownedBy.splice(i,1);break}}for(f=0;f<u.length;f++){var e=u[f];if((0,l.configEquals)(e.config,_))return e.ownedBy.push(g),e.atlas}var t={atlas:new h.DynamicCharAtlas(document,_),config:_,ownedBy:[g]};return u.push(t),t.atlas},o.removeTerminalFromCache=function(d){for(var g=0;g<u.length;g++){var v=u[g].ownedBy.indexOf(d);if(v!==-1){u[g].ownedBy.length===1?(u[g].atlas.dispose(),u.splice(g,1)):u[g].ownedBy.splice(v,1);break}}}},2040:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.is256Color=o.configEquals=o.generateConfig=void 0;var l=y(643);o.generateConfig=function(h,u,d,g){var v={foreground:g.foreground,background:g.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:g.ansi.slice()};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:h,scaledCharHeight:u,fontFamily:d.fontFamily,fontSize:d.fontSize,fontWeight:d.fontWeight,fontWeightBold:d.fontWeightBold,allowTransparency:d.allowTransparency,colors:v}},o.configEquals=function(h,u){for(var d=0;d<h.colors.ansi.length;d++)if(h.colors.ansi[d].rgba!==u.colors.ansi[d].rgba)return!1;return h.devicePixelRatio===u.devicePixelRatio&&h.fontFamily===u.fontFamily&&h.fontSize===u.fontSize&&h.fontWeight===u.fontWeight&&h.fontWeightBold===u.fontWeightBold&&h.allowTransparency===u.allowTransparency&&h.scaledCharWidth===u.scaledCharWidth&&h.scaledCharHeight===u.scaledCharHeight&&h.colors.foreground===u.colors.foreground&&h.colors.background===u.colors.background},o.is256Color=function(h){return h<l.DEFAULT_COLOR}},8803:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CHAR_ATLAS_CELL_SPACING=o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;var l=y(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic",o.CHAR_ATLAS_CELL_SPACING=1},1906:function(M,o,y){var l,h=this&&this.__extends||(l=function(c,m){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,S){C.__proto__=S}||function(C,S){for(var b in S)Object.prototype.hasOwnProperty.call(S,b)&&(C[b]=S[b])},l(c,m)},function(c,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function C(){this.constructor=c}l(c,m),c.prototype=m===null?Object.create(m):(C.prototype=m.prototype,new C)});Object.defineProperty(o,"__esModule",{value:!0}),o.NoneCharAtlas=o.DynamicCharAtlas=o.getGlyphCacheKey=void 0;var u=y(8803),d=y(9616),g=y(5680),v=y(7001),s=y(6114),a=y(1752),_=y(8055),f=1024,i=1024,e={css:"rgba(0, 0, 0, 0)",rgba:0};function t(c){return c.code<<21|c.bg<<12|c.fg<<3|(c.bold?0:4)+(c.dim?0:2)+(c.italic?0:1)}o.getGlyphCacheKey=t;var r=function(c){function m(C,S){var b=c.call(this)||this;b._config=S,b._drawToCacheCount=0,b._glyphsWaitingOnBitmap=[],b._bitmapCommitTimeout=null,b._bitmap=null,b._cacheCanvas=C.createElement("canvas"),b._cacheCanvas.width=f,b._cacheCanvas.height=i,b._cacheCtx=(0,a.throwIfFalsy)(b._cacheCanvas.getContext("2d",{alpha:!0}));var w=C.createElement("canvas");w.width=b._config.scaledCharWidth,w.height=b._config.scaledCharHeight,b._tmpCtx=(0,a.throwIfFalsy)(w.getContext("2d",{alpha:b._config.allowTransparency})),b._width=Math.floor(f/b._config.scaledCharWidth),b._height=Math.floor(i/b._config.scaledCharHeight);var T=b._width*b._height;return b._cacheMap=new v.LRUMap(T),b._cacheMap.prealloc(T),b}return h(m,c),m.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},m.prototype.beginFrame=function(){this._drawToCacheCount=0},m.prototype.clear=function(){if(this._cacheMap.size>0){var C=this._width*this._height;this._cacheMap=new v.LRUMap(C),this._cacheMap.prealloc(C)}this._cacheCtx.clearRect(0,0,f,i),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},m.prototype.draw=function(C,S,b,w){if(S.code===32)return!0;if(!this._canCache(S))return!1;var T=t(S),x=this._cacheMap.get(T);if(x!=null)return this._drawFromCache(C,x,b,w),!0;if(this._drawToCacheCount<100){var O;O=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var E=this._drawToCache(S,O);return this._cacheMap.set(T,E),this._drawFromCache(C,E,b,w),!0}return!1},m.prototype._canCache=function(C){return C.code<256},m.prototype._toCoordinateX=function(C){return C%this._width*this._config.scaledCharWidth},m.prototype._toCoordinateY=function(C){return Math.floor(C/this._width)*this._config.scaledCharHeight},m.prototype._drawFromCache=function(C,S,b,w){if(!S.isEmpty){var T=this._toCoordinateX(S.index),x=this._toCoordinateY(S.index);C.drawImage(S.inBitmap?this._bitmap:this._cacheCanvas,T,x,this._config.scaledCharWidth,this._config.scaledCharHeight,b,w,this._config.scaledCharWidth,this._config.scaledCharHeight)}},m.prototype._getColorFromAnsiIndex=function(C){return C<this._config.colors.ansi.length?this._config.colors.ansi[C]:g.DEFAULT_ANSI_COLORS[C]},m.prototype._getBackgroundColor=function(C){return this._config.allowTransparency?e:C.bg===u.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:C.bg<256?this._getColorFromAnsiIndex(C.bg):this._config.colors.background},m.prototype._getForegroundColor=function(C){return C.fg===u.INVERTED_DEFAULT_COLOR?_.color.opaque(this._config.colors.background):C.fg<256?this._getColorFromAnsiIndex(C.fg):this._config.colors.foreground},m.prototype._drawToCache=function(C,S){this._drawToCacheCount++,this._tmpCtx.save();var b=this._getBackgroundColor(C);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=b.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var w=C.bold?this._config.fontWeightBold:this._config.fontWeight,T=C.italic?"italic":"";this._tmpCtx.font=T+" "+w+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=u.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(C).css,C.dim&&(this._tmpCtx.globalAlpha=u.DIM_OPACITY),this._tmpCtx.fillText(C.chars,0,this._config.scaledCharHeight);var x=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),O=!1;if(this._config.allowTransparency||(O=p(x,b)),O&&C.chars==="_"&&!this._config.allowTransparency)for(var E=1;E<=5&&(this._tmpCtx.fillText(C.chars,0,this._config.scaledCharHeight-E),O=p(x=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),b));E++);this._tmpCtx.restore();var L=this._toCoordinateX(S),A=this._toCoordinateY(S);this._cacheCtx.putImageData(x,L,A);var I={index:S,isEmpty:O,inBitmap:!1};return this._addGlyphToBitmap(I),I},m.prototype._addGlyphToBitmap=function(C){var S=this;!("createImageBitmap"in window)||s.isFirefox||s.isSafari||(this._glyphsWaitingOnBitmap.push(C),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return S._generateBitmap()},100)))},m.prototype._generateBitmap=function(){var C=this,S=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(b){C._bitmap=b;for(var w=0;w<S.length;w++)S[w].inBitmap=!0}),this._bitmapCommitTimeout=null},m}(d.BaseCharAtlas);o.DynamicCharAtlas=r;var n=function(c){function m(C,S){return c.call(this)||this}return h(m,c),m.prototype.draw=function(C,S,b,w){return!1},m}(d.BaseCharAtlas);function p(c,m){for(var C=!0,S=m.rgba>>>24,b=m.rgba>>>16&255,w=m.rgba>>>8&255,T=0;T<c.data.length;T+=4)c.data[T]===S&&c.data[T+1]===b&&c.data[T+2]===w?c.data[T+3]=0:C=!1;return C}o.NoneCharAtlas=n},7001:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LRUMap=void 0;var y=function(){function l(h){this.capacity=h,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return l.prototype._unlinkNode=function(h){var u=h.prev,d=h.next;h===this._head&&(this._head=d),h===this._tail&&(this._tail=u),u!==null&&(u.next=d),d!==null&&(d.prev=u)},l.prototype._appendNode=function(h){var u=this._tail;u!==null&&(u.next=h),h.prev=u,h.next=null,this._tail=h,this._head===null&&(this._head=h)},l.prototype.prealloc=function(h){for(var u=this._nodePool,d=0;d<h;d++)u.push({prev:null,next:null,key:null,value:null})},l.prototype.get=function(h){var u=this._map[h];return u!==void 0?(this._unlinkNode(u),this._appendNode(u),u.value):null},l.prototype.peekValue=function(h){var u=this._map[h];return u!==void 0?u.value:null},l.prototype.peek=function(){var h=this._head;return h===null?null:h.value},l.prototype.set=function(h,u){var d=this._map[h];if(d!==void 0)d=this._map[h],this._unlinkNode(d),d.value=u;else if(this.size>=this.capacity)d=this._head,this._unlinkNode(d),delete this._map[d.key],d.key=h,d.value=u,this._map[h]=d;else{var g=this._nodePool;g.length>0?((d=g.pop()).key=h,d.value=u):d={prev:null,next:null,key:h,value:u},this._map[h]=d,this.size++}this._appendNode(d)},l}();o.LRUMap=y},1296:function(M,o,y){var l,h=this&&this.__extends||(l=function(S,b){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,T){w.__proto__=T}||function(w,T){for(var x in T)Object.prototype.hasOwnProperty.call(T,x)&&(w[x]=T[x])},l(S,b)},function(S,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function w(){this.constructor=S}l(S,b),S.prototype=b===null?Object.create(b):(w.prototype=b.prototype,new w)}),u=this&&this.__decorate||function(S,b,w,T){var x,O=arguments.length,E=O<3?b:T===null?T=Object.getOwnPropertyDescriptor(b,w):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(S,b,w,T);else for(var L=S.length-1;L>=0;L--)(x=S[L])&&(E=(O<3?x(E):O>3?x(b,w,E):x(b,w))||E);return O>3&&E&&Object.defineProperty(b,w,E),E},d=this&&this.__param||function(S,b){return function(w,T){b(w,T,S)}},g=this&&this.__values||function(S){var b=typeof Symbol=="function"&&Symbol.iterator,w=b&&S[b],T=0;if(w)return w.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&T>=S.length&&(S=void 0),{value:S&&S[T++],done:!S}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;var v=y(3787),s=y(8803),a=y(844),_=y(4725),f=y(2585),i=y(8460),e=y(8055),t=y(9631),r="xterm-dom-renderer-owner-",n="xterm-fg-",p="xterm-bg-",c="xterm-focus",m=1,C=function(S){function b(w,T,x,O,E,L,A,I,V,G){var K=S.call(this)||this;return K._colors=w,K._element=T,K._screenElement=x,K._viewportElement=O,K._linkifier=E,K._linkifier2=L,K._charSizeService=I,K._optionsService=V,K._bufferService=G,K._terminalClass=m++,K._rowElements=[],K._rowContainer=document.createElement("div"),K._rowContainer.classList.add("xterm-rows"),K._rowContainer.style.lineHeight="normal",K._rowContainer.setAttribute("aria-hidden","true"),K._refreshRowElements(K._bufferService.cols,K._bufferService.rows),K._selectionContainer=document.createElement("div"),K._selectionContainer.classList.add("xterm-selection"),K._selectionContainer.setAttribute("aria-hidden","true"),K.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},K._updateDimensions(),K._injectCss(),K._rowFactory=A.createInstance(v.DomRendererRowFactory,document,K._colors),K._element.classList.add(r+K._terminalClass),K._screenElement.appendChild(K._rowContainer),K._screenElement.appendChild(K._selectionContainer),K.register(K._linkifier.onShowLinkUnderline(function(Y){return K._onLinkHover(Y)})),K.register(K._linkifier.onHideLinkUnderline(function(Y){return K._onLinkLeave(Y)})),K.register(K._linkifier2.onShowLinkUnderline(function(Y){return K._onLinkHover(Y)})),K.register(K._linkifier2.onHideLinkUnderline(function(Y){return K._onLinkLeave(Y)})),K}return h(b,S),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return new i.EventEmitter().event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this._element.classList.remove(r+this._terminalClass),(0,t.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),S.prototype.dispose.call(this)},b.prototype._updateDimensions=function(){var w,T;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;try{for(var x=g(this._rowElements),O=x.next();!O.done;O=x.next()){var E=O.value;E.style.width=this.dimensions.canvasWidth+"px",E.style.height=this.dimensions.actualCellHeight+"px",E.style.lineHeight=this.dimensions.actualCellHeight+"px",E.style.overflow="hidden"}}catch(A){w={error:A}}finally{try{O&&!O.done&&(T=x.return)&&T.call(x)}finally{if(w)throw w.error}}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var L=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=L,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},b.prototype.setColors=function(w){this._colors=w,this._injectCss()},b.prototype._injectCss=function(){var w=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var T=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";T+=this._terminalSelector+" span:not(."+v.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+v.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+v.ITALIC_CLASS+" { font-style: italic;}",T+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",T+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",T+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+v.CURSOR_CLASS+"."+v.CURSOR_BLINK_CLASS+":not(."+v.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+v.CURSOR_CLASS+"."+v.CURSOR_BLINK_CLASS+"."+v.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",T+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionOpaque.css+";}",this._colors.ansi.forEach(function(x,O){T+=w._terminalSelector+" ."+n+O+" { color: "+x.css+"; }"+w._terminalSelector+" ."+p+O+" { background-color: "+x.css+"; }"}),T+=this._terminalSelector+" ."+n+s.INVERTED_DEFAULT_COLOR+" { color: "+e.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+p+s.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=T},b.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},b.prototype._refreshRowElements=function(w,T){for(var x=this._rowElements.length;x<=T;x++){var O=document.createElement("div");this._rowContainer.appendChild(O),this._rowElements.push(O)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())},b.prototype.onResize=function(w,T){this._refreshRowElements(w,T),this._updateDimensions()},b.prototype.onCharSizeChanged=function(){this._updateDimensions()},b.prototype.onBlur=function(){this._rowContainer.classList.remove(c)},b.prototype.onFocus=function(){this._rowContainer.classList.add(c)},b.prototype.onSelectionChanged=function(w,T,x){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.onSelectionChanged(w,T,x),this.renderRows(0,this._bufferService.rows-1),w&&T){var O=w[1]-this._bufferService.buffer.ydisp,E=T[1]-this._bufferService.buffer.ydisp,L=Math.max(O,0),A=Math.min(E,this._bufferService.rows-1);if(!(L>=this._bufferService.rows||A<0)){var I=document.createDocumentFragment();if(x){var V=w[0]>T[0];I.appendChild(this._createSelectionElement(L,V?T[0]:w[0],V?w[0]:T[0],A-L+1))}else{var G=O===L?w[0]:0,K=L===E?T[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(L,G,K));var Y=A-L-1;if(I.appendChild(this._createSelectionElement(L+1,0,this._bufferService.cols,Y)),L!==A){var X=E===A?T[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(A,0,X))}}this._selectionContainer.appendChild(I)}}},b.prototype._createSelectionElement=function(w,T,x,O){O===void 0&&(O=1);var E=document.createElement("div");return E.style.height=O*this.dimensions.actualCellHeight+"px",E.style.top=w*this.dimensions.actualCellHeight+"px",E.style.left=T*this.dimensions.actualCellWidth+"px",E.style.width=this.dimensions.actualCellWidth*(x-T)+"px",E},b.prototype.onCursorMove=function(){},b.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},b.prototype.clear=function(){var w,T;try{for(var x=g(this._rowElements),O=x.next();!O.done;O=x.next())O.value.innerText=""}catch(E){w={error:E}}finally{try{O&&!O.done&&(T=x.return)&&T.call(x)}finally{if(w)throw w.error}}},b.prototype.renderRows=function(w,T){for(var x=this._bufferService.buffer.ybase+this._bufferService.buffer.y,O=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),E=this._optionsService.rawOptions.cursorBlink,L=w;L<=T;L++){var A=this._rowElements[L];A.innerText="";var I=L+this._bufferService.buffer.ydisp,V=this._bufferService.buffer.lines.get(I),G=this._optionsService.rawOptions.cursorStyle;A.appendChild(this._rowFactory.createRow(V,I,I===x,G,O,E,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(b.prototype,"_terminalSelector",{get:function(){return"."+r+this._terminalClass},enumerable:!1,configurable:!0}),b.prototype._onLinkHover=function(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!0)},b.prototype._onLinkLeave=function(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!1)},b.prototype._setCellUnderline=function(w,T,x,O,E,L){for(;w!==T||x!==O;){var A=this._rowElements[x];if(!A)return;var I=A.children[w];I&&(I.style.textDecoration=L?"underline":"none"),++w>=E&&(w=0,x++)}},u([d(6,f.IInstantiationService),d(7,_.ICharSizeService),d(8,f.IOptionsService),d(9,f.IBufferService)],b)}(a.Disposable);o.DomRenderer=C},3787:function(M,o,y){var l=this&&this.__decorate||function(r,n,p,c){var m,C=arguments.length,S=C<3?n:c===null?c=Object.getOwnPropertyDescriptor(n,p):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,n,p,c);else for(var b=r.length-1;b>=0;b--)(m=r[b])&&(S=(C<3?m(S):C>3?m(n,p,S):m(n,p))||S);return C>3&&S&&Object.defineProperty(n,p,S),S},h=this&&this.__param||function(r,n){return function(p,c){n(p,c,r)}},u=this&&this.__values||function(r){var n=typeof Symbol=="function"&&Symbol.iterator,p=n&&r[n],c=0;if(p)return p.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&c>=r.length&&(r=void 0),{value:r&&r[c++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=o.CURSOR_STYLE_UNDERLINE_CLASS=o.CURSOR_STYLE_BAR_CLASS=o.CURSOR_STYLE_BLOCK_CLASS=o.CURSOR_BLINK_CLASS=o.CURSOR_CLASS=o.STRIKETHROUGH_CLASS=o.UNDERLINE_CLASS=o.ITALIC_CLASS=o.DIM_CLASS=o.BOLD_CLASS=void 0;var d=y(8803),g=y(643),v=y(511),s=y(2585),a=y(8055),_=y(4725),f=y(4269),i=y(1752);o.BOLD_CLASS="xterm-bold",o.DIM_CLASS="xterm-dim",o.ITALIC_CLASS="xterm-italic",o.UNDERLINE_CLASS="xterm-underline",o.STRIKETHROUGH_CLASS="xterm-strikethrough",o.CURSOR_CLASS="xterm-cursor",o.CURSOR_BLINK_CLASS="xterm-cursor-blink",o.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",o.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",o.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var e=function(){function r(n,p,c,m,C,S){this._document=n,this._colors=p,this._characterJoinerService=c,this._optionsService=m,this._coreService=C,this._decorationService=S,this._workCell=new v.CellData,this._columnSelectMode=!1}return r.prototype.setColors=function(n){this._colors=n},r.prototype.onSelectionChanged=function(n,p,c){this._selectionStart=n,this._selectionEnd=p,this._columnSelectMode=c},r.prototype.createRow=function(n,p,c,m,C,S,b,w){for(var T,x,O=this._document.createDocumentFragment(),E=this._characterJoinerService.getJoinedCharacters(p),L=0,A=Math.min(n.length,w)-1;A>=0;A--)if(n.loadCell(A,this._workCell).getCode()!==g.NULL_CELL_CODE||c&&A===C){L=A+1;break}for(A=0;A<L;A++){n.loadCell(A,this._workCell);var I=this._workCell.getWidth();if(I!==0){var V=!1,G=A,K=this._workCell;if(E.length>0&&A===E[0][0]){V=!0;var Y=E.shift();K=new f.JoinedCellData(this._workCell,n.translateToString(!0,Y[0],Y[1]),Y[1]-Y[0]),G=Y[1]-1,I=K.getWidth()}var X=this._document.createElement("span");if(I>1&&(X.style.width=b*I+"px"),V&&(X.style.display="inline",C>=A&&C<=G&&(C=A)),!this._coreService.isCursorHidden&&c&&A===C)switch(X.classList.add(o.CURSOR_CLASS),S&&X.classList.add(o.CURSOR_BLINK_CLASS),m){case"bar":X.classList.add(o.CURSOR_STYLE_BAR_CLASS);break;case"underline":X.classList.add(o.CURSOR_STYLE_UNDERLINE_CLASS);break;default:X.classList.add(o.CURSOR_STYLE_BLOCK_CLASS)}K.isBold()&&X.classList.add(o.BOLD_CLASS),K.isItalic()&&X.classList.add(o.ITALIC_CLASS),K.isDim()&&X.classList.add(o.DIM_CLASS),K.isUnderline()&&X.classList.add(o.UNDERLINE_CLASS),K.isInvisible()?X.textContent=g.WHITESPACE_CELL_CHAR:X.textContent=K.getChars()||g.WHITESPACE_CELL_CHAR,K.isStrikethrough()&&X.classList.add(o.STRIKETHROUGH_CLASS);var k=K.getFgColor(),re=K.getFgColorMode(),Q=K.getBgColor(),ne=K.getBgColorMode(),F=!!K.isInverse();if(F){var J=k;k=Q,Q=J;var Z=re;re=ne,ne=Z}var z=void 0,P=void 0,D=!1;try{for(var N=(T=void 0,u(this._decorationService.getDecorationsAtCell(A,p))),ee=N.next();!ee.done;ee=N.next()){var te=ee.value;te.options.layer!=="top"&&D||(te.backgroundColorRGB&&(ne=50331648,Q=te.backgroundColorRGB.rgba>>8&16777215,z=te.backgroundColorRGB),te.foregroundColorRGB&&(re=50331648,k=te.foregroundColorRGB.rgba>>8&16777215,P=te.foregroundColorRGB),D=te.options.layer==="top")}}catch(ue){T={error:ue}}finally{try{ee&&!ee.done&&(x=N.return)&&x.call(N)}finally{if(T)throw T.error}}var ie=this._isCellInSelection(A,p);D||this._colors.selectionForeground&&ie&&(re=50331648,k=this._colors.selectionForeground.rgba>>8&16777215,P=this._colors.selectionForeground),ie&&(z=this._colors.selectionOpaque,D=!0),D&&X.classList.add("xterm-decoration-top");var ae=void 0;switch(ne){case 16777216:case 33554432:ae=this._colors.ansi[Q],X.classList.add("xterm-bg-"+Q);break;case 50331648:ae=a.rgba.toColor(Q>>16,Q>>8&255,255&Q),this._addStyle(X,"background-color:#"+t((Q>>>0).toString(16),"0",6));break;default:F?(ae=this._colors.foreground,X.classList.add("xterm-bg-"+d.INVERTED_DEFAULT_COLOR)):ae=this._colors.background}switch(re){case 16777216:case 33554432:K.isBold()&&k<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(k+=8),this._applyMinimumContrast(X,ae,this._colors.ansi[k],K,z,void 0)||X.classList.add("xterm-fg-"+k);break;case 50331648:var he=a.rgba.toColor(k>>16&255,k>>8&255,255&k);this._applyMinimumContrast(X,ae,he,K,z,P)||this._addStyle(X,"color:#"+t(k.toString(16),"0",6));break;default:this._applyMinimumContrast(X,ae,this._colors.foreground,K,z,void 0)||F&&X.classList.add("xterm-fg-"+d.INVERTED_DEFAULT_COLOR)}O.appendChild(X),A=G}}return O},r.prototype._applyMinimumContrast=function(n,p,c,m,C,S){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,i.excludeFromContrastRatioDemands)(m.getCode()))return!1;var b=void 0;return C||S||(b=this._colors.contrastCache.getColor(p.rgba,c.rgba)),b===void 0&&(b=a.color.ensureContrastRatio(C||p,S||c,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor((C||p).rgba,(S||c).rgba,b??null)),!!b&&(this._addStyle(n,"color:"+b.css),!0)},r.prototype._addStyle=function(n,p){n.setAttribute("style",""+(n.getAttribute("style")||"")+p+";")},r.prototype._isCellInSelection=function(n,p){var c=this._selectionStart,m=this._selectionEnd;return!(!c||!m)&&(this._columnSelectMode?c[0]<=m[0]?n>=c[0]&&p>=c[1]&&n<m[0]&&p<=m[1]:n<c[0]&&p>=c[1]&&n>=m[0]&&p<=m[1]:p>c[1]&&p<m[1]||c[1]===m[1]&&p===c[1]&&n>=c[0]&&n<m[0]||c[1]<m[1]&&p===m[1]&&n<m[0]||c[1]<m[1]&&p===c[1]&&n>=c[0])},l([h(2,_.ICharacterJoinerService),h(3,s.IOptionsService),h(4,s.ICoreService),h(5,s.IDecorationService)],r)}();function t(r,n,p){for(;r.length<p;)r=n+r;return r}o.DomRendererRowFactory=e},456:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0;var y=function(){function l(h){this._bufferService=h,this.isSelectAllActive=!1,this.selectionStartLength=0}return l.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(l.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1]:this.selectionStart?!this.selectionEnd||this.areSelectionValuesReversed()?(h=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?h%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)-1]:[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[h,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?(h=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[Math.max(h,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:void 0;var h},enumerable:!1,configurable:!0}),l.prototype.areSelectionValuesReversed=function(){var h=this.selectionStart,u=this.selectionEnd;return!(!h||!u)&&(h[1]>u[1]||h[1]===u[1]&&h[0]>u[0])},l.prototype.onTrim=function(h){return this.selectionStart&&(this.selectionStart[1]-=h),this.selectionEnd&&(this.selectionEnd[1]-=h),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},l}();o.SelectionModel=y},428:function(M,o,y){var l=this&&this.__decorate||function(s,a,_,f){var i,e=arguments.length,t=e<3?a:f===null?f=Object.getOwnPropertyDescriptor(a,_):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(s,a,_,f);else for(var r=s.length-1;r>=0;r--)(i=s[r])&&(t=(e<3?i(t):e>3?i(a,_,t):i(a,_))||t);return e>3&&t&&Object.defineProperty(a,_,t),t},h=this&&this.__param||function(s,a){return function(_,f){a(_,f,s)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;var u=y(2585),d=y(8460),g=function(){function s(a,_,f){this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=new d.EventEmitter,this._measureStrategy=new v(a,_,this._optionsService)}return Object.defineProperty(s.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),s.prototype.measure=function(){var a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())},l([h(2,u.IOptionsService)],s)}();o.CharSizeService=g;var v=function(){function s(a,_,f){this._document=a,this._parentElement=_,this._optionsService=f,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return s.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var a=this._measureElement.getBoundingClientRect();return a.width!==0&&a.height!==0&&(this._result.width=a.width,this._result.height=Math.ceil(a.height)),this._result},s}()},4269:function(M,o,y){var l,h=this&&this.__extends||(l=function(i,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},l(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}l(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),u=this&&this.__decorate||function(i,e,t,r){var n,p=arguments.length,c=p<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,r);else for(var m=i.length-1;m>=0;m--)(n=i[m])&&(c=(p<3?n(c):p>3?n(e,t,c):n(e,t))||c);return p>3&&c&&Object.defineProperty(e,t,c),c},d=this&&this.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;var g=y(3734),v=y(643),s=y(511),a=y(2585),_=function(i){function e(t,r,n){var p=i.call(this)||this;return p.content=0,p.combinedData="",p.fg=t.fg,p.bg=t.bg,p.combinedData=r,p._width=n,p}return h(e,i),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(t){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(g.AttributeData);o.JoinedCellData=_;var f=function(){function i(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new s.CellData}return i.prototype.register=function(e){var t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id},i.prototype.deregister=function(e){for(var t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1},i.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];for(var r=[],n=t.translateToString(!0),p=0,c=0,m=0,C=t.getFg(0),S=t.getBg(0),b=0;b<t.getTrimmedLength();b++)if(t.loadCell(b,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==C||this._workCell.bg!==S){if(b-p>1)for(var w=this._getJoinedRanges(n,m,c,t,p),T=0;T<w.length;T++)r.push(w[T]);p=b,m=c,C=this._workCell.fg,S=this._workCell.bg}c+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-p>1)for(w=this._getJoinedRanges(n,m,c,t,p),T=0;T<w.length;T++)r.push(w[T]);return r},i.prototype._getJoinedRanges=function(e,t,r,n,p){var c=e.substring(t,r),m=[];try{m=this._characterJoiners[0].handler(c)}catch(w){console.error(w)}for(var C=1;C<this._characterJoiners.length;C++)try{for(var S=this._characterJoiners[C].handler(c),b=0;b<S.length;b++)i._mergeRanges(m,S[b])}catch(w){console.error(w)}return this._stringRangesToCellRanges(m,n,p),m},i.prototype._stringRangesToCellRanges=function(e,t,r){var n=0,p=!1,c=0,m=e[n];if(m){for(var C=r;C<this._bufferService.cols;C++){var S=t.getWidth(C),b=t.getString(C).length||v.WHITESPACE_CELL_CHAR.length;if(S!==0){if(!p&&m[0]<=c&&(m[0]=C,p=!0),m[1]<=c){if(m[1]=C,!(m=e[++n]))break;m[0]<=c?(m[0]=C,p=!0):p=!1}c+=b}}m&&(m[1]=this._bufferService.cols)}},i._mergeRanges=function(e,t){for(var r=!1,n=0;n<e.length;n++){var p=e[n];if(r){if(t[1]<=p[0])return e[n-1][1]=t[1],e;if(t[1]<=p[1])return e[n-1][1]=Math.max(t[1],p[1]),e.splice(n,1),e;e.splice(n,1),n--}else{if(t[1]<=p[0])return e.splice(n,0,t),e;if(t[1]<=p[1])return p[0]=Math.min(t[0],p[0]),e;t[0]<p[1]&&(p[0]=Math.min(t[0],p[0]),r=!0)}}return r?e[e.length-1][1]=t[1]:e.push(t),e},i=u([d(0,a.IBufferService)],i)}();o.CharacterJoinerService=f},5114:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0;var y=function(){function l(h){this._textarea=h}return Object.defineProperty(l.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),l}();o.CoreBrowserService=y},8934:function(M,o,y){var l=this&&this.__decorate||function(v,s,a,_){var f,i=arguments.length,e=i<3?s:_===null?_=Object.getOwnPropertyDescriptor(s,a):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(v,s,a,_);else for(var t=v.length-1;t>=0;t--)(f=v[t])&&(e=(i<3?f(e):i>3?f(s,a,e):f(s,a))||e);return i>3&&e&&Object.defineProperty(s,a,e),e},h=this&&this.__param||function(v,s){return function(a,_){s(a,_,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;var u=y(4725),d=y(9806),g=function(){function v(s,a){this._renderService=s,this._charSizeService=a}return v.prototype.getCoords=function(s,a,_,f,i){return(0,d.getCoords)(window,s,a,_,f,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,i)},v.prototype.getRawByteCoords=function(s,a,_,f){var i=this.getCoords(s,a,_,f);return(0,d.getRawByteCoords)(i)},l([h(0,u.IRenderService),h(1,u.ICharSizeService)],v)}();o.MouseService=g},3230:function(M,o,y){var l,h=this&&this.__extends||(l=function(t,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,p){n.__proto__=p}||function(n,p){for(var c in p)Object.prototype.hasOwnProperty.call(p,c)&&(n[c]=p[c])},l(t,r)},function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}l(t,r),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}),u=this&&this.__decorate||function(t,r,n,p){var c,m=arguments.length,C=m<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,n):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(t,r,n,p);else for(var S=t.length-1;S>=0;S--)(c=t[S])&&(C=(m<3?c(C):m>3?c(r,n,C):c(r,n))||C);return m>3&&C&&Object.defineProperty(r,n,C),C},d=this&&this.__param||function(t,r){return function(n,p){r(n,p,t)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;var g=y(6193),v=y(8460),s=y(844),a=y(5596),_=y(3656),f=y(2585),i=y(4725),e=function(t){function r(n,p,c,m,C,S,b){var w=t.call(this)||this;if(w._renderer=n,w._rowCount=p,w._charSizeService=C,w._isPaused=!1,w._needsFullRefresh=!1,w._isNextRenderRedrawOnly=!0,w._needsSelectionRefresh=!1,w._canvasWidth=0,w._canvasHeight=0,w._selectionState={start:void 0,end:void 0,columnSelectMode:!1},w._onDimensionsChange=new v.EventEmitter,w._onRenderedViewportChange=new v.EventEmitter,w._onRender=new v.EventEmitter,w._onRefreshRequest=new v.EventEmitter,w.register({dispose:function(){return w._renderer.dispose()}}),w._renderDebouncer=new g.RenderDebouncer(function(x,O){return w._renderRows(x,O)}),w.register(w._renderDebouncer),w._screenDprMonitor=new a.ScreenDprMonitor,w._screenDprMonitor.setListener(function(){return w.onDevicePixelRatioChange()}),w.register(w._screenDprMonitor),w.register(b.onResize(function(){return w._fullRefresh()})),w.register(b.buffers.onBufferActivate(function(){var x;return(x=w._renderer)===null||x===void 0?void 0:x.clear()})),w.register(m.onOptionChange(function(){return w._handleOptionsChanged()})),w.register(w._charSizeService.onCharSizeChange(function(){return w.onCharSizeChanged()})),w.register(S.onDecorationRegistered(function(){return w._fullRefresh()})),w.register(S.onDecorationRemoved(function(){return w._fullRefresh()})),w._renderer.onRequestRedraw(function(x){return w.refreshRows(x.start,x.end,!0)}),w.register((0,_.addDisposableDomListener)(window,"resize",function(){return w.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var T=new IntersectionObserver(function(x){return w._onIntersectionChange(x[x.length-1])},{threshold:0});T.observe(c),w.register({dispose:function(){return T.disconnect()}})}return w}return h(r,t),Object.defineProperty(r.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRenderedViewportChange",{get:function(){return this._onRenderedViewportChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),r.prototype._onIntersectionChange=function(n){this._isPaused=n.isIntersecting===void 0?n.intersectionRatio===0:!n.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},r.prototype.refreshRows=function(n,p,c){c===void 0&&(c=!1),this._isPaused?this._needsFullRefresh=!0:(c||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(n,p,this._rowCount))},r.prototype._renderRows=function(n,p){this._renderer.renderRows(n,p),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:n,end:p}),this._onRender.fire({start:n,end:p}),this._isNextRenderRedrawOnly=!0},r.prototype.resize=function(n,p){this._rowCount=p,this._fireOnCanvasResize()},r.prototype._handleOptionsChanged=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},r.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},r.prototype.dispose=function(){t.prototype.dispose.call(this)},r.prototype.setRenderer=function(n){var p=this;this._renderer.dispose(),this._renderer=n,this._renderer.onRequestRedraw(function(c){return p.refreshRows(c.start,c.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},r.prototype.addRefreshCallback=function(n){return this._renderDebouncer.addRefreshCallback(n)},r.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},r.prototype.clearTextureAtlas=function(){var n,p;(p=(n=this._renderer)===null||n===void 0?void 0:n.clearTextureAtlas)===null||p===void 0||p.call(n),this._fullRefresh()},r.prototype.setColors=function(n){this._renderer.setColors(n),this._fullRefresh()},r.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},r.prototype.onResize=function(n,p){this._renderer.onResize(n,p),this._fullRefresh()},r.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},r.prototype.onBlur=function(){this._renderer.onBlur()},r.prototype.onFocus=function(){this._renderer.onFocus()},r.prototype.onSelectionChanged=function(n,p,c){this._selectionState.start=n,this._selectionState.end=p,this._selectionState.columnSelectMode=c,this._renderer.onSelectionChanged(n,p,c)},r.prototype.onCursorMove=function(){this._renderer.onCursorMove()},r.prototype.clear=function(){this._renderer.clear()},u([d(3,f.IOptionsService),d(4,i.ICharSizeService),d(5,f.IDecorationService),d(6,f.IBufferService)],r)}(s.Disposable);o.RenderService=e},9312:function(M,o,y){var l,h=this&&this.__extends||(l=function(m,C){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,b){S.__proto__=b}||function(S,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(S[w]=b[w])},l(m,C)},function(m,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function S(){this.constructor=m}l(m,C),m.prototype=C===null?Object.create(C):(S.prototype=C.prototype,new S)}),u=this&&this.__decorate||function(m,C,S,b){var w,T=arguments.length,x=T<3?C:b===null?b=Object.getOwnPropertyDescriptor(C,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(m,C,S,b);else for(var O=m.length-1;O>=0;O--)(w=m[O])&&(x=(T<3?w(x):T>3?w(C,S,x):w(C,S))||x);return T>3&&x&&Object.defineProperty(C,S,x),x},d=this&&this.__param||function(m,C){return function(S,b){C(S,b,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;var g=y(6114),v=y(456),s=y(511),a=y(8460),_=y(4725),f=y(2585),i=y(9806),e=y(9504),t=y(844),r=y(4841),n=String.fromCharCode(160),p=new RegExp(n,"g"),c=function(m){function C(S,b,w,T,x,O,E,L){var A=m.call(this)||this;return A._element=S,A._screenElement=b,A._linkifier=w,A._bufferService=T,A._coreService=x,A._mouseService=O,A._optionsService=E,A._renderService=L,A._dragScrollAmount=0,A._enabled=!0,A._workCell=new s.CellData,A._mouseDownTimeStamp=0,A._oldHasSelection=!1,A._oldSelectionStart=void 0,A._oldSelectionEnd=void 0,A._onLinuxMouseSelection=A.register(new a.EventEmitter),A._onRedrawRequest=A.register(new a.EventEmitter),A._onSelectionChange=A.register(new a.EventEmitter),A._onRequestScrollLines=A.register(new a.EventEmitter),A._mouseMoveListener=function(I){return A._onMouseMove(I)},A._mouseUpListener=function(I){return A._onMouseUp(I)},A._coreService.onUserInput(function(){A.hasSelection&&A.clearSelection()}),A._trimListener=A._bufferService.buffer.lines.onTrim(function(I){return A._onTrim(I)}),A.register(A._bufferService.buffers.onBufferActivate(function(I){return A._onBufferActivate(I)})),A.enable(),A._model=new v.SelectionModel(A._bufferService),A._activeSelectionMode=0,A}return h(C,m),Object.defineProperty(C.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){this._removeMouseDownListeners()},C.prototype.reset=function(){this.clearSelection()},C.prototype.disable=function(){this.clearSelection(),this._enabled=!1},C.prototype.enable=function(){this._enabled=!0},Object.defineProperty(C.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"hasSelection",{get:function(){var S=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!S||!b||S[0]===b[0]&&S[1]===b[1])},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"selectionText",{get:function(){var S=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!S||!b)return"";var w=this._bufferService.buffer,T=[];if(this._activeSelectionMode===3){if(S[0]===b[0])return"";for(var x=S[0]<b[0]?S[0]:b[0],O=S[0]<b[0]?b[0]:S[0],E=S[1];E<=b[1];E++){var L=w.translateBufferLineToString(E,!0,x,O);T.push(L)}}else{var A=S[1]===b[1]?b[0]:void 0;for(T.push(w.translateBufferLineToString(S[1],!0,S[0],A)),E=S[1]+1;E<=b[1]-1;E++){var I=w.lines.get(E);L=w.translateBufferLineToString(E,!0),I?.isWrapped?T[T.length-1]+=L:T.push(L)}S[1]!==b[1]&&(I=w.lines.get(b[1]),L=w.translateBufferLineToString(b[1],!0,0,b[0]),I&&I.isWrapped?T[T.length-1]+=L:T.push(L))}return T.map(function(V){return V.replace(p," ")}).join(g.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),C.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},C.prototype.refresh=function(S){var b=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return b._refresh()})),g.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},C.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},C.prototype._isClickInSelection=function(S){var b=this._getMouseBufferCoords(S),w=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!!(w&&T&&b)&&this._areCoordsInSelection(b,w,T)},C.prototype.isCellInSelection=function(S,b){var w=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!w||!T)&&this._areCoordsInSelection([S,b],w,T)},C.prototype._areCoordsInSelection=function(S,b,w){return S[1]>b[1]&&S[1]<w[1]||b[1]===w[1]&&S[1]===b[1]&&S[0]>=b[0]&&S[0]<w[0]||b[1]<w[1]&&S[1]===w[1]&&S[0]<w[0]||b[1]<w[1]&&S[1]===b[1]&&S[0]>=b[0]},C.prototype._selectWordAtCursor=function(S,b){var w,T,x=(T=(w=this._linkifier.currentLink)===null||w===void 0?void 0:w.link)===null||T===void 0?void 0:T.range;if(x)return this._model.selectionStart=[x.start.x-1,x.start.y-1],this._model.selectionStartLength=(0,r.getRangeLength)(x,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var O=this._getMouseBufferCoords(S);return!!O&&(this._selectWordAt(O,b),this._model.selectionEnd=void 0,!0)},C.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},C.prototype.selectLines=function(S,b){this._model.clearSelection(),S=Math.max(S,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()},C.prototype._onTrim=function(S){this._model.onTrim(S)&&this.refresh()},C.prototype._getMouseBufferCoords=function(S){var b=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b},C.prototype._getMouseEventScrollAmount=function(S){var b=(0,i.getCoordsRelativeToElement)(window,S,this._screenElement)[1],w=this._renderService.dimensions.canvasHeight;return b>=0&&b<=w?0:(b>w&&(b-=w),b=Math.min(Math.max(b,-50),50),(b/=50)/Math.abs(b)+Math.round(14*b))},C.prototype.shouldForceSelection=function(S){return g.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey},C.prototype.onMouseDown=function(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._onIncrementalClick(S):S.detail===1?this._onSingleClick(S):S.detail===2?this._onDoubleClick(S):S.detail===3&&this._onTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}},C.prototype._addMouseDownListeners=function(){var S=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return S._dragScroll()},50)},C.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},C.prototype._onIncrementalClick=function(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))},C.prototype._onSingleClick=function(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),this._model.selectionStart){this._model.selectionEnd=void 0;var b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},C.prototype._onDoubleClick=function(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)},C.prototype._onTripleClick=function(S){var b=this._getMouseBufferCoords(S);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))},C.prototype.shouldColumnSelect=function(S){return S.altKey&&!(g.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},C.prototype._onMouseMove=function(S){if(S.stopImmediatePropagation(),this._model.selectionStart){var b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var w=this._bufferService.buffer;if(this._model.selectionEnd[1]<w.lines.length){var T=w.lines.get(this._model.selectionEnd[1]);T&&T.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},C.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}},C.prototype._onMouseUp=function(S){var b=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&S.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var w=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(w&&w[0]!==void 0&&w[1]!==void 0){var T=(0,e.moveToCellSequence)(w[0]-1,w[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(T,!0)}}}else this._fireEventIfSelectionChanged()},C.prototype._fireEventIfSelectionChanged=function(){var S=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,w=!(!S||!b||S[0]===b[0]&&S[1]===b[1]);w?S&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,b,w)):this._oldHasSelection&&this._fireOnSelectionChange(S,b,w)},C.prototype._fireOnSelectionChange=function(S,b,w){this._oldSelectionStart=S,this._oldSelectionEnd=b,this._oldHasSelection=w,this._onSelectionChange.fire()},C.prototype._onBufferActivate=function(S){var b=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(function(w){return b._onTrim(w)})},C.prototype._convertViewportColToCharacterIndex=function(S,b){for(var w=b[0],T=0;b[0]>=T;T++){var x=S.loadCell(T,this._workCell).getChars().length;this._workCell.getWidth()===0?w--:x>1&&b[0]!==T&&(w+=x-1)}return w},C.prototype.setSelection=function(S,b,w){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,b],this._model.selectionStartLength=w,this.refresh(),this._fireEventIfSelectionChanged()},C.prototype.rightClickSelect=function(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},C.prototype._getWordAt=function(S,b,w,T){if(w===void 0&&(w=!0),T===void 0&&(T=!0),!(S[0]>=this._bufferService.cols)){var x=this._bufferService.buffer,O=x.lines.get(S[1]);if(O){var E=x.translateBufferLineToString(S[1],!1),L=this._convertViewportColToCharacterIndex(O,S),A=L,I=S[0]-L,V=0,G=0,K=0,Y=0;if(E.charAt(L)===" "){for(;L>0&&E.charAt(L-1)===" ";)L--;for(;A<E.length&&E.charAt(A+1)===" ";)A++}else{var X=S[0],k=S[0];O.getWidth(X)===0&&(V++,X--),O.getWidth(k)===2&&(G++,k++);var re=O.getString(k).length;for(re>1&&(Y+=re-1,A+=re-1);X>0&&L>0&&!this._isCharWordSeparator(O.loadCell(X-1,this._workCell));){O.loadCell(X-1,this._workCell);var Q=this._workCell.getChars().length;this._workCell.getWidth()===0?(V++,X--):Q>1&&(K+=Q-1,L-=Q-1),L--,X--}for(;k<O.length&&A+1<E.length&&!this._isCharWordSeparator(O.loadCell(k+1,this._workCell));){O.loadCell(k+1,this._workCell);var ne=this._workCell.getChars().length;this._workCell.getWidth()===2?(G++,k++):ne>1&&(Y+=ne-1,A+=ne-1),A++,k++}}A++;var F=L+I-V+K,J=Math.min(this._bufferService.cols,A-L+V+G-K-Y);if(b||E.slice(L,A).trim()!==""){if(w&&F===0&&O.getCodePoint(0)!==32){var Z=x.lines.get(S[1]-1);if(Z&&O.isWrapped&&Z.getCodePoint(this._bufferService.cols-1)!==32){var z=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(z){var P=this._bufferService.cols-z.start;F-=P,J+=P}}}if(T&&F+J===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){var D=x.lines.get(S[1]+1);if(D?.isWrapped&&D.getCodePoint(0)!==32){var N=this._getWordAt([0,S[1]+1],!1,!1,!0);N&&(J+=N.length)}}return{start:F,length:J}}}}},C.prototype._selectWordAt=function(S,b){var w=this._getWordAt(S,b);if(w){for(;w.start<0;)w.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[w.start,S[1]],this._model.selectionStartLength=w.length}},C.prototype._selectToWordAt=function(S){var b=this._getWordAt(S,!0);if(b){for(var w=S[1];b.start<0;)b.start+=this._bufferService.cols,w--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,w++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,w]}},C.prototype._isCharWordSeparator=function(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0},C.prototype._selectLineAt=function(S){var b=this._bufferService.buffer.getWrappedRangeForLine(S),w={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,r.getRangeLength)(w,this._bufferService.cols)},u([d(3,f.IBufferService),d(4,f.ICoreService),d(5,_.IMouseService),d(6,f.IOptionsService),d(7,_.IRenderService)],C)}(t.Disposable);o.SelectionService=c},4725:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ICharacterJoinerService=o.ISoundService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;var l=y(8343);o.ICharSizeService=(0,l.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),o.IMouseService=(0,l.createDecorator)("MouseService"),o.IRenderService=(0,l.createDecorator)("RenderService"),o.ISelectionService=(0,l.createDecorator)("SelectionService"),o.ISoundService=(0,l.createDecorator)("SoundService"),o.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService")},357:function(M,o,y){var l=this&&this.__decorate||function(g,v,s,a){var _,f=arguments.length,i=f<3?v:a===null?a=Object.getOwnPropertyDescriptor(v,s):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(g,v,s,a);else for(var e=g.length-1;e>=0;e--)(_=g[e])&&(i=(f<3?_(i):f>3?_(v,s,i):_(v,s))||i);return f>3&&i&&Object.defineProperty(v,s,i),i},h=this&&this.__param||function(g,v){return function(s,a){v(s,a,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SoundService=void 0;var u=y(2585),d=function(){function g(v){this._optionsService=v}return Object.defineProperty(g,"audioContext",{get:function(){if(!g._audioContext){var v=window.AudioContext||window.webkitAudioContext;if(!v)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;g._audioContext=new v}return g._audioContext},enumerable:!1,configurable:!0}),g.prototype.playBellSound=function(){var v=g.audioContext;if(v){var s=v.createBufferSource();v.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(a){s.buffer=a,s.connect(v.destination),s.start(0)})}},g.prototype._base64ToArrayBuffer=function(v){for(var s=window.atob(v),a=s.length,_=new Uint8Array(a),f=0;f<a;f++)_[f]=s.charCodeAt(f);return _.buffer},g.prototype._removeMimeType=function(v){return v.split(",")[1]},g=l([h(0,u.IOptionsService)],g)}();o.SoundService=d},6349:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;var l=y(8460),h=function(){function u(d){this._maxLength=d,this.onDeleteEmitter=new l.EventEmitter,this.onInsertEmitter=new l.EventEmitter,this.onTrimEmitter=new l.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(u.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"maxLength",{get:function(){return this._maxLength},set:function(d){if(this._maxLength!==d){for(var g=new Array(d),v=0;v<Math.min(d,this.length);v++)g[v]=this._array[this._getCyclicIndex(v)];this._array=g,this._maxLength=d,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"length",{get:function(){return this._length},set:function(d){if(d>this._length)for(var g=this._length;g<d;g++)this._array[g]=void 0;this._length=d},enumerable:!1,configurable:!0}),u.prototype.get=function(d){return this._array[this._getCyclicIndex(d)]},u.prototype.set=function(d,g){this._array[this._getCyclicIndex(d)]=g},u.prototype.push=function(d){this._array[this._getCyclicIndex(this._length)]=d,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},u.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(u.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),u.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},u.prototype.splice=function(d,g){for(var v=[],s=2;s<arguments.length;s++)v[s-2]=arguments[s];if(g){for(var a=d;a<this._length-g;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+g)];this._length-=g,this.onDeleteEmitter.fire({index:d,amount:g})}for(a=this._length-1;a>=d;a--)this._array[this._getCyclicIndex(a+v.length)]=this._array[this._getCyclicIndex(a)];for(a=0;a<v.length;a++)this._array[this._getCyclicIndex(d+a)]=v[a];if(v.length&&this.onInsertEmitter.fire({index:d,amount:v.length}),this._length+v.length>this._maxLength){var _=this._length+v.length-this._maxLength;this._startIndex+=_,this._length=this._maxLength,this.onTrimEmitter.fire(_)}else this._length+=v.length},u.prototype.trimStart=function(d){d>this._length&&(d=this._length),this._startIndex+=d,this._length-=d,this.onTrimEmitter.fire(d)},u.prototype.shiftElements=function(d,g,v){if(!(g<=0)){if(d<0||d>=this._length)throw new Error("start argument out of range");if(d+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(var s=g-1;s>=0;s--)this.set(d+s+v,this.get(d+s));var a=d+g+v-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(s=0;s<g;s++)this.set(d+s+v,this.get(d+s))}},u.prototype._getCyclicIndex=function(d){return(this._startIndex+d)%this._maxLength},u}();o.CircularList=h},1439:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function y(l,h){if(h===void 0&&(h=5),typeof l!="object")return l;var u=Array.isArray(l)?[]:{};for(var d in l)u[d]=h<=1?l[d]:l[d]&&y(l[d],h-1);return u}},8055:function(M,o){var y,l,h,u,d=this&&this.__read||function(s,a){var _=typeof Symbol=="function"&&s[Symbol.iterator];if(!_)return s;var f,i,e=_.call(s),t=[];try{for(;(a===void 0||a-- >0)&&!(f=e.next()).done;)t.push(f.value)}catch(r){i={error:r}}finally{try{f&&!f.done&&(_=e.return)&&_.call(e)}finally{if(i)throw i.error}}return t};function g(s){var a=s.toString(16);return a.length<2?"0"+a:a}function v(s,a){return s<a?(a+.05)/(s+.05):(s+.05)/(a+.05)}Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=void 0,function(s){s.toCss=function(a,_,f,i){return i!==void 0?"#"+g(a)+g(_)+g(f)+g(i):"#"+g(a)+g(_)+g(f)},s.toRgba=function(a,_,f,i){return i===void 0&&(i=255),(a<<24|_<<16|f<<8|i)>>>0}}(y=o.channels||(o.channels={})),(l=o.color||(o.color={})).blend=function(s,a){var _=(255&a.rgba)/255;if(_===1)return{css:a.css,rgba:a.rgba};var f=a.rgba>>24&255,i=a.rgba>>16&255,e=a.rgba>>8&255,t=s.rgba>>24&255,r=s.rgba>>16&255,n=s.rgba>>8&255,p=t+Math.round((f-t)*_),c=r+Math.round((i-r)*_),m=n+Math.round((e-n)*_);return{css:y.toCss(p,c,m),rgba:y.toRgba(p,c,m)}},l.isOpaque=function(s){return(255&s.rgba)==255},l.ensureContrastRatio=function(s,a,_){var f=u.ensureContrastRatio(s.rgba,a.rgba,_);if(f)return u.toColor(f>>24&255,f>>16&255,f>>8&255)},l.opaque=function(s){var a=(255|s.rgba)>>>0,_=d(u.toChannels(a),3),f=_[0],i=_[1],e=_[2];return{css:y.toCss(f,i,e),rgba:a}},l.opacity=function(s,a){var _=Math.round(255*a),f=d(u.toChannels(s.rgba),3),i=f[0],e=f[1],t=f[2];return{css:y.toCss(i,e,t,_),rgba:y.toRgba(i,e,t,_)}},l.toColorRGB=function(s){return[s.rgba>>24&255,s.rgba>>16&255,s.rgba>>8&255]},(o.css||(o.css={})).toColor=function(s){if(s.match(/#[0-9a-f]{3,8}/i))switch(s.length){case 4:var a=parseInt(s.slice(1,2).repeat(2),16),_=parseInt(s.slice(2,3).repeat(2),16),f=parseInt(s.slice(3,4).repeat(2),16);return u.toColor(a,_,f);case 5:a=parseInt(s.slice(1,2).repeat(2),16),_=parseInt(s.slice(2,3).repeat(2),16),f=parseInt(s.slice(3,4).repeat(2),16);var i=parseInt(s.slice(4,5).repeat(2),16);return u.toColor(a,_,f,i);case 7:return{css:s,rgba:(parseInt(s.slice(1),16)<<8|255)>>>0};case 9:return{css:s,rgba:parseInt(s.slice(1),16)>>>0}}var e=s.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(e)return a=parseInt(e[1]),_=parseInt(e[2]),f=parseInt(e[3]),i=Math.round(255*(e[5]===void 0?1:parseFloat(e[5]))),u.toColor(a,_,f,i);throw new Error("css.toColor: Unsupported css format")},function(s){function a(_,f,i){var e=_/255,t=f/255,r=i/255;return .2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}s.relativeLuminance=function(_){return a(_>>16&255,_>>8&255,255&_)},s.relativeLuminance2=a}(h=o.rgb||(o.rgb={})),function(s){function a(f,i,e){for(var t=f>>24&255,r=f>>16&255,n=f>>8&255,p=i>>24&255,c=i>>16&255,m=i>>8&255,C=v(h.relativeLuminance2(p,c,m),h.relativeLuminance2(t,r,n));C<e&&(p>0||c>0||m>0);)p-=Math.max(0,Math.ceil(.1*p)),c-=Math.max(0,Math.ceil(.1*c)),m-=Math.max(0,Math.ceil(.1*m)),C=v(h.relativeLuminance2(p,c,m),h.relativeLuminance2(t,r,n));return(p<<24|c<<16|m<<8|255)>>>0}function _(f,i,e){for(var t=f>>24&255,r=f>>16&255,n=f>>8&255,p=i>>24&255,c=i>>16&255,m=i>>8&255,C=v(h.relativeLuminance2(p,c,m),h.relativeLuminance2(t,r,n));C<e&&(p<255||c<255||m<255);)p=Math.min(255,p+Math.ceil(.1*(255-p))),c=Math.min(255,c+Math.ceil(.1*(255-c))),m=Math.min(255,m+Math.ceil(.1*(255-m))),C=v(h.relativeLuminance2(p,c,m),h.relativeLuminance2(t,r,n));return(p<<24|c<<16|m<<8|255)>>>0}s.ensureContrastRatio=function(f,i,e){var t=h.relativeLuminance(f>>8),r=h.relativeLuminance(i>>8);if(v(t,r)<e){if(r<t){var n=a(f,i,e),p=v(t,h.relativeLuminance(n>>8));if(p<e){var c=_(f,f,e);return p>v(t,h.relativeLuminance(c>>8))?n:c}return n}var m=_(f,i,e),C=v(t,h.relativeLuminance(m>>8));return C<e?(c=a(f,f,e),C>v(t,h.relativeLuminance(c>>8))?m:c):m}},s.reduceLuminance=a,s.increaseLuminance=_,s.toChannels=function(f){return[f>>24&255,f>>16&255,f>>8&255,255&f]},s.toColor=function(f,i,e,t){return{css:y.toCss(f,i,e,t),rgba:y.toRgba(f,i,e,t)}}}(u=o.rgba||(o.rgba={})),o.toPaddedHex=g,o.contrastRatio=v},8969:function(M,o,y){var l,h=this&&this.__extends||(l=function(b,w){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,x){T.__proto__=x}||function(T,x){for(var O in x)Object.prototype.hasOwnProperty.call(x,O)&&(T[O]=x[O])},l(b,w)},function(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function T(){this.constructor=b}l(b,w),b.prototype=w===null?Object.create(w):(T.prototype=w.prototype,new T)}),u=this&&this.__values||function(b){var w=typeof Symbol=="function"&&Symbol.iterator,T=w&&b[w],x=0;if(T)return T.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&x>=b.length&&(b=void 0),{value:b&&b[x++],done:!b}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;var d=y(844),g=y(2585),v=y(4348),s=y(7866),a=y(744),_=y(7302),f=y(6975),i=y(8460),e=y(1753),t=y(3730),r=y(1480),n=y(7994),p=y(9282),c=y(5435),m=y(5981),C=!1,S=function(b){function w(T){var x=b.call(this)||this;return x._onBinary=new i.EventEmitter,x._onData=new i.EventEmitter,x._onLineFeed=new i.EventEmitter,x._onResize=new i.EventEmitter,x._onScroll=new i.EventEmitter,x._onWriteParsed=new i.EventEmitter,x._instantiationService=new v.InstantiationService,x.optionsService=new _.OptionsService(T),x._instantiationService.setService(g.IOptionsService,x.optionsService),x._bufferService=x.register(x._instantiationService.createInstance(a.BufferService)),x._instantiationService.setService(g.IBufferService,x._bufferService),x._logService=x._instantiationService.createInstance(s.LogService),x._instantiationService.setService(g.ILogService,x._logService),x.coreService=x.register(x._instantiationService.createInstance(f.CoreService,function(){return x.scrollToBottom()})),x._instantiationService.setService(g.ICoreService,x.coreService),x.coreMouseService=x._instantiationService.createInstance(e.CoreMouseService),x._instantiationService.setService(g.ICoreMouseService,x.coreMouseService),x._dirtyRowService=x._instantiationService.createInstance(t.DirtyRowService),x._instantiationService.setService(g.IDirtyRowService,x._dirtyRowService),x.unicodeService=x._instantiationService.createInstance(r.UnicodeService),x._instantiationService.setService(g.IUnicodeService,x.unicodeService),x._charsetService=x._instantiationService.createInstance(n.CharsetService),x._instantiationService.setService(g.ICharsetService,x._charsetService),x._inputHandler=new c.InputHandler(x._bufferService,x._charsetService,x.coreService,x._dirtyRowService,x._logService,x.optionsService,x.coreMouseService,x.unicodeService),x.register((0,i.forwardEvent)(x._inputHandler.onLineFeed,x._onLineFeed)),x.register(x._inputHandler),x.register((0,i.forwardEvent)(x._bufferService.onResize,x._onResize)),x.register((0,i.forwardEvent)(x.coreService.onData,x._onData)),x.register((0,i.forwardEvent)(x.coreService.onBinary,x._onBinary)),x.register(x.optionsService.onOptionChange(function(O){return x._updateOptions(O)})),x.register(x._bufferService.onScroll(function(O){x._onScroll.fire({position:x._bufferService.buffer.ydisp,source:0}),x._dirtyRowService.markRangeDirty(x._bufferService.buffer.scrollTop,x._bufferService.buffer.scrollBottom)})),x.register(x._inputHandler.onScroll(function(O){x._onScroll.fire({position:x._bufferService.buffer.ydisp,source:0}),x._dirtyRowService.markRangeDirty(x._bufferService.buffer.scrollTop,x._bufferService.buffer.scrollBottom)})),x._writeBuffer=new m.WriteBuffer(function(O,E){return x._inputHandler.parse(O,E)}),x.register((0,i.forwardEvent)(x._writeBuffer.onWriteParsed,x._onWriteParsed)),x}return h(w,b),Object.defineProperty(w.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onScroll",{get:function(){var T=this;return this._onScrollApi||(this._onScrollApi=new i.EventEmitter,this.register(this._onScroll.event(function(x){var O;(O=T._onScrollApi)===null||O===void 0||O.fire(x.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"options",{get:function(){return this.optionsService.options},set:function(T){for(var x in T)this.optionsService.options[x]=T[x]},enumerable:!1,configurable:!0}),w.prototype.dispose=function(){var T;this._isDisposed||(b.prototype.dispose.call(this),(T=this._windowsMode)===null||T===void 0||T.dispose(),this._windowsMode=void 0)},w.prototype.write=function(T,x){this._writeBuffer.write(T,x)},w.prototype.writeSync=function(T,x){this._logService.logLevel<=g.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(T,x)},w.prototype.resize=function(T,x){isNaN(T)||isNaN(x)||(T=Math.max(T,a.MINIMUM_COLS),x=Math.max(x,a.MINIMUM_ROWS),this._bufferService.resize(T,x))},w.prototype.scroll=function(T,x){x===void 0&&(x=!1),this._bufferService.scroll(T,x)},w.prototype.scrollLines=function(T,x,O){this._bufferService.scrollLines(T,x,O)},w.prototype.scrollPages=function(T){this._bufferService.scrollPages(T)},w.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},w.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},w.prototype.scrollToLine=function(T){this._bufferService.scrollToLine(T)},w.prototype.registerEscHandler=function(T,x){return this._inputHandler.registerEscHandler(T,x)},w.prototype.registerDcsHandler=function(T,x){return this._inputHandler.registerDcsHandler(T,x)},w.prototype.registerCsiHandler=function(T,x){return this._inputHandler.registerCsiHandler(T,x)},w.prototype.registerOscHandler=function(T,x){return this._inputHandler.registerOscHandler(T,x)},w.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},w.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},w.prototype._updateOptions=function(T){var x;switch(T){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():((x=this._windowsMode)===null||x===void 0||x.dispose(),this._windowsMode=void 0)}},w.prototype._enableWindowsMode=function(){var T=this;if(!this._windowsMode){var x=[];x.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),x.push(this.registerCsiHandler({final:"H"},function(){return(0,p.updateWindowsModeWrappedState)(T._bufferService),!1})),this._windowsMode={dispose:function(){var O,E;try{for(var L=u(x),A=L.next();!A.done;A=L.next())A.value.dispose()}catch(I){O={error:I}}finally{try{A&&!A.done&&(E=L.return)&&E.call(L)}finally{if(O)throw O.error}}}}}},w}(d.Disposable);o.CoreTerminal=S},8460:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0;var y=function(){function l(){this._listeners=[],this._disposed=!1}return Object.defineProperty(l.prototype,"event",{get:function(){var h=this;return this._event||(this._event=function(u){return h._listeners.push(u),{dispose:function(){if(!h._disposed){for(var d=0;d<h._listeners.length;d++)if(h._listeners[d]===u)return void h._listeners.splice(d,1)}}}}),this._event},enumerable:!1,configurable:!0}),l.prototype.fire=function(h,u){for(var d=[],g=0;g<this._listeners.length;g++)d.push(this._listeners[g]);for(g=0;g<d.length;g++)d[g].call(void 0,h,u)},l.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},l}();o.EventEmitter=y,o.forwardEvent=function(l,h){return l(function(u){return h.fire(u)})}},5435:function(M,o,y){var l,h=this&&this.__extends||(l=function(x,O){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,L){E.__proto__=L}||function(E,L){for(var A in L)Object.prototype.hasOwnProperty.call(L,A)&&(E[A]=L[A])},l(x,O)},function(x,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function E(){this.constructor=x}l(x,O),x.prototype=O===null?Object.create(O):(E.prototype=O.prototype,new E)});Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;var u,d=y(2584),g=y(7116),v=y(2015),s=y(844),a=y(8273),_=y(482),f=y(8437),i=y(8460),e=y(643),t=y(511),r=y(3734),n=y(2585),p=y(6242),c=y(6351),m=y(5941),C={"(":0,")":1,"*":2,"+":3,"-":1,".":2},S=131072;function b(x,O){if(x>24)return O.setWinLines||!1;switch(x){case 1:return!!O.restoreWin;case 2:return!!O.minimizeWin;case 3:return!!O.setWinPosition;case 4:return!!O.setWinSizePixels;case 5:return!!O.raiseWin;case 6:return!!O.lowerWin;case 7:return!!O.refreshWin;case 8:return!!O.setWinSizeChars;case 9:return!!O.maximizeWin;case 10:return!!O.fullscreenWin;case 11:return!!O.getWinState;case 13:return!!O.getWinPosition;case 14:return!!O.getWinSizePixels;case 15:return!!O.getScreenSizePixels;case 16:return!!O.getCellSizePixels;case 18:return!!O.getWinSizeChars;case 19:return!!O.getScreenSizeChars;case 20:return!!O.getIconTitle;case 21:return!!O.getWinTitle;case 22:return!!O.pushTitle;case 23:return!!O.popTitle;case 24:return!!O.setWinLines}return!1}(function(x){x[x.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",x[x.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(u=o.WindowsOptionsReportType||(o.WindowsOptionsReportType={}));var w=function(){function x(O,E,L,A){this._bufferService=O,this._coreService=E,this._logService=L,this._optionsService=A,this._data=new Uint32Array(0)}return x.prototype.hook=function(O){this._data=new Uint32Array(0)},x.prototype.put=function(O,E,L){this._data=(0,a.concat)(this._data,O.subarray(E,L))},x.prototype.unhook=function(O){if(!O)return this._data=new Uint32Array(0),!0;var E=(0,_.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),E){case'"q':this._coreService.triggerDataEvent(d.C0.ESC+'P1$r0"q'+d.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(d.C0.ESC+'P1$r61;1"p'+d.C0.ESC+"\\");break;case"r":var L=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(d.C0.ESC+"P1$r"+L+d.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(d.C0.ESC+"P1$r0m"+d.C0.ESC+"\\");break;case" q":var A={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];A-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(d.C0.ESC+"P1$r"+A+" q"+d.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",E),this._coreService.triggerDataEvent(d.C0.ESC+"P0$r"+d.C0.ESC+"\\")}return!0},x}(),T=function(x){function O(E,L,A,I,V,G,K,Y,X){X===void 0&&(X=new v.EscapeSequenceParser);var k=x.call(this)||this;k._bufferService=E,k._charsetService=L,k._coreService=A,k._dirtyRowService=I,k._logService=V,k._optionsService=G,k._coreMouseService=K,k._unicodeService=Y,k._parser=X,k._parseBuffer=new Uint32Array(4096),k._stringDecoder=new _.StringToUtf32,k._utf8Decoder=new _.Utf8ToUtf32,k._workCell=new t.CellData,k._windowTitle="",k._iconName="",k._windowTitleStack=[],k._iconNameStack=[],k._curAttrData=f.DEFAULT_ATTR_DATA.clone(),k._eraseAttrDataInternal=f.DEFAULT_ATTR_DATA.clone(),k._onRequestBell=new i.EventEmitter,k._onRequestRefreshRows=new i.EventEmitter,k._onRequestReset=new i.EventEmitter,k._onRequestSendFocus=new i.EventEmitter,k._onRequestSyncScrollBar=new i.EventEmitter,k._onRequestWindowsOptionsReport=new i.EventEmitter,k._onA11yChar=new i.EventEmitter,k._onA11yTab=new i.EventEmitter,k._onCursorMove=new i.EventEmitter,k._onLineFeed=new i.EventEmitter,k._onScroll=new i.EventEmitter,k._onTitleChange=new i.EventEmitter,k._onColor=new i.EventEmitter,k._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},k._specialColors=[256,257,258],k.register(k._parser),k._activeBuffer=k._bufferService.buffer,k.register(k._bufferService.buffers.onBufferActivate(function(F){return k._activeBuffer=F.activeBuffer})),k._parser.setCsiHandlerFallback(function(F,J){k._logService.debug("Unknown CSI code: ",{identifier:k._parser.identToString(F),params:J.toArray()})}),k._parser.setEscHandlerFallback(function(F){k._logService.debug("Unknown ESC code: ",{identifier:k._parser.identToString(F)})}),k._parser.setExecuteHandlerFallback(function(F){k._logService.debug("Unknown EXECUTE code: ",{code:F})}),k._parser.setOscHandlerFallback(function(F,J,Z){k._logService.debug("Unknown OSC code: ",{identifier:F,action:J,data:Z})}),k._parser.setDcsHandlerFallback(function(F,J,Z){J==="HOOK"&&(Z=Z.toArray()),k._logService.debug("Unknown DCS code: ",{identifier:k._parser.identToString(F),action:J,payload:Z})}),k._parser.setPrintHandler(function(F,J,Z){return k.print(F,J,Z)}),k._parser.registerCsiHandler({final:"@"},function(F){return k.insertChars(F)}),k._parser.registerCsiHandler({intermediates:" ",final:"@"},function(F){return k.scrollLeft(F)}),k._parser.registerCsiHandler({final:"A"},function(F){return k.cursorUp(F)}),k._parser.registerCsiHandler({intermediates:" ",final:"A"},function(F){return k.scrollRight(F)}),k._parser.registerCsiHandler({final:"B"},function(F){return k.cursorDown(F)}),k._parser.registerCsiHandler({final:"C"},function(F){return k.cursorForward(F)}),k._parser.registerCsiHandler({final:"D"},function(F){return k.cursorBackward(F)}),k._parser.registerCsiHandler({final:"E"},function(F){return k.cursorNextLine(F)}),k._parser.registerCsiHandler({final:"F"},function(F){return k.cursorPrecedingLine(F)}),k._parser.registerCsiHandler({final:"G"},function(F){return k.cursorCharAbsolute(F)}),k._parser.registerCsiHandler({final:"H"},function(F){return k.cursorPosition(F)}),k._parser.registerCsiHandler({final:"I"},function(F){return k.cursorForwardTab(F)}),k._parser.registerCsiHandler({final:"J"},function(F){return k.eraseInDisplay(F)}),k._parser.registerCsiHandler({prefix:"?",final:"J"},function(F){return k.eraseInDisplay(F)}),k._parser.registerCsiHandler({final:"K"},function(F){return k.eraseInLine(F)}),k._parser.registerCsiHandler({prefix:"?",final:"K"},function(F){return k.eraseInLine(F)}),k._parser.registerCsiHandler({final:"L"},function(F){return k.insertLines(F)}),k._parser.registerCsiHandler({final:"M"},function(F){return k.deleteLines(F)}),k._parser.registerCsiHandler({final:"P"},function(F){return k.deleteChars(F)}),k._parser.registerCsiHandler({final:"S"},function(F){return k.scrollUp(F)}),k._parser.registerCsiHandler({final:"T"},function(F){return k.scrollDown(F)}),k._parser.registerCsiHandler({final:"X"},function(F){return k.eraseChars(F)}),k._parser.registerCsiHandler({final:"Z"},function(F){return k.cursorBackwardTab(F)}),k._parser.registerCsiHandler({final:"`"},function(F){return k.charPosAbsolute(F)}),k._parser.registerCsiHandler({final:"a"},function(F){return k.hPositionRelative(F)}),k._parser.registerCsiHandler({final:"b"},function(F){return k.repeatPrecedingCharacter(F)}),k._parser.registerCsiHandler({final:"c"},function(F){return k.sendDeviceAttributesPrimary(F)}),k._parser.registerCsiHandler({prefix:">",final:"c"},function(F){return k.sendDeviceAttributesSecondary(F)}),k._parser.registerCsiHandler({final:"d"},function(F){return k.linePosAbsolute(F)}),k._parser.registerCsiHandler({final:"e"},function(F){return k.vPositionRelative(F)}),k._parser.registerCsiHandler({final:"f"},function(F){return k.hVPosition(F)}),k._parser.registerCsiHandler({final:"g"},function(F){return k.tabClear(F)}),k._parser.registerCsiHandler({final:"h"},function(F){return k.setMode(F)}),k._parser.registerCsiHandler({prefix:"?",final:"h"},function(F){return k.setModePrivate(F)}),k._parser.registerCsiHandler({final:"l"},function(F){return k.resetMode(F)}),k._parser.registerCsiHandler({prefix:"?",final:"l"},function(F){return k.resetModePrivate(F)}),k._parser.registerCsiHandler({final:"m"},function(F){return k.charAttributes(F)}),k._parser.registerCsiHandler({final:"n"},function(F){return k.deviceStatus(F)}),k._parser.registerCsiHandler({prefix:"?",final:"n"},function(F){return k.deviceStatusPrivate(F)}),k._parser.registerCsiHandler({intermediates:"!",final:"p"},function(F){return k.softReset(F)}),k._parser.registerCsiHandler({intermediates:" ",final:"q"},function(F){return k.setCursorStyle(F)}),k._parser.registerCsiHandler({final:"r"},function(F){return k.setScrollRegion(F)}),k._parser.registerCsiHandler({final:"s"},function(F){return k.saveCursor(F)}),k._parser.registerCsiHandler({final:"t"},function(F){return k.windowOptions(F)}),k._parser.registerCsiHandler({final:"u"},function(F){return k.restoreCursor(F)}),k._parser.registerCsiHandler({intermediates:"'",final:"}"},function(F){return k.insertColumns(F)}),k._parser.registerCsiHandler({intermediates:"'",final:"~"},function(F){return k.deleteColumns(F)}),k._parser.setExecuteHandler(d.C0.BEL,function(){return k.bell()}),k._parser.setExecuteHandler(d.C0.LF,function(){return k.lineFeed()}),k._parser.setExecuteHandler(d.C0.VT,function(){return k.lineFeed()}),k._parser.setExecuteHandler(d.C0.FF,function(){return k.lineFeed()}),k._parser.setExecuteHandler(d.C0.CR,function(){return k.carriageReturn()}),k._parser.setExecuteHandler(d.C0.BS,function(){return k.backspace()}),k._parser.setExecuteHandler(d.C0.HT,function(){return k.tab()}),k._parser.setExecuteHandler(d.C0.SO,function(){return k.shiftOut()}),k._parser.setExecuteHandler(d.C0.SI,function(){return k.shiftIn()}),k._parser.setExecuteHandler(d.C1.IND,function(){return k.index()}),k._parser.setExecuteHandler(d.C1.NEL,function(){return k.nextLine()}),k._parser.setExecuteHandler(d.C1.HTS,function(){return k.tabSet()}),k._parser.registerOscHandler(0,new p.OscHandler(function(F){return k.setTitle(F),k.setIconName(F),!0})),k._parser.registerOscHandler(1,new p.OscHandler(function(F){return k.setIconName(F)})),k._parser.registerOscHandler(2,new p.OscHandler(function(F){return k.setTitle(F)})),k._parser.registerOscHandler(4,new p.OscHandler(function(F){return k.setOrReportIndexedColor(F)})),k._parser.registerOscHandler(10,new p.OscHandler(function(F){return k.setOrReportFgColor(F)})),k._parser.registerOscHandler(11,new p.OscHandler(function(F){return k.setOrReportBgColor(F)})),k._parser.registerOscHandler(12,new p.OscHandler(function(F){return k.setOrReportCursorColor(F)})),k._parser.registerOscHandler(104,new p.OscHandler(function(F){return k.restoreIndexedColor(F)})),k._parser.registerOscHandler(110,new p.OscHandler(function(F){return k.restoreFgColor(F)})),k._parser.registerOscHandler(111,new p.OscHandler(function(F){return k.restoreBgColor(F)})),k._parser.registerOscHandler(112,new p.OscHandler(function(F){return k.restoreCursorColor(F)})),k._parser.registerEscHandler({final:"7"},function(){return k.saveCursor()}),k._parser.registerEscHandler({final:"8"},function(){return k.restoreCursor()}),k._parser.registerEscHandler({final:"D"},function(){return k.index()}),k._parser.registerEscHandler({final:"E"},function(){return k.nextLine()}),k._parser.registerEscHandler({final:"H"},function(){return k.tabSet()}),k._parser.registerEscHandler({final:"M"},function(){return k.reverseIndex()}),k._parser.registerEscHandler({final:"="},function(){return k.keypadApplicationMode()}),k._parser.registerEscHandler({final:">"},function(){return k.keypadNumericMode()}),k._parser.registerEscHandler({final:"c"},function(){return k.fullReset()}),k._parser.registerEscHandler({final:"n"},function(){return k.setgLevel(2)}),k._parser.registerEscHandler({final:"o"},function(){return k.setgLevel(3)}),k._parser.registerEscHandler({final:"|"},function(){return k.setgLevel(3)}),k._parser.registerEscHandler({final:"}"},function(){return k.setgLevel(2)}),k._parser.registerEscHandler({final:"~"},function(){return k.setgLevel(1)}),k._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return k.selectDefaultCharset()}),k._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return k.selectDefaultCharset()});var re=function(F){Q._parser.registerEscHandler({intermediates:"(",final:F},function(){return k.selectCharset("("+F)}),Q._parser.registerEscHandler({intermediates:")",final:F},function(){return k.selectCharset(")"+F)}),Q._parser.registerEscHandler({intermediates:"*",final:F},function(){return k.selectCharset("*"+F)}),Q._parser.registerEscHandler({intermediates:"+",final:F},function(){return k.selectCharset("+"+F)}),Q._parser.registerEscHandler({intermediates:"-",final:F},function(){return k.selectCharset("-"+F)}),Q._parser.registerEscHandler({intermediates:".",final:F},function(){return k.selectCharset("."+F)}),Q._parser.registerEscHandler({intermediates:"/",final:F},function(){return k.selectCharset("/"+F)})},Q=this;for(var ne in g.CHARSETS)re(ne);return k._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return k.screenAlignmentPattern()}),k._parser.setErrorHandler(function(F){return k._logService.error("Parsing error: ",F),F}),k._parser.registerDcsHandler({intermediates:"$",final:"q"},new w(k._bufferService,k._coreService,k._logService,k._optionsService)),k}return h(O,x),Object.defineProperty(O.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),O.prototype.dispose=function(){x.prototype.dispose.call(this)},O.prototype._preserveStack=function(E,L,A,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=L,this._parseStack.decodedLength=A,this._parseStack.position=I},O.prototype._logSlowResolvingAsync=function(E){this._logService.logLevel<=n.LogLevelEnum.WARN&&Promise.race([E,new Promise(function(L,A){return setTimeout(function(){return A("#SLOW_TIMEOUT")},5e3)})]).catch(function(L){if(L!=="#SLOW_TIMEOUT")throw L;console.warn("async parser handler taking longer than 5000 ms")})},O.prototype.parse=function(E,L){var A,I=this._activeBuffer.x,V=this._activeBuffer.y,G=0,K=this._parseStack.paused;if(K){if(A=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,L))return this._logSlowResolvingAsync(A),A;I=this._parseStack.cursorStartX,V=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>S&&(G=this._parseStack.position+S)}if(this._logService.logLevel<=n.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?' "'+E+'"':' "'+Array.prototype.map.call(E,function(re){return String.fromCharCode(re)}).join("")+'"'),typeof E=="string"?E.split("").map(function(re){return re.charCodeAt(0)}):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<S&&(this._parseBuffer=new Uint32Array(Math.min(E.length,S))),K||this._dirtyRowService.clearRange(),E.length>S)for(var Y=G;Y<E.length;Y+=S){var X=Y+S<E.length?Y+S:E.length,k=typeof E=="string"?this._stringDecoder.decode(E.substring(Y,X),this._parseBuffer):this._utf8Decoder.decode(E.subarray(Y,X),this._parseBuffer);if(A=this._parser.parse(this._parseBuffer,k))return this._preserveStack(I,V,k,Y),this._logSlowResolvingAsync(A),A}else if(!K&&(k=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer),A=this._parser.parse(this._parseBuffer,k)))return this._preserveStack(I,V,k,0),this._logSlowResolvingAsync(A),A;this._activeBuffer.x===I&&this._activeBuffer.y===V||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},O.prototype.print=function(E,L,A){var I,V,G=this._charsetService.charset,K=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,X=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,re=this._curAttrData,Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&A-L>0&&Q.getWidth(this._activeBuffer.x-1)===2&&Q.setCellFromCodePoint(this._activeBuffer.x-1,0,1,re.fg,re.bg,re.extended);for(var ne=L;ne<A;++ne){if(I=E[ne],V=this._unicodeService.wcwidth(I),I<127&&G){var F=G[String.fromCharCode(I)];F&&(I=F.charCodeAt(0))}if(K&&this._onA11yChar.fire((0,_.stringFromCodePoint)(I)),V||!this._activeBuffer.x){if(this._activeBuffer.x+V-1>=Y){if(X){for(;this._activeBuffer.x<Y;)Q.setCellFromCodePoint(this._activeBuffer.x++,0,1,re.fg,re.bg,re.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Y-1,V===2)continue}if(k&&(Q.insertCells(this._activeBuffer.x,V,this._activeBuffer.getNullCell(re),re),Q.getWidth(Y-1)===2&&Q.setCellFromCodePoint(Y-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,re.fg,re.bg,re.extended)),Q.setCellFromCodePoint(this._activeBuffer.x++,I,V,re.fg,re.bg,re.extended),V>0)for(;--V;)Q.setCellFromCodePoint(this._activeBuffer.x++,0,0,re.fg,re.bg,re.extended)}else Q.getWidth(this._activeBuffer.x-1)?Q.addCodepointToCell(this._activeBuffer.x-1,I):Q.addCodepointToCell(this._activeBuffer.x-2,I)}A-L>0&&(Q.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Y&&A-L>0&&Q.getWidth(this._activeBuffer.x)===0&&!Q.hasContent(this._activeBuffer.x)&&Q.setCellFromCodePoint(this._activeBuffer.x,0,1,re.fg,re.bg,re.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},O.prototype.registerCsiHandler=function(E,L){var A=this;return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,L):this._parser.registerCsiHandler(E,function(I){return!b(I.params[0],A._optionsService.rawOptions.windowOptions)||L(I)})},O.prototype.registerDcsHandler=function(E,L){return this._parser.registerDcsHandler(E,new c.DcsHandler(L))},O.prototype.registerEscHandler=function(E,L){return this._parser.registerEscHandler(E,L)},O.prototype.registerOscHandler=function(E,L){return this._parser.registerOscHandler(E,new p.OscHandler(L))},O.prototype.bell=function(){return this._onRequestBell.fire(),!0},O.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},O.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},O.prototype.backspace=function(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);L.hasWidth(this._activeBuffer.x)&&!L.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},O.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0},O.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},O.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},O.prototype._restrictCursor=function(E){E===void 0&&(E=this._bufferService.cols-1),this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},O.prototype._setCursor=function(E,L){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+L):(this._activeBuffer.x=E,this._activeBuffer.y=L),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},O.prototype._moveCursor=function(E,L){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+L)},O.prototype.cursorUp=function(E){var L=this._activeBuffer.y-this._activeBuffer.scrollTop;return L>=0?this._moveCursor(0,-Math.min(L,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0},O.prototype.cursorDown=function(E){var L=this._activeBuffer.scrollBottom-this._activeBuffer.y;return L>=0?this._moveCursor(0,Math.min(L,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0},O.prototype.cursorForward=function(E){return this._moveCursor(E.params[0]||1,0),!0},O.prototype.cursorBackward=function(E){return this._moveCursor(-(E.params[0]||1),0),!0},O.prototype.cursorNextLine=function(E){return this.cursorDown(E),this._activeBuffer.x=0,!0},O.prototype.cursorPrecedingLine=function(E){return this.cursorUp(E),this._activeBuffer.x=0,!0},O.prototype.cursorCharAbsolute=function(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0},O.prototype.cursorPosition=function(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0},O.prototype.charPosAbsolute=function(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0},O.prototype.hPositionRelative=function(E){return this._moveCursor(E.params[0]||1,0),!0},O.prototype.linePosAbsolute=function(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0},O.prototype.vPositionRelative=function(E){return this._moveCursor(0,E.params[0]||1),!0},O.prototype.hVPosition=function(E){return this.cursorPosition(E),!0},O.prototype.tabClear=function(E){var L=E.params[0];return L===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:L===3&&(this._activeBuffer.tabs={}),!0},O.prototype.cursorForwardTab=function(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var L=E.params[0]||1;L--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},O.prototype.cursorBackwardTab=function(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var L=E.params[0]||1;L--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},O.prototype._eraseInBufferLine=function(E,L,A,I){I===void 0&&(I=!1);var V=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);V.replaceCells(L,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I&&(V.isWrapped=!1)},O.prototype._resetBufferLine=function(E){var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);L.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),L.isWrapped=!1},O.prototype.eraseInDisplay=function(E){var L;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(L=this._activeBuffer.y,this._dirtyRowService.markDirty(L),this._eraseInBufferLine(L++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);L<this._bufferService.rows;L++)this._resetBufferLine(L);this._dirtyRowService.markDirty(L);break;case 1:for(L=this._activeBuffer.y,this._dirtyRowService.markDirty(L),this._eraseInBufferLine(L,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(L+1).isWrapped=!1);L--;)this._resetBufferLine(L);this._dirtyRowService.markDirty(0);break;case 2:for(L=this._bufferService.rows,this._dirtyRowService.markDirty(L-1);L--;)this._resetBufferLine(L);this._dirtyRowService.markDirty(0);break;case 3:var A=this._activeBuffer.lines.length-this._bufferService.rows;A>0&&(this._activeBuffer.lines.trimStart(A),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-A,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-A,0),this._onScroll.fire(0))}return!0},O.prototype.eraseInLine=function(E){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},O.prototype.insertLines=function(E){this._restrictCursor();var L=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var A=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,V=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;L--;)this._activeBuffer.lines.splice(V-1,1),this._activeBuffer.lines.splice(A,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},O.prototype.deleteLines=function(E){this._restrictCursor();var L=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var A,I=this._activeBuffer.ybase+this._activeBuffer.y;for(A=this._bufferService.rows-1-this._activeBuffer.scrollBottom,A=this._bufferService.rows-1+this._activeBuffer.ybase-A;L--;)this._activeBuffer.lines.splice(I,1),this._activeBuffer.lines.splice(A,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},O.prototype.insertChars=function(E){this._restrictCursor();var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},O.prototype.deleteChars=function(E){this._restrictCursor();var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},O.prototype.scrollUp=function(E){for(var L=E.params[0]||1;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.scrollDown=function(E){for(var L=E.params[0]||1;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(f.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.scrollLeft=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=E.params[0]||1,A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);I.deleteCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.scrollRight=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=E.params[0]||1,A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);I.insertCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.insertColumns=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=E.params[0]||1,A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);I.insertCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.deleteColumns=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var L=E.params[0]||1,A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){var I=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);I.deleteCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},O.prototype.eraseChars=function(E){this._restrictCursor();var L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},O.prototype.repeatPrecedingCharacter=function(E){if(!this._parser.precedingCodepoint)return!0;for(var L=E.params[0]||1,A=new Uint32Array(L),I=0;I<L;++I)A[I]=this._parser.precedingCodepoint;return this.print(A,0,A.length),!0},O.prototype.sendDeviceAttributesPrimary=function(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0},O.prototype.sendDeviceAttributesSecondary=function(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0},O.prototype._is=function(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0},O.prototype.setMode=function(E){for(var L=0;L<E.length;L++)E.params[L]===4&&(this._coreService.modes.insertMode=!0);return!0},O.prototype.setModePrivate=function(E){for(var L=0;L<E.length;L++)switch(E.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},O.prototype.resetMode=function(E){for(var L=0;L<E.length;L++)E.params[L]===4&&(this._coreService.modes.insertMode=!1);return!0},O.prototype.resetModePrivate=function(E){for(var L=0;L<E.length;L++)switch(E.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[L]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},O.prototype._updateAttrColor=function(E,L,A,I,V){return L===2?(E|=50331648,E&=-16777216,E|=r.AttributeData.fromColorRGB([A,I,V])):L===5&&(E&=-50331904,E|=33554432|255&A),E},O.prototype._extractColor=function(E,L,A){var I=[0,0,-1,0,0,0],V=0,G=0;do{if(I[G+V]=E.params[L+G],E.hasSubParams(L+G)){var K=E.getSubParams(L+G),Y=0;do I[1]===5&&(V=1),I[G+Y+1+V]=K[Y];while(++Y<K.length&&Y+G+1+V<I.length);break}if(I[1]===5&&G+V>=2||I[1]===2&&G+V>=5)break;I[1]&&(V=1)}while(++G+L<E.length&&G+V<I.length);for(Y=2;Y<I.length;++Y)I[Y]===-1&&(I[Y]=0);switch(I[0]){case 38:A.fg=this._updateAttrColor(A.fg,I[1],I[3],I[4],I[5]);break;case 48:A.bg=this._updateAttrColor(A.bg,I[1],I[3],I[4],I[5]);break;case 58:A.extended=A.extended.clone(),A.extended.underlineColor=this._updateAttrColor(A.extended.underlineColor,I[1],I[3],I[4],I[5])}return G},O.prototype._processUnderline=function(E,L){L.extended=L.extended.clone(),(!~E||E>5)&&(E=1),L.extended.underlineStyle=E,L.fg|=268435456,E===0&&(L.fg&=-268435457),L.updateExtended()},O.prototype.charAttributes=function(E){if(E.length===1&&E.params[0]===0)return this._curAttrData.fg=f.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=f.DEFAULT_ATTR_DATA.bg,!0;for(var L,A=E.length,I=this._curAttrData,V=0;V<A;V++)(L=E.params[V])>=30&&L<=37?(I.fg&=-50331904,I.fg|=16777216|L-30):L>=40&&L<=47?(I.bg&=-50331904,I.bg|=16777216|L-40):L>=90&&L<=97?(I.fg&=-50331904,I.fg|=16777224|L-90):L>=100&&L<=107?(I.bg&=-50331904,I.bg|=16777224|L-100):L===0?(I.fg=f.DEFAULT_ATTR_DATA.fg,I.bg=f.DEFAULT_ATTR_DATA.bg):L===1?I.fg|=134217728:L===3?I.bg|=67108864:L===4?(I.fg|=268435456,this._processUnderline(E.hasSubParams(V)?E.getSubParams(V)[0]:1,I)):L===5?I.fg|=536870912:L===7?I.fg|=67108864:L===8?I.fg|=1073741824:L===9?I.fg|=2147483648:L===2?I.bg|=134217728:L===21?this._processUnderline(2,I):L===22?(I.fg&=-134217729,I.bg&=-134217729):L===23?I.bg&=-67108865:L===24?I.fg&=-268435457:L===25?I.fg&=-536870913:L===27?I.fg&=-67108865:L===28?I.fg&=-1073741825:L===29?I.fg&=2147483647:L===39?(I.fg&=-67108864,I.fg|=16777215&f.DEFAULT_ATTR_DATA.fg):L===49?(I.bg&=-67108864,I.bg|=16777215&f.DEFAULT_ATTR_DATA.bg):L===38||L===48||L===58?V+=this._extractColor(E,V,I):L===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):L===100?(I.fg&=-67108864,I.fg|=16777215&f.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&f.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",L);return!0},O.prototype.deviceStatus=function(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(d.C0.ESC+"[0n");break;case 6:var L=this._activeBuffer.y+1,A=this._activeBuffer.x+1;this._coreService.triggerDataEvent(d.C0.ESC+"["+L+";"+A+"R")}return!0},O.prototype.deviceStatusPrivate=function(E){if(E.params[0]===6){var L=this._activeBuffer.y+1,A=this._activeBuffer.x+1;this._coreService.triggerDataEvent(d.C0.ESC+"[?"+L+";"+A+"R")}return!0},O.prototype.softReset=function(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},O.prototype.setCursorStyle=function(E){var L=E.params[0]||1;switch(L){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var A=L%2==1;return this._optionsService.options.cursorBlink=A,!0},O.prototype.setScrollRegion=function(E){var L,A=E.params[0]||1;return(E.length<2||(L=E.params[1])>this._bufferService.rows||L===0)&&(L=this._bufferService.rows),L>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=L-1,this._setCursor(0,0)),!0},O.prototype.windowOptions=function(E){if(!b(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;var L=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:L!==2&&this._onRequestWindowsOptionsReport.fire(u.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(u.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(d.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:L!==0&&L!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),L!==0&&L!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:L!==0&&L!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),L!==0&&L!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},O.prototype.saveCursor=function(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},O.prototype.restoreCursor=function(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},O.prototype.setTitle=function(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0},O.prototype.setIconName=function(E){return this._iconName=E,!0},O.prototype.setOrReportIndexedColor=function(E){for(var L=[],A=E.split(";");A.length>1;){var I=A.shift(),V=A.shift();if(/^\d+$/.exec(I)){var G=parseInt(I);if(0<=G&&G<256)if(V==="?")L.push({type:0,index:G});else{var K=(0,m.parseColor)(V);K&&L.push({type:1,index:G,color:K})}}}return L.length&&this._onColor.fire(L),!0},O.prototype._setOrReportSpecialColor=function(E,L){for(var A=E.split(";"),I=0;I<A.length&&!(L>=this._specialColors.length);++I,++L)if(A[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[L]}]);else{var V=(0,m.parseColor)(A[I]);V&&this._onColor.fire([{type:1,index:this._specialColors[L],color:V}])}return!0},O.prototype.setOrReportFgColor=function(E){return this._setOrReportSpecialColor(E,0)},O.prototype.setOrReportBgColor=function(E){return this._setOrReportSpecialColor(E,1)},O.prototype.setOrReportCursorColor=function(E){return this._setOrReportSpecialColor(E,2)},O.prototype.restoreIndexedColor=function(E){if(!E)return this._onColor.fire([{type:2}]),!0;for(var L=[],A=E.split(";"),I=0;I<A.length;++I)if(/^\d+$/.exec(A[I])){var V=parseInt(A[I]);0<=V&&V<256&&L.push({type:2,index:V})}return L.length&&this._onColor.fire(L),!0},O.prototype.restoreFgColor=function(E){return this._onColor.fire([{type:2,index:256}]),!0},O.prototype.restoreBgColor=function(E){return this._onColor.fire([{type:2,index:257}]),!0},O.prototype.restoreCursorColor=function(E){return this._onColor.fire([{type:2,index:258}]),!0},O.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},O.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},O.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},O.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0},O.prototype.selectCharset=function(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(C[E[0]],g.CHARSETS[E[1]]||g.DEFAULT_CHARSET),!0)},O.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},O.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},O.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},O.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},O.prototype.reset=function(){this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=f.DEFAULT_ATTR_DATA.clone()},O.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},O.prototype.setgLevel=function(E){return this._charsetService.setgLevel(E),!0},O.prototype.screenAlignmentPattern=function(){var E=new t.CellData;E.content=1<<22|"E".charCodeAt(0),E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(var L=0;L<this._bufferService.rows;++L){var A=this._activeBuffer.ybase+this._activeBuffer.y+L,I=this._activeBuffer.lines.get(A);I&&(I.fill(E),I.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},O}(s.Disposable);o.InputHandler=T},844:function(M,o){var y=this&&this.__values||function(u){var d=typeof Symbol=="function"&&Symbol.iterator,g=d&&u[d],v=0;if(g)return g.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&v>=u.length&&(u=void 0),{value:u&&u[v++],done:!u}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.Disposable=void 0;var l=function(){function u(){this._disposables=[],this._isDisposed=!1}return u.prototype.dispose=function(){var d,g;this._isDisposed=!0;try{for(var v=y(this._disposables),s=v.next();!s.done;s=v.next())s.value.dispose()}catch(a){d={error:a}}finally{try{s&&!s.done&&(g=v.return)&&g.call(v)}finally{if(d)throw d.error}}this._disposables.length=0},u.prototype.register=function(d){return this._disposables.push(d),d},u.prototype.unregister=function(d){var g=this._disposables.indexOf(d);g!==-1&&this._disposables.splice(g,1)},u}();function h(u){var d,g;try{for(var v=y(u),s=v.next();!s.done;s=v.next())s.value.dispose()}catch(a){d={error:a}}finally{try{s&&!s.done&&(g=v.return)&&g.call(v)}finally{if(d)throw d.error}}u.length=0}o.Disposable=l,o.disposeArray=h,o.getDisposeArrayDisposable=function(u){return{dispose:function(){return h(u)}}}},6114:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.isSafari=o.isLegacyEdge=o.isFirefox=void 0;var y=typeof navigator>"u",l=y?"node":navigator.userAgent,h=y?"node":navigator.platform;o.isFirefox=l.includes("Firefox"),o.isLegacyEdge=l.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(l),o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),o.isIpad=h==="iPad",o.isIphone=h==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),o.isLinux=h.indexOf("Linux")>=0},6106:function(M,o){var y=this&&this.__generator||function(h,u){var d,g,v,s,a={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return s={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function _(f){return function(i){return function(e){if(d)throw new TypeError("Generator is already executing.");for(;a;)try{if(d=1,g&&(v=2&e[0]?g.return:e[0]?g.throw||((v=g.return)&&v.call(g),0):g.next)&&!(v=v.call(g,e[1])).done)return v;switch(g=0,v&&(e=[2&e[0],v.value]),e[0]){case 0:case 1:v=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,g=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((v=(v=a.trys).length>0&&v[v.length-1])||e[0]!==6&&e[0]!==2)){a=0;continue}if(e[0]===3&&(!v||e[1]>v[0]&&e[1]<v[3])){a.label=e[1];break}if(e[0]===6&&a.label<v[1]){a.label=v[1],v=e;break}if(v&&a.label<v[2]){a.label=v[2],a.ops.push(e);break}v[2]&&a.ops.pop(),a.trys.pop();continue}e=u.call(h,a)}catch(t){e=[6,t],g=0}finally{d=v=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([f,i])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;var l=function(){function h(u){this._getKey=u,this._array=[]}return h.prototype.clear=function(){this._array.length=0},h.prototype.insert=function(u){if(this._array.length!==0){var d=this._search(this._getKey(u),0,this._array.length-1);this._array.splice(d,0,u)}else this._array.push(u)},h.prototype.delete=function(u){if(this._array.length===0)return!1;var d=this._getKey(u),g=this._search(d,0,this._array.length-1);if(this._getKey(this._array[g])!==d)return!1;do if(this._array[g]===u)return this._array.splice(g,1),!0;while(++g<this._array.length&&this._getKey(this._array[g])===d);return!1},h.prototype.getKeyIterator=function(u){var d;return y(this,function(g){switch(g.label){case 0:if(this._array.length===0)return[2];if((d=this._search(u,0,this._array.length-1))<0||d>=this._array.length)return[2];if(this._getKey(this._array[d])!==u)return[2];g.label=1;case 1:return[4,this._array[d]];case 2:g.sent(),g.label=3;case 3:if(++d<this._array.length&&this._getKey(this._array[d])===u)return[3,1];g.label=4;case 4:return[2]}})},h.prototype.values=function(){return this._array.values()},h.prototype._search=function(u,d,g){if(g<d)return d;var v=Math.floor((d+g)/2);if(this._getKey(this._array[v])>u)return this._search(u,d,v-1);if(this._getKey(this._array[v])<u)return this._search(u,v+1,g);for(;v>0&&this._getKey(this._array[v-1])===u;)v--;return v},h}();o.SortedList=l},8273:(M,o)=>{function y(l,h,u,d){if(u===void 0&&(u=0),d===void 0&&(d=l.length),u>=l.length)return l;u=(l.length+u)%l.length,d=d>=l.length?l.length:(l.length+d)%l.length;for(var g=u;g<d;++g)l[g]=h;return l}Object.defineProperty(o,"__esModule",{value:!0}),o.concat=o.fillFallback=o.fill=void 0,o.fill=function(l,h,u,d){return l.fill?l.fill(h,u,d):y(l,h,u,d)},o.fillFallback=y,o.concat=function(l,h){var u=new l.constructor(l.length+h.length);return u.set(l),u.set(h,l.length),u}},9282:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;var l=y(643);o.updateWindowsModeWrappedState=function(h){var u=h.buffer.lines.get(h.buffer.ybase+h.buffer.y-1),d=u?.get(h.cols-1),g=h.buffer.lines.get(h.buffer.ybase+h.buffer.y);g&&d&&(g.isWrapped=d[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&d[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;var y=function(){function h(){this.fg=0,this.bg=0,this.extended=new l}return h.toColorRGB=function(u){return[u>>>16&255,u>>>8&255,255&u]},h.fromColorRGB=function(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]},h.prototype.clone=function(){var u=new h;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u},h.prototype.isInverse=function(){return 67108864&this.fg},h.prototype.isBold=function(){return 134217728&this.fg},h.prototype.isUnderline=function(){return 268435456&this.fg},h.prototype.isBlink=function(){return 536870912&this.fg},h.prototype.isInvisible=function(){return 1073741824&this.fg},h.prototype.isItalic=function(){return 67108864&this.bg},h.prototype.isDim=function(){return 134217728&this.bg},h.prototype.isStrikethrough=function(){return 2147483648&this.fg},h.prototype.getFgColorMode=function(){return 50331648&this.fg},h.prototype.getBgColorMode=function(){return 50331648&this.bg},h.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},h.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},h.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},h.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},h.prototype.isFgDefault=function(){return(50331648&this.fg)==0},h.prototype.isBgDefault=function(){return(50331648&this.bg)==0},h.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},h.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},h.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},h.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},h.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},h.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},h.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},h.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},h.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},h.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},h.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},h}();o.AttributeData=y;var l=function(){function h(u,d){u===void 0&&(u=0),d===void 0&&(d=-1),this.underlineStyle=u,this.underlineColor=d}return h.prototype.clone=function(){return new h(this.underlineStyle,this.underlineColor)},h.prototype.isEmpty=function(){return this.underlineStyle===0},h}();o.ExtendedAttrs=l},9092:function(M,o,y){var l=this&&this.__read||function(t,r){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var p,c,m=n.call(t),C=[];try{for(;(r===void 0||r-- >0)&&!(p=m.next()).done;)C.push(p.value)}catch(S){c={error:S}}finally{try{p&&!p.done&&(n=m.return)&&n.call(m)}finally{if(c)throw c.error}}return C},h=this&&this.__spreadArray||function(t,r,n){if(n||arguments.length===2)for(var p,c=0,m=r.length;c<m;c++)!p&&c in r||(p||(p=Array.prototype.slice.call(r,0,c)),p[c]=r[c]);return t.concat(p||Array.prototype.slice.call(r))};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferStringIterator=o.Buffer=o.MAX_BUFFER_SIZE=void 0;var u=y(6349),d=y(8437),g=y(511),v=y(643),s=y(4634),a=y(4863),_=y(7116),f=y(3734);o.MAX_BUFFER_SIZE=4294967295;var i=function(){function t(r,n,p){this._hasScrollback=r,this._optionsService=n,this._bufferService=p,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=d.DEFAULT_ATTR_DATA.clone(),this.savedCharset=_.DEFAULT_CHARSET,this.markers=[],this._nullCell=g.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=g.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return t.prototype.getNullCell=function(r){return r?(this._nullCell.fg=r.fg,this._nullCell.bg=r.bg,this._nullCell.extended=r.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell},t.prototype.getWhitespaceCell=function(r){return r?(this._whitespaceCell.fg=r.fg,this._whitespaceCell.bg=r.bg,this._whitespaceCell.extended=r.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell},t.prototype.getBlankLine=function(r,n){return new d.BufferLine(this._bufferService.cols,this.getNullCell(r),n)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var r=this.ybase+this.y-this.ydisp;return r>=0&&r<this._rows},enumerable:!1,configurable:!0}),t.prototype._getCorrectBufferLength=function(r){if(!this._hasScrollback)return r;var n=r+this._optionsService.rawOptions.scrollback;return n>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:n},t.prototype.fillViewportRows=function(r){if(this.lines.length===0){r===void 0&&(r=d.DEFAULT_ATTR_DATA);for(var n=this._rows;n--;)this.lines.push(this.getBlankLine(r))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},t.prototype.resize=function(r,n){var p=this.getNullCell(d.DEFAULT_ATTR_DATA),c=this._getCorrectBufferLength(n);if(c>this.lines.maxLength&&(this.lines.maxLength=c),this.lines.length>0){if(this._cols<r)for(var m=0;m<this.lines.length;m++)this.lines.get(m).resize(r,p);var C=0;if(this._rows<n)for(var S=this._rows;S<n;S++)this.lines.length<n+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new d.BufferLine(r,p)):this.ybase>0&&this.lines.length<=this.ybase+this.y+C+1?(this.ybase--,C++,this.ydisp>0&&this.ydisp--):this.lines.push(new d.BufferLine(r,p)));else for(S=this._rows;S>n;S--)this.lines.length>n+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(c<this.lines.maxLength){var b=this.lines.length-c;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=c}this.x=Math.min(this.x,r-1),this.y=Math.min(this.y,n-1),C&&(this.y+=C),this.savedX=Math.min(this.savedX,r-1),this.scrollTop=0}if(this.scrollBottom=n-1,this._isReflowEnabled&&(this._reflow(r,n),this._cols>r))for(m=0;m<this.lines.length;m++)this.lines.get(m).resize(r,p);this._cols=r,this._rows=n},Object.defineProperty(t.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),t.prototype._reflow=function(r,n){this._cols!==r&&(r>this._cols?this._reflowLarger(r,n):this._reflowSmaller(r,n))},t.prototype._reflowLarger=function(r,n){var p=(0,s.reflowLargerGetLinesToRemove)(this.lines,this._cols,r,this.ybase+this.y,this.getNullCell(d.DEFAULT_ATTR_DATA));if(p.length>0){var c=(0,s.reflowLargerCreateNewLayout)(this.lines,p);(0,s.reflowLargerApplyNewLayout)(this.lines,c.layout),this._reflowLargerAdjustViewport(r,n,c.countRemoved)}},t.prototype._reflowLargerAdjustViewport=function(r,n,p){for(var c=this.getNullCell(d.DEFAULT_ATTR_DATA),m=p;m-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<n&&this.lines.push(new d.BufferLine(r,c))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-p,0)},t.prototype._reflowSmaller=function(r,n){for(var p=this.getNullCell(d.DEFAULT_ATTR_DATA),c=[],m=0,C=this.lines.length-1;C>=0;C--){var S=this.lines.get(C);if(!(!S||!S.isWrapped&&S.getTrimmedLength()<=r)){for(var b=[S];S.isWrapped&&C>0;)S=this.lines.get(--C),b.unshift(S);var w=this.ybase+this.y;if(!(w>=C&&w<C+b.length)){var T,x=b[b.length-1].getTrimmedLength(),O=(0,s.reflowSmallerGetNewLineLengths)(b,this._cols,r),E=O.length-b.length;T=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+E):Math.max(0,this.lines.length-this.lines.maxLength+E);for(var L=[],A=0;A<E;A++){var I=this.getBlankLine(d.DEFAULT_ATTR_DATA,!0);L.push(I)}L.length>0&&(c.push({start:C+b.length+m,newLines:L}),m+=L.length),b.push.apply(b,h([],l(L),!1));var V=O.length-1,G=O[V];G===0&&(G=O[--V]);for(var K=b.length-E-1,Y=x;K>=0;){var X=Math.min(Y,G);if(b[V]===void 0)break;if(b[V].copyCellsFrom(b[K],Y-X,G-X,X,!0),(G-=X)==0&&(G=O[--V]),(Y-=X)==0){K--;var k=Math.max(K,0);Y=(0,s.getWrappedLineTrimmedLength)(b,k,this._cols)}}for(A=0;A<b.length;A++)O[A]<r&&b[A].setCell(O[A],p);for(var re=E-T;re-- >0;)this.ybase===0?this.y<n-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+m)-n&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+E,this.ybase+n-1)}}}if(c.length>0){var Q=[],ne=[];for(A=0;A<this.lines.length;A++)ne.push(this.lines.get(A));var F=this.lines.length,J=F-1,Z=0,z=c[Z];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+m);var P=0;for(A=Math.min(this.lines.maxLength-1,F+m-1);A>=0;A--)if(z&&z.start>J+P){for(var D=z.newLines.length-1;D>=0;D--)this.lines.set(A--,z.newLines[D]);A++,Q.push({index:J+1,amount:z.newLines.length}),P+=z.newLines.length,z=c[++Z]}else this.lines.set(A,ne[J--]);var N=0;for(A=Q.length-1;A>=0;A--)Q[A].index+=N,this.lines.onInsertEmitter.fire(Q[A]),N+=Q[A].amount;var ee=Math.max(0,F+m-this.lines.maxLength);ee>0&&this.lines.onTrimEmitter.fire(ee)}},t.prototype.stringIndexToBufferIndex=function(r,n,p){for(p===void 0&&(p=!1);n;){var c=this.lines.get(r);if(!c)return[-1,-1];for(var m=p?c.getTrimmedLength():c.length,C=0;C<m;++C)if(c.get(C)[v.CHAR_DATA_WIDTH_INDEX]&&(n-=c.get(C)[v.CHAR_DATA_CHAR_INDEX].length||1),n<0)return[r,C];r++}return[r,0]},t.prototype.translateBufferLineToString=function(r,n,p,c){p===void 0&&(p=0);var m=this.lines.get(r);return m?m.translateToString(n,p,c):""},t.prototype.getWrappedRangeForLine=function(r){for(var n=r,p=r;n>0&&this.lines.get(n).isWrapped;)n--;for(;p+1<this.lines.length&&this.lines.get(p+1).isWrapped;)p++;return{first:n,last:p}},t.prototype.setupTabStops=function(r){for(r!=null?this.tabs[r]||(r=this.prevStop(r)):(this.tabs={},r=0);r<this._cols;r+=this._optionsService.rawOptions.tabStopWidth)this.tabs[r]=!0},t.prototype.prevStop=function(r){for(r==null&&(r=this.x);!this.tabs[--r]&&r>0;);return r>=this._cols?this._cols-1:r<0?0:r},t.prototype.nextStop=function(r){for(r==null&&(r=this.x);!this.tabs[++r]&&r<this._cols;);return r>=this._cols?this._cols-1:r<0?0:r},t.prototype.clearMarkers=function(r){this._isClearing=!0;for(var n=0;n<this.markers.length;n++)this.markers[n].line===r&&(this.markers[n].dispose(),this.markers.splice(n--,1));this._isClearing=!1},t.prototype.clearAllMarkers=function(){this._isClearing=!0;for(var r=0;r<this.markers.length;r++)this.markers[r].dispose(),this.markers.splice(r--,1);this._isClearing=!1},t.prototype.addMarker=function(r){var n=this,p=new a.Marker(r);return this.markers.push(p),p.register(this.lines.onTrim(function(c){p.line-=c,p.line<0&&p.dispose()})),p.register(this.lines.onInsert(function(c){p.line>=c.index&&(p.line+=c.amount)})),p.register(this.lines.onDelete(function(c){p.line>=c.index&&p.line<c.index+c.amount&&p.dispose(),p.line>c.index&&(p.line-=c.amount)})),p.register(p.onDispose(function(){return n._removeMarker(p)})),p},t.prototype._removeMarker=function(r){this._isClearing||this.markers.splice(this.markers.indexOf(r),1)},t.prototype.iterator=function(r,n,p,c,m){return new e(this,r,n,p,c,m)},t}();o.Buffer=i;var e=function(){function t(r,n,p,c,m,C){p===void 0&&(p=0),c===void 0&&(c=r.lines.length),m===void 0&&(m=0),C===void 0&&(C=0),this._buffer=r,this._trimRight=n,this._startIndex=p,this._endIndex=c,this._startOverscan=m,this._endOverscan=C,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var r=this._buffer.getWrappedRangeForLine(this._current);r.first<this._startIndex-this._startOverscan&&(r.first=this._startIndex-this._startOverscan),r.last>this._endIndex+this._endOverscan&&(r.last=this._endIndex+this._endOverscan),r.first=Math.max(r.first,0),r.last=Math.min(r.last,this._buffer.lines.length);for(var n="",p=r.first;p<=r.last;++p)n+=this._buffer.translateBufferLineToString(p,this._trimRight);return this._current=r.last+1,{range:r,content:n}},t}();o.BufferStringIterator=e},8437:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;var l=y(482),h=y(643),u=y(511),d=y(3734);o.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);var g=function(){function v(s,a,_){_===void 0&&(_=!1),this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*s);for(var f=a||u.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]),i=0;i<s;++i)this.setCell(i,f);this.length=s}return v.prototype.get=function(s){var a=this._data[3*s+0],_=2097151&a;return[this._data[3*s+1],2097152&a?this._combined[s]:_?(0,l.stringFromCodePoint)(_):"",a>>22,2097152&a?this._combined[s].charCodeAt(this._combined[s].length-1):_]},v.prototype.set=function(s,a){this._data[3*s+1]=a[h.CHAR_DATA_ATTR_INDEX],a[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[s]=a[1],this._data[3*s+0]=2097152|s|a[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*s+0]=a[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[h.CHAR_DATA_WIDTH_INDEX]<<22},v.prototype.getWidth=function(s){return this._data[3*s+0]>>22},v.prototype.hasWidth=function(s){return 12582912&this._data[3*s+0]},v.prototype.getFg=function(s){return this._data[3*s+1]},v.prototype.getBg=function(s){return this._data[3*s+2]},v.prototype.hasContent=function(s){return 4194303&this._data[3*s+0]},v.prototype.getCodePoint=function(s){var a=this._data[3*s+0];return 2097152&a?this._combined[s].charCodeAt(this._combined[s].length-1):2097151&a},v.prototype.isCombined=function(s){return 2097152&this._data[3*s+0]},v.prototype.getString=function(s){var a=this._data[3*s+0];return 2097152&a?this._combined[s]:2097151&a?(0,l.stringFromCodePoint)(2097151&a):""},v.prototype.loadCell=function(s,a){var _=3*s;return a.content=this._data[_+0],a.fg=this._data[_+1],a.bg=this._data[_+2],2097152&a.content&&(a.combinedData=this._combined[s]),268435456&a.bg&&(a.extended=this._extendedAttrs[s]),a},v.prototype.setCell=function(s,a){2097152&a.content&&(this._combined[s]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[s]=a.extended),this._data[3*s+0]=a.content,this._data[3*s+1]=a.fg,this._data[3*s+2]=a.bg},v.prototype.setCellFromCodePoint=function(s,a,_,f,i,e){268435456&i&&(this._extendedAttrs[s]=e),this._data[3*s+0]=a|_<<22,this._data[3*s+1]=f,this._data[3*s+2]=i},v.prototype.addCodepointToCell=function(s,a){var _=this._data[3*s+0];2097152&_?this._combined[s]+=(0,l.stringFromCodePoint)(a):(2097151&_?(this._combined[s]=(0,l.stringFromCodePoint)(2097151&_)+(0,l.stringFromCodePoint)(a),_&=-2097152,_|=2097152):_=a|1<<22,this._data[3*s+0]=_)},v.prototype.insertCells=function(s,a,_,f){if((s%=this.length)&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new d.ExtendedAttrs),a<this.length-s){for(var i=new u.CellData,e=this.length-s-a-1;e>=0;--e)this.setCell(s+a+e,this.loadCell(s+e,i));for(e=0;e<a;++e)this.setCell(s+e,_)}else for(e=s;e<this.length;++e)this.setCell(e,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new d.ExtendedAttrs)},v.prototype.deleteCells=function(s,a,_,f){if(s%=this.length,a<this.length-s){for(var i=new u.CellData,e=0;e<this.length-s-a;++e)this.setCell(s+e,this.loadCell(s+a+e,i));for(e=this.length-a;e<this.length;++e)this.setCell(e,_)}else for(e=s;e<this.length;++e)this.setCell(e,_);s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new d.ExtendedAttrs),this.getWidth(s)!==0||this.hasContent(s)||this.setCellFromCodePoint(s,0,1,f?.fg||0,f?.bg||0,f?.extended||new d.ExtendedAttrs)},v.prototype.replaceCells=function(s,a,_,f){for(s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new d.ExtendedAttrs),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a,0,1,f?.fg||0,f?.bg||0,f?.extended||new d.ExtendedAttrs);s<a&&s<this.length;)this.setCell(s++,_)},v.prototype.resize=function(s,a){if(s!==this.length){if(s>this.length){var _=new Uint32Array(3*s);this.length&&(3*s<this._data.length?_.set(this._data.subarray(0,3*s)):_.set(this._data)),this._data=_;for(var f=this.length;f<s;++f)this.setCell(f,a)}else if(s){(_=new Uint32Array(3*s)).set(this._data.subarray(0,3*s)),this._data=_;var i=Object.keys(this._combined);for(f=0;f<i.length;f++){var e=parseInt(i[f],10);e>=s&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=s}},v.prototype.fill=function(s){this._combined={},this._extendedAttrs={};for(var a=0;a<this.length;++a)this.setCell(a,s)},v.prototype.copyFrom=function(s){for(var a in this.length!==s.length?this._data=new Uint32Array(s._data):this._data.set(s._data),this.length=s.length,this._combined={},s._combined)this._combined[a]=s._combined[a];for(var a in this._extendedAttrs={},s._extendedAttrs)this._extendedAttrs[a]=s._extendedAttrs[a];this.isWrapped=s.isWrapped},v.prototype.clone=function(){var s=new v(0);for(var a in s._data=new Uint32Array(this._data),s.length=this.length,this._combined)s._combined[a]=this._combined[a];for(var a in this._extendedAttrs)s._extendedAttrs[a]=this._extendedAttrs[a];return s.isWrapped=this.isWrapped,s},v.prototype.getTrimmedLength=function(){for(var s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0])return s+(this._data[3*s+0]>>22);return 0},v.prototype.copyCellsFrom=function(s,a,_,f,i){var e=s._data;if(i)for(var t=f-1;t>=0;t--)for(var r=0;r<3;r++)this._data[3*(_+t)+r]=e[3*(a+t)+r];else for(t=0;t<f;t++)for(r=0;r<3;r++)this._data[3*(_+t)+r]=e[3*(a+t)+r];var n=Object.keys(s._combined);for(r=0;r<n.length;r++){var p=parseInt(n[r],10);p>=a&&(this._combined[p-a+_]=s._combined[p])}},v.prototype.translateToString=function(s,a,_){s===void 0&&(s=!1),a===void 0&&(a=0),_===void 0&&(_=this.length),s&&(_=Math.min(_,this.getTrimmedLength()));for(var f="";a<_;){var i=this._data[3*a+0],e=2097151&i;f+=2097152&i?this._combined[a]:e?(0,l.stringFromCodePoint)(e):h.WHITESPACE_CELL_CHAR,a+=i>>22||1}return f},v}();o.BufferLine=g},4841:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(y,l){if(y.start.y>y.end.y)throw new Error("Buffer range end ("+y.end.x+", "+y.end.y+") cannot be before start ("+y.start.x+", "+y.start.y+")");return l*(y.end.y-y.start.y)+(y.end.x-y.start.x+1)}},4634:(M,o)=>{function y(l,h,u){if(h===l.length-1)return l[h].getTrimmedLength();var d=!l[h].hasContent(u-1)&&l[h].getWidth(u-1)===1,g=l[h+1].getWidth(0)===2;return d&&g?u-1:u}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(l,h,u,d,g){for(var v=[],s=0;s<l.length-1;s++){var a=s,_=l.get(++a);if(_.isWrapped){for(var f=[l.get(s)];a<l.length&&_.isWrapped;)f.push(_),_=l.get(++a);if(d>=s&&d<a)s+=f.length-1;else{for(var i=0,e=y(f,i,h),t=1,r=0;t<f.length;){var n=y(f,t,h),p=n-r,c=u-e,m=Math.min(p,c);f[i].copyCellsFrom(f[t],r,e,m,!1),(e+=m)===u&&(i++,e=0),(r+=m)===n&&(t++,r=0),e===0&&i!==0&&f[i-1].getWidth(u-1)===2&&(f[i].copyCellsFrom(f[i-1],u-1,e++,1,!1),f[i-1].setCell(u-1,g))}f[i].replaceCells(e,u,g);for(var C=0,S=f.length-1;S>0&&(S>i||f[S].getTrimmedLength()===0);S--)C++;C>0&&(v.push(s+f.length-C),v.push(C)),s+=f.length-1}}}return v},o.reflowLargerCreateNewLayout=function(l,h){for(var u=[],d=0,g=h[d],v=0,s=0;s<l.length;s++)if(g===s){var a=h[++d];l.onDeleteEmitter.fire({index:s-v,amount:a}),s+=a-1,v+=a,g=h[++d]}else u.push(s);return{layout:u,countRemoved:v}},o.reflowLargerApplyNewLayout=function(l,h){for(var u=[],d=0;d<h.length;d++)u.push(l.get(h[d]));for(d=0;d<u.length;d++)l.set(d,u[d]);l.length=h.length},o.reflowSmallerGetNewLineLengths=function(l,h,u){for(var d=[],g=l.map(function(e,t){return y(l,t,h)}).reduce(function(e,t){return e+t}),v=0,s=0,a=0;a<g;){if(g-a<u){d.push(g-a);break}v+=u;var _=y(l,s,h);v>_&&(v-=_,s++);var f=l[s].getWidth(v-1)===2;f&&v--;var i=f?u-1:u;d.push(i),a+=i}return d},o.getWrappedLineTrimmedLength=y},5295:function(M,o,y){var l,h=this&&this.__extends||(l=function(v,s){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,_){a.__proto__=_}||function(a,_){for(var f in _)Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])},l(v,s)},function(v,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=v}l(v,s),v.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;var u=y(9092),d=y(8460),g=function(v){function s(a,_){var f=v.call(this)||this;return f._optionsService=a,f._bufferService=_,f._onBufferActivate=f.register(new d.EventEmitter),f.reset(),f}return h(s,v),Object.defineProperty(s.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),s.prototype.reset=function(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(s.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),s.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},s.prototype.activateAltBuffer=function(a){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(a),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},s.prototype.resize=function(a,_){this._normal.resize(a,_),this._alt.resize(a,_)},s.prototype.setupTabStops=function(a){this._normal.setupTabStops(a),this._alt.setupTabStops(a)},s}(y(844).Disposable);o.BufferSet=g},511:function(M,o,y){var l,h=this&&this.__extends||(l=function(s,a){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,f){_.__proto__=f}||function(_,f){for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&(_[i]=f[i])},l(s,a)},function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function _(){this.constructor=s}l(s,a),s.prototype=a===null?Object.create(a):(_.prototype=a.prototype,new _)});Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;var u=y(482),d=y(643),g=y(3734),v=function(s){function a(){var _=s!==null&&s.apply(this,arguments)||this;return _.content=0,_.fg=0,_.bg=0,_.extended=new g.ExtendedAttrs,_.combinedData="",_}return h(a,s),a.fromCharData=function(_){var f=new a;return f.setFromCharData(_),f},a.prototype.isCombined=function(){return 2097152&this.content},a.prototype.getWidth=function(){return this.content>>22},a.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""},a.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},a.prototype.setFromCharData=function(_){this.fg=_[d.CHAR_DATA_ATTR_INDEX],this.bg=0;var f=!1;if(_[d.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(_[d.CHAR_DATA_CHAR_INDEX].length===2){var i=_[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){var e=_[d.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(i-55296)+e-56320+65536|_[d.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=_[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[d.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=_[d.CHAR_DATA_CHAR_INDEX],this.content=2097152|_[d.CHAR_DATA_WIDTH_INDEX]<<22)},a.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},a}(g.AttributeData);o.CellData=v},643:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=256,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:function(M,o,y){var l,h=this&&this.__extends||(l=function(g,v){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var _ in a)Object.prototype.hasOwnProperty.call(a,_)&&(s[_]=a[_])},l(g,v)},function(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function s(){this.constructor=g}l(g,v),g.prototype=v===null?Object.create(v):(s.prototype=v.prototype,new s)});Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;var u=y(8460),d=function(g){function v(s){var a=g.call(this)||this;return a.line=s,a._id=v._nextId++,a.isDisposed=!1,a._onDispose=new u.EventEmitter,a}return h(v,g),Object.defineProperty(v.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),v.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),g.prototype.dispose.call(this))},v._nextId=1,v}(y(844).Disposable);o.Marker=d},7116:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},o.CHARSETS.A={"#":"Â£"},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},o.CHARSETS.C=o.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},o.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},o.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},o.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},o.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},o.CHARSETS.E=o.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},o.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},o.CHARSETS.H=o.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},o.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(M,o)=>{var y,l;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(y=o.C0||(o.C0={})),(l=o.C1||(o.C1={})).PAD="Â",l.HOP="Â",l.BPH="Â",l.NBH="Â",l.IND="Â",l.NEL="Â",l.SSA="Â",l.ESA="Â",l.HTS="Â",l.HTJ="Â",l.VTS="Â",l.PLD="Â",l.PLU="Â",l.RI="Â",l.SS2="Â",l.SS3="Â",l.DCS="Â",l.PU1="Â",l.PU2="Â",l.STS="Â",l.CCH="Â",l.MW="Â",l.SPA="Â",l.EPA="Â",l.SOS="Â",l.SGCI="Â",l.SCI="Â",l.CSI="Â",l.ST="Â",l.OSC="Â",l.PM="Â",l.APC="Â",(o.C1_ESCAPED||(o.C1_ESCAPED={})).ST=y.ESC+"\\"},7399:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;var l=y(2584),h={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(u,d,g,v){var s={type:0,cancel:!1,key:void 0},a=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?s.key=d?l.C0.ESC+"OA":l.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?s.key=d?l.C0.ESC+"OD":l.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?s.key=d?l.C0.ESC+"OC":l.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(s.key=d?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(u.shiftKey){s.key=l.C0.BS;break}if(u.altKey){s.key=l.C0.ESC+l.C0.DEL;break}s.key=l.C0.DEL;break;case 9:if(u.shiftKey){s.key=l.C0.ESC+"[Z";break}s.key=l.C0.HT,s.cancel=!0;break;case 13:s.key=u.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,s.cancel=!0;break;case 27:s.key=l.C0.ESC,u.altKey&&(s.key=l.C0.ESC+l.C0.ESC),s.cancel=!0;break;case 37:if(u.metaKey)break;a?(s.key=l.C0.ESC+"[1;"+(a+1)+"D",s.key===l.C0.ESC+"[1;3D"&&(s.key=l.C0.ESC+(g?"b":"[1;5D"))):s.key=d?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(u.metaKey)break;a?(s.key=l.C0.ESC+"[1;"+(a+1)+"C",s.key===l.C0.ESC+"[1;3C"&&(s.key=l.C0.ESC+(g?"f":"[1;5C"))):s.key=d?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(u.metaKey)break;a?(s.key=l.C0.ESC+"[1;"+(a+1)+"A",g||s.key!==l.C0.ESC+"[1;3A"||(s.key=l.C0.ESC+"[1;5A")):s.key=d?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(u.metaKey)break;a?(s.key=l.C0.ESC+"[1;"+(a+1)+"B",g||s.key!==l.C0.ESC+"[1;3B"||(s.key=l.C0.ESC+"[1;5B")):s.key=d?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(s.key=l.C0.ESC+"[2~");break;case 46:s.key=a?l.C0.ESC+"[3;"+(a+1)+"~":l.C0.ESC+"[3~";break;case 36:s.key=a?l.C0.ESC+"[1;"+(a+1)+"H":d?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:s.key=a?l.C0.ESC+"[1;"+(a+1)+"F":d?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:u.shiftKey?s.type=2:u.ctrlKey?s.key=l.C0.ESC+"[5;"+(a+1)+"~":s.key=l.C0.ESC+"[5~";break;case 34:u.shiftKey?s.type=3:u.ctrlKey?s.key=l.C0.ESC+"[6;"+(a+1)+"~":s.key=l.C0.ESC+"[6~";break;case 112:s.key=a?l.C0.ESC+"[1;"+(a+1)+"P":l.C0.ESC+"OP";break;case 113:s.key=a?l.C0.ESC+"[1;"+(a+1)+"Q":l.C0.ESC+"OQ";break;case 114:s.key=a?l.C0.ESC+"[1;"+(a+1)+"R":l.C0.ESC+"OR";break;case 115:s.key=a?l.C0.ESC+"[1;"+(a+1)+"S":l.C0.ESC+"OS";break;case 116:s.key=a?l.C0.ESC+"[15;"+(a+1)+"~":l.C0.ESC+"[15~";break;case 117:s.key=a?l.C0.ESC+"[17;"+(a+1)+"~":l.C0.ESC+"[17~";break;case 118:s.key=a?l.C0.ESC+"[18;"+(a+1)+"~":l.C0.ESC+"[18~";break;case 119:s.key=a?l.C0.ESC+"[19;"+(a+1)+"~":l.C0.ESC+"[19~";break;case 120:s.key=a?l.C0.ESC+"[20;"+(a+1)+"~":l.C0.ESC+"[20~";break;case 121:s.key=a?l.C0.ESC+"[21;"+(a+1)+"~":l.C0.ESC+"[21~";break;case 122:s.key=a?l.C0.ESC+"[23;"+(a+1)+"~":l.C0.ESC+"[23~";break;case 123:s.key=a?l.C0.ESC+"[24;"+(a+1)+"~":l.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(g&&!v||!u.altKey||u.metaKey)!g||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?s.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(s.key=l.C0.US),u.key==="@"&&(s.key=l.C0.NUL)):u.keyCode===65&&(s.type=1);else{var _=h[u.keyCode],f=_?.[u.shiftKey?1:0];if(f)s.key=l.C0.ESC+f;else if(u.keyCode>=65&&u.keyCode<=90){var i=u.ctrlKey?u.keyCode-64:u.keyCode+32,e=String.fromCharCode(i);u.shiftKey&&(e=e.toUpperCase()),s.key=l.C0.ESC+e}else u.key==="Dead"&&u.code.startsWith("Key")&&(e=u.code.slice(3,4),u.shiftKey||(e=e.toLowerCase()),s.key=l.C0.ESC+e,s.cancel=!0)}else u.keyCode>=65&&u.keyCode<=90?s.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?s.key=l.C0.NUL:u.keyCode>=51&&u.keyCode<=55?s.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?s.key=l.C0.DEL:u.keyCode===219?s.key=l.C0.ESC:u.keyCode===220?s.key=l.C0.FS:u.keyCode===221&&(s.key=l.C0.GS)}return s}},482:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(h){return h>65535?(h-=65536,String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):String.fromCharCode(h)},o.utf32ToString=function(h,u,d){u===void 0&&(u=0),d===void 0&&(d=h.length);for(var g="",v=u;v<d;++v){var s=h[v];s>65535?(s-=65536,g+=String.fromCharCode(55296+(s>>10))+String.fromCharCode(s%1024+56320)):g+=String.fromCharCode(s)}return g};var y=function(){function h(){this._interim=0}return h.prototype.clear=function(){this._interim=0},h.prototype.decode=function(u,d){var g=u.length;if(!g)return 0;var v=0,s=0;this._interim&&(56320<=(f=u.charCodeAt(s++))&&f<=57343?d[v++]=1024*(this._interim-55296)+f-56320+65536:(d[v++]=this._interim,d[v++]=f),this._interim=0);for(var a=s;a<g;++a){var _=u.charCodeAt(a);if(55296<=_&&_<=56319){if(++a>=g)return this._interim=_,v;var f;56320<=(f=u.charCodeAt(a))&&f<=57343?d[v++]=1024*(_-55296)+f-56320+65536:(d[v++]=_,d[v++]=f)}else _!==65279&&(d[v++]=_)}return v},h}();o.StringToUtf32=y;var l=function(){function h(){this.interim=new Uint8Array(3)}return h.prototype.clear=function(){this.interim.fill(0)},h.prototype.decode=function(u,d){var g=u.length;if(!g)return 0;var v,s,a,_,f=0,i=0,e=0;if(this.interim[0]){var t=!1,r=this.interim[0];r&=(224&r)==192?31:(240&r)==224?15:7;for(var n=0,p=void 0;(p=63&this.interim[++n])&&n<4;)r<<=6,r|=p;for(var c=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,m=c-n;e<m;){if(e>=g)return 0;if((192&(p=u[e++]))!=128){e--,t=!0;break}this.interim[n++]=p,r<<=6,r|=63&p}t||(c===2?r<128?e--:d[f++]=r:c===3?r<2048||r>=55296&&r<=57343||r===65279||(d[f++]=r):r<65536||r>1114111||(d[f++]=r)),this.interim.fill(0)}for(var C=g-4,S=e;S<g;){for(;!(!(S<C)||128&(v=u[S])||128&(s=u[S+1])||128&(a=u[S+2])||128&(_=u[S+3]));)d[f++]=v,d[f++]=s,d[f++]=a,d[f++]=_,S+=4;if((v=u[S++])<128)d[f++]=v;else if((224&v)==192){if(S>=g)return this.interim[0]=v,f;if((192&(s=u[S++]))!=128){S--;continue}if((i=(31&v)<<6|63&s)<128){S--;continue}d[f++]=i}else if((240&v)==224){if(S>=g)return this.interim[0]=v,f;if((192&(s=u[S++]))!=128){S--;continue}if(S>=g)return this.interim[0]=v,this.interim[1]=s,f;if((192&(a=u[S++]))!=128){S--;continue}if((i=(15&v)<<12|(63&s)<<6|63&a)<2048||i>=55296&&i<=57343||i===65279)continue;d[f++]=i}else if((248&v)==240){if(S>=g)return this.interim[0]=v,f;if((192&(s=u[S++]))!=128){S--;continue}if(S>=g)return this.interim[0]=v,this.interim[1]=s,f;if((192&(a=u[S++]))!=128){S--;continue}if(S>=g)return this.interim[0]=v,this.interim[1]=s,this.interim[2]=a,f;if((192&(_=u[S++]))!=128){S--;continue}if((i=(7&v)<<18|(63&s)<<12|(63&a)<<6|63&_)<65536||i>1114111)continue;d[f++]=i}}return f},h}();o.Utf8ToUtf32=l},225:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;var l,h=y(8273),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],g=function(){function v(){if(this.version="6",!l){l=new Uint8Array(65536),(0,h.fill)(l,1),l[0]=0,(0,h.fill)(l,0,1,32),(0,h.fill)(l,0,127,160),(0,h.fill)(l,2,4352,4448),l[9001]=2,l[9002]=2,(0,h.fill)(l,2,11904,42192),l[12351]=1,(0,h.fill)(l,2,44032,55204),(0,h.fill)(l,2,63744,64256),(0,h.fill)(l,2,65040,65050),(0,h.fill)(l,2,65072,65136),(0,h.fill)(l,2,65280,65377),(0,h.fill)(l,2,65504,65511);for(var s=0;s<u.length;++s)(0,h.fill)(l,0,u[s][0],u[s][1]+1)}}return v.prototype.wcwidth=function(s){return s<32?0:s<127?1:s<65536?l[s]:function(a,_){var f,i=0,e=_.length-1;if(a<_[0][0]||a>_[e][1])return!1;for(;e>=i;)if(a>_[f=i+e>>1][1])i=f+1;else{if(!(a<_[f][0]))return!0;e=f-1}return!1}(s,d)?0:s>=131072&&s<=196605||s>=196608&&s<=262141?2:1},v}();o.UnicodeV6=g},5981:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;var l=y(8460),h=typeof queueMicrotask>"u"?function(d){Promise.resolve().then(d)}:queueMicrotask,u=function(){function d(g){this._action=g,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._onWriteParsed=new l.EventEmitter}return Object.defineProperty(d.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),d.prototype.writeSync=function(g,v){if(v!==void 0&&this._syncCalls>v)this._syncCalls=0;else if(this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var s;for(this._isSyncWriting=!0;s=this._writeBuffer.shift();){this._action(s);var a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},d.prototype.write=function(g,v){var s=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return s._innerWrite()})),this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(v)},d.prototype._innerWrite=function(g,v){var s=this;g===void 0&&(g=0),v===void 0&&(v=!0);for(var a=g||Date.now();this._writeBuffer.length>this._bufferOffset;){var _=this._writeBuffer[this._bufferOffset],f=this._action(_,v);if(f)return void f.catch(function(e){return h(function(){throw e}),Promise.resolve(!1)}).then(function(e){return Date.now()-a>=12?setTimeout(function(){return s._innerWrite(0,e)}):s._innerWrite(a,e)});var i=this._callbacks[this._bufferOffset];if(i&&i(),this._bufferOffset++,this._pendingData-=_.length,Date.now()-a>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return s._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()},d}();o.WriteBuffer=u},5941:function(M,o){var y=this&&this.__read||function(d,g){var v=typeof Symbol=="function"&&d[Symbol.iterator];if(!v)return d;var s,a,_=v.call(d),f=[];try{for(;(g===void 0||g-- >0)&&!(s=_.next()).done;)f.push(s.value)}catch(i){a={error:i}}finally{try{s&&!s.done&&(v=_.return)&&v.call(_)}finally{if(a)throw a.error}}return f};Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;var l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function u(d,g){var v=d.toString(16),s=v.length<2?"0"+v:v;switch(g){case 4:return v[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}o.parseColor=function(d){if(d){var g=d.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);var v=l.exec(g);if(v){var s=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/s*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/s*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/s*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),h.exec(g)&&[3,6,9,12].includes(g.length))){for(var a=g.length/3,_=[0,0,0],f=0;f<3;++f){var i=parseInt(g.slice(a*f,a*f+a),16);_[f]=a===1?i<<4:a===2?i:a===3?i>>4:i>>8}return _}}},o.toRgbString=function(d,g){g===void 0&&(g=16);var v=y(d,3),s=v[0],a=v[1],_=v[2];return"rgb:"+u(s,g)+"/"+u(a,g)+"/"+u(_,g)}},5770:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;var l=y(482),h=y(8742),u=y(5770),d=[],g=function(){function a(){this._handlers=Object.create(null),this._active=d,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return a.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=d},a.prototype.registerHandler=function(_,f){this._handlers[_]===void 0&&(this._handlers[_]=[]);var i=this._handlers[_];return i.push(f),{dispose:function(){var e=i.indexOf(f);e!==-1&&i.splice(e,1)}}},a.prototype.clearHandler=function(_){this._handlers[_]&&delete this._handlers[_]},a.prototype.setHandlerFallback=function(_){this._handlerFb=_},a.prototype.reset=function(){if(this._active.length)for(var _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].unhook(!1);this._stack.paused=!1,this._active=d,this._ident=0},a.prototype.hook=function(_,f){if(this.reset(),this._ident=_,this._active=this._handlers[_]||d,this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].hook(f);else this._handlerFb(this._ident,"HOOK",f)},a.prototype.put=function(_,f,i){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(_,f,i);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(_,f,i))},a.prototype.unhook=function(_,f){if(f===void 0&&(f=!0),this._active.length){var i=!1,e=this._active.length-1,t=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,i=f,t=this._stack.fallThrough,this._stack.paused=!1),!t&&i===!1){for(;e>=0&&(i=this._active[e].unhook(_))!==!0;e--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,i;e--}for(;e>=0;e--)if((i=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,"UNHOOK",_);this._active=d,this._ident=0},a}();o.DcsParser=g;var v=new h.Params;v.addParam(0);var s=function(){function a(_){this._handler=_,this._data="",this._params=v,this._hitLimit=!1}return a.prototype.hook=function(_){this._params=_.length>1||_.params[0]?_.clone():v,this._data="",this._hitLimit=!1},a.prototype.put=function(_,f,i){this._hitLimit||(this._data+=(0,l.utf32ToString)(_,f,i),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},a.prototype.unhook=function(_){var f=this,i=!1;if(this._hitLimit)i=!1;else if(_&&(i=this._handler(this._data,this._params))instanceof Promise)return i.then(function(e){return f._params=v,f._data="",f._hitLimit=!1,e});return this._params=v,this._data="",this._hitLimit=!1,i},a}();o.DcsHandler=s},2015:function(M,o,y){var l,h=this&&this.__extends||(l=function(i,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},l(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}l(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)});Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;var u=y(844),d=y(8273),g=y(8742),v=y(6242),s=y(6351),a=function(){function i(e){this.table=new Uint8Array(e)}return i.prototype.setDefault=function(e,t){(0,d.fill)(this.table,e<<4|t)},i.prototype.add=function(e,t,r,n){this.table[t<<8|e]=r<<4|n},i.prototype.addMany=function(e,t,r,n){for(var p=0;p<e.length;p++)this.table[t<<8|e[p]]=r<<4|n},i}();o.TransitionTable=a;var _=160;o.VT500_TRANSITION_TABLE=function(){var i=new a(4095),e=Array.apply(null,Array(256)).map(function(m,C){return C}),t=function(m,C){return e.slice(m,C)},r=t(32,127),n=t(0,24);n.push(25),n.push.apply(n,t(28,32));var p,c=t(0,14);for(p in i.setDefault(1,0),i.addMany(r,0,2,0),c)i.addMany([24,26,153,154],p,3,0),i.addMany(t(128,144),p,3,0),i.addMany(t(144,152),p,3,0),i.add(156,p,0,0),i.add(27,p,11,1),i.add(157,p,4,8),i.addMany([152,158,159],p,0,7),i.add(155,p,11,3),i.add(144,p,11,9);return i.addMany(n,0,3,0),i.addMany(n,1,3,1),i.add(127,1,0,1),i.addMany(n,8,0,8),i.addMany(n,3,3,3),i.add(127,3,0,3),i.addMany(n,4,3,4),i.add(127,4,0,4),i.addMany(n,6,3,6),i.addMany(n,5,3,5),i.add(127,5,0,5),i.addMany(n,2,3,2),i.add(127,2,0,2),i.add(93,1,4,8),i.addMany(r,8,5,8),i.add(127,8,5,8),i.addMany([156,27,24,26,7],8,6,0),i.addMany(t(28,32),8,0,8),i.addMany([88,94,95],1,0,7),i.addMany(r,7,0,7),i.addMany(n,7,0,7),i.add(156,7,0,0),i.add(127,7,0,7),i.add(91,1,11,3),i.addMany(t(64,127),3,7,0),i.addMany(t(48,60),3,8,4),i.addMany([60,61,62,63],3,9,4),i.addMany(t(48,60),4,8,4),i.addMany(t(64,127),4,7,0),i.addMany([60,61,62,63],4,0,6),i.addMany(t(32,64),6,0,6),i.add(127,6,0,6),i.addMany(t(64,127),6,0,0),i.addMany(t(32,48),3,9,5),i.addMany(t(32,48),5,9,5),i.addMany(t(48,64),5,0,6),i.addMany(t(64,127),5,7,0),i.addMany(t(32,48),4,9,5),i.addMany(t(32,48),1,9,2),i.addMany(t(32,48),2,9,2),i.addMany(t(48,127),2,10,0),i.addMany(t(48,80),1,10,0),i.addMany(t(81,88),1,10,0),i.addMany([89,90,92],1,10,0),i.addMany(t(96,127),1,10,0),i.add(80,1,11,9),i.addMany(n,9,0,9),i.add(127,9,0,9),i.addMany(t(28,32),9,0,9),i.addMany(t(32,48),9,9,12),i.addMany(t(48,60),9,8,10),i.addMany([60,61,62,63],9,9,10),i.addMany(n,11,0,11),i.addMany(t(32,128),11,0,11),i.addMany(t(28,32),11,0,11),i.addMany(n,10,0,10),i.add(127,10,0,10),i.addMany(t(28,32),10,0,10),i.addMany(t(48,60),10,8,10),i.addMany([60,61,62,63],10,0,11),i.addMany(t(32,48),10,9,12),i.addMany(n,12,0,12),i.add(127,12,0,12),i.addMany(t(28,32),12,0,12),i.addMany(t(32,48),12,9,12),i.addMany(t(48,64),12,0,11),i.addMany(t(64,127),12,12,13),i.addMany(t(64,127),10,12,13),i.addMany(t(64,127),9,12,13),i.addMany(n,13,13,13),i.addMany(r,13,13,13),i.add(127,13,0,13),i.addMany([27,156,24,26],13,14,0),i.add(_,0,2,0),i.add(_,8,5,8),i.add(_,6,0,6),i.add(_,11,0,11),i.add(_,13,13,13),i}();var f=function(i){function e(t){t===void 0&&(t=o.VT500_TRANSITION_TABLE);var r=i.call(this)||this;return r._transitions=t,r._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},r.initialState=0,r.currentState=r.initialState,r._params=new g.Params,r._params.addParam(0),r._collect=0,r.precedingCodepoint=0,r._printHandlerFb=function(n,p,c){},r._executeHandlerFb=function(n){},r._csiHandlerFb=function(n,p){},r._escHandlerFb=function(n){},r._errorHandlerFb=function(n){return n},r._printHandler=r._printHandlerFb,r._executeHandlers=Object.create(null),r._csiHandlers=Object.create(null),r._escHandlers=Object.create(null),r._oscParser=new v.OscParser,r._dcsParser=new s.DcsParser,r._errorHandler=r._errorHandlerFb,r.registerEscHandler({final:"\\"},function(){return!0}),r}return h(e,i),e.prototype._identifier=function(t,r){r===void 0&&(r=[64,126]);var n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if((n=t.prefix.charCodeAt(0))&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var p=0;p<t.intermediates.length;++p){var c=t.intermediates.charCodeAt(p);if(32>c||c>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=c}}if(t.final.length!==1)throw new Error("final must be a single byte");var m=t.final.charCodeAt(0);if(r[0]>m||m>r[1])throw new Error("final must be in range "+r[0]+" .. "+r[1]);return(n<<=8)|m},e.prototype.identToString=function(t){for(var r=[];t;)r.push(String.fromCharCode(255&t)),t>>=8;return r.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(t){this._printHandler=t},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(t,r){var n=this._identifier(t,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);var p=this._escHandlers[n];return p.push(r),{dispose:function(){var c=p.indexOf(r);c!==-1&&p.splice(c,1)}}},e.prototype.clearEscHandler=function(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]},e.prototype.setEscHandlerFallback=function(t){this._escHandlerFb=t},e.prototype.setExecuteHandler=function(t,r){this._executeHandlers[t.charCodeAt(0)]=r},e.prototype.clearExecuteHandler=function(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(t){this._executeHandlerFb=t},e.prototype.registerCsiHandler=function(t,r){var n=this._identifier(t);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);var p=this._csiHandlers[n];return p.push(r),{dispose:function(){var c=p.indexOf(r);c!==-1&&p.splice(c,1)}}},e.prototype.clearCsiHandler=function(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]},e.prototype.setCsiHandlerFallback=function(t){this._csiHandlerFb=t},e.prototype.registerDcsHandler=function(t,r){return this._dcsParser.registerHandler(this._identifier(t),r)},e.prototype.clearDcsHandler=function(t){this._dcsParser.clearHandler(this._identifier(t))},e.prototype.setDcsHandlerFallback=function(t){this._dcsParser.setHandlerFallback(t)},e.prototype.registerOscHandler=function(t,r){return this._oscParser.registerHandler(t,r)},e.prototype.clearOscHandler=function(t){this._oscParser.clearHandler(t)},e.prototype.setOscHandlerFallback=function(t){this._oscParser.setHandlerFallback(t)},e.prototype.setErrorHandler=function(t){this._errorHandler=t},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(t,r,n,p,c){this._parseStack.state=t,this._parseStack.handlers=r,this._parseStack.handlerPos=n,this._parseStack.transition=p,this._parseStack.chunkPos=c},e.prototype.parse=function(t,r,n){var p,c=0,m=0,C=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var S=this._parseStack.handlers,b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&b>-1){for(;b>=0&&(p=S[b](this._params))!==!0;b--)if(p instanceof Promise)return this._parseStack.handlerPos=b,p}this._parseStack.handlers=[];break;case 4:if(n===!1&&b>-1){for(;b>=0&&(p=S[b]())!==!0;b--)if(p instanceof Promise)return this._parseStack.handlerPos=b,p}this._parseStack.handlers=[];break;case 6:if(c=t[this._parseStack.chunkPos],p=this._dcsParser.unhook(c!==24&&c!==26,n))return p;c===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(c=t[this._parseStack.chunkPos],p=this._oscParser.end(c!==24&&c!==26,n))return p;c===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var w=C;w<r;++w){switch(c=t[w],(m=this._transitions.table[this.currentState<<8|(c<160?c:_)])>>4){case 2:for(var T=w+1;;++T){if(T>=r||(c=t[T])<32||c>126&&c<_){this._printHandler(t,w,T),w=T-1;break}if(++T>=r||(c=t[T])<32||c>126&&c<_){this._printHandler(t,w,T),w=T-1;break}if(++T>=r||(c=t[T])<32||c>126&&c<_){this._printHandler(t,w,T),w=T-1;break}if(++T>=r||(c=t[T])<32||c>126&&c<_){this._printHandler(t,w,T),w=T-1;break}}break;case 3:this._executeHandlers[c]?this._executeHandlers[c]():this._executeHandlerFb(c),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:w,code:c,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var x=(S=this._csiHandlers[this._collect<<8|c])?S.length-1:-1;x>=0&&(p=S[x](this._params))!==!0;x--)if(p instanceof Promise)return this._preserveStack(3,S,x,m,w),p;x<0&&this._csiHandlerFb(this._collect<<8|c,this._params),this.precedingCodepoint=0;break;case 8:do switch(c){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(c-48)}while(++w<r&&(c=t[w])>47&&c<60);w--;break;case 9:this._collect<<=8,this._collect|=c;break;case 10:for(var O=this._escHandlers[this._collect<<8|c],E=O?O.length-1:-1;E>=0&&(p=O[E]())!==!0;E--)if(p instanceof Promise)return this._preserveStack(4,O,E,m,w),p;E<0&&this._escHandlerFb(this._collect<<8|c),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|c,this._params);break;case 13:for(var L=w+1;;++L)if(L>=r||(c=t[L])===24||c===26||c===27||c>127&&c<_){this._dcsParser.put(t,w,L),w=L-1;break}break;case 14:if(p=this._dcsParser.unhook(c!==24&&c!==26))return this._preserveStack(6,[],0,m,w),p;c===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var A=w+1;;A++)if(A>=r||(c=t[A])<32||c>127&&c<_){this._oscParser.put(t,w,A),w=A-1;break}break;case 6:if(p=this._oscParser.end(c!==24&&c!==26))return this._preserveStack(5,[],0,m,w),p;c===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&m}},e}(u.Disposable);o.EscapeSequenceParser=f},6242:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;var l=y(5770),h=y(482),u=[],d=function(){function v(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return v.prototype.registerHandler=function(s,a){this._handlers[s]===void 0&&(this._handlers[s]=[]);var _=this._handlers[s];return _.push(a),{dispose:function(){var f=_.indexOf(a);f!==-1&&_.splice(f,1)}}},v.prototype.clearHandler=function(s){this._handlers[s]&&delete this._handlers[s]},v.prototype.setHandlerFallback=function(s){this._handlerFb=s},v.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=u},v.prototype.reset=function(){if(this._state===2)for(var s=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;s>=0;--s)this._active[s].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0},v.prototype._start=function(){if(this._active=this._handlers[this._id]||u,this._active.length)for(var s=this._active.length-1;s>=0;s--)this._active[s].start();else this._handlerFb(this._id,"START")},v.prototype._put=function(s,a,_){if(this._active.length)for(var f=this._active.length-1;f>=0;f--)this._active[f].put(s,a,_);else this._handlerFb(this._id,"PUT",(0,h.utf32ToString)(s,a,_))},v.prototype.start=function(){this.reset(),this._state=1},v.prototype.put=function(s,a,_){if(this._state!==3){if(this._state===1)for(;a<_;){var f=s[a++];if(f===59){this._state=2,this._start();break}if(f<48||57<f)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+f-48}this._state===2&&_-a>0&&this._put(s,a,_)}},v.prototype.end=function(s,a){if(a===void 0&&(a=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var _=!1,f=this._active.length-1,i=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,_=a,i=this._stack.fallThrough,this._stack.paused=!1),!i&&_===!1){for(;f>=0&&(_=this._active[f].end(s))!==!0;f--)if(_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,_;f--}for(;f>=0;f--)if((_=this._active[f].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,_}else this._handlerFb(this._id,"END",s);this._active=u,this._id=-1,this._state=0}},v}();o.OscParser=d;var g=function(){function v(s){this._handler=s,this._data="",this._hitLimit=!1}return v.prototype.start=function(){this._data="",this._hitLimit=!1},v.prototype.put=function(s,a,_){this._hitLimit||(this._data+=(0,h.utf32ToString)(s,a,_),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},v.prototype.end=function(s){var a=this,_=!1;if(this._hitLimit)_=!1;else if(s&&(_=this._handler(this._data))instanceof Promise)return _.then(function(f){return a._data="",a._hitLimit=!1,f});return this._data="",this._hitLimit=!1,_},v}();o.OscHandler=g},8742:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;var y=2147483647,l=function(){function h(u,d){if(u===void 0&&(u=32),d===void 0&&(d=32),this.maxLength=u,this.maxSubParamsLength=d,d>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(d),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return h.fromArray=function(u){var d=new h;if(!u.length)return d;for(var g=Array.isArray(u[0])?1:0;g<u.length;++g){var v=u[g];if(Array.isArray(v))for(var s=0;s<v.length;++s)d.addSubParam(v[s]);else d.addParam(v)}return d},h.prototype.clone=function(){var u=new h(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u},h.prototype.toArray=function(){for(var u=[],d=0;d<this.length;++d){u.push(this.params[d]);var g=this._subParamsIdx[d]>>8,v=255&this._subParamsIdx[d];v-g>0&&u.push(Array.prototype.slice.call(this._subParams,g,v))}return u},h.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},h.prototype.addParam=function(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>y?y:u}},h.prototype.addSubParam=function(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>y?y:u,this._subParamsIdx[this.length-1]++}},h.prototype.hasSubParams=function(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0},h.prototype.getSubParams=function(u){var d=this._subParamsIdx[u]>>8,g=255&this._subParamsIdx[u];return g-d>0?this._subParams.subarray(d,g):null},h.prototype.getSubParamsAll=function(){for(var u={},d=0;d<this.length;++d){var g=this._subParamsIdx[d]>>8,v=255&this._subParamsIdx[d];v-g>0&&(u[d]=this._subParams.slice(g,v))}return u},h.prototype.addDigit=function(u){var d;if(!(this._rejectDigits||!(d=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var g=this._digitIsSub?this._subParams:this.params,v=g[d-1];g[d-1]=~v?Math.min(10*v+u,y):u}},h}();o.Params=l},5741:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0;var y=function(){function l(){this._addons=[]}return l.prototype.dispose=function(){for(var h=this._addons.length-1;h>=0;h--)this._addons[h].instance.dispose()},l.prototype.loadAddon=function(h,u){var d=this,g={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(g),u.dispose=function(){return d._wrappedAddonDispose(g)},u.activate(h)},l.prototype._wrappedAddonDispose=function(h){if(!h.isDisposed){for(var u=-1,d=0;d<this._addons.length;d++)if(this._addons[d]===h){u=d;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");h.isDisposed=!0,h.dispose.apply(h.instance),this._addons.splice(u,1)}},l}();o.AddonManager=y},8771:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;var l=y(3785),h=y(511),u=function(){function d(g,v){this._buffer=g,this.type=v}return d.prototype.init=function(g){return this._buffer=g,this},Object.defineProperty(d.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),d.prototype.getLine=function(g){var v=this._buffer.lines.get(g);if(v)return new l.BufferLineApiView(v)},d.prototype.getNullCell=function(){return new h.CellData},d}();o.BufferApiView=u},3785:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;var l=y(511),h=function(){function u(d){this._line=d}return Object.defineProperty(u.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),u.prototype.getCell=function(d,g){if(!(d<0||d>=this._line.length))return g?(this._line.loadCell(d,g),g):this._line.loadCell(d,new l.CellData)},u.prototype.translateToString=function(d,g,v){return this._line.translateToString(d,g,v)},u}();o.BufferLineApiView=h},8285:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;var l=y(8771),h=y(8460),u=function(){function d(g){var v=this;this._core=g,this._onBufferChange=new h.EventEmitter,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return v._onBufferChange.fire(v.active)})}return Object.defineProperty(d.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),d}();o.BufferNamespaceApi=u},7975:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0;var y=function(){function l(h){this._core=h}return l.prototype.registerCsiHandler=function(h,u){return this._core.registerCsiHandler(h,function(d){return u(d.toArray())})},l.prototype.addCsiHandler=function(h,u){return this.registerCsiHandler(h,u)},l.prototype.registerDcsHandler=function(h,u){return this._core.registerDcsHandler(h,function(d,g){return u(d,g.toArray())})},l.prototype.addDcsHandler=function(h,u){return this.registerDcsHandler(h,u)},l.prototype.registerEscHandler=function(h,u){return this._core.registerEscHandler(h,u)},l.prototype.addEscHandler=function(h,u){return this.registerEscHandler(h,u)},l.prototype.registerOscHandler=function(h,u){return this._core.registerOscHandler(h,u)},l.prototype.addOscHandler=function(h,u){return this.registerOscHandler(h,u)},l}();o.ParserApi=y},7090:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0;var y=function(){function l(h){this._core=h}return l.prototype.register=function(h){this._core.unicodeService.register(h)},Object.defineProperty(l.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(h){this._core.unicodeService.activeVersion=h},enumerable:!1,configurable:!0}),l}();o.UnicodeApi=y},744:function(M,o,y){var l,h=this&&this.__extends||(l=function(f,i){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},l(f,i)},function(f,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=f}l(f,i),f.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}),u=this&&this.__decorate||function(f,i,e,t){var r,n=arguments.length,p=n<3?i:t===null?t=Object.getOwnPropertyDescriptor(i,e):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(f,i,e,t);else for(var c=f.length-1;c>=0;c--)(r=f[c])&&(p=(n<3?r(p):n>3?r(i,e,p):r(i,e))||p);return n>3&&p&&Object.defineProperty(i,e,p),p},d=this&&this.__param||function(f,i){return function(e,t){i(e,t,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;var g=y(2585),v=y(5295),s=y(8460),a=y(844);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;var _=function(f){function i(e){var t=f.call(this)||this;return t._optionsService=e,t.isUserScrolling=!1,t._onResize=new s.EventEmitter,t._onScroll=new s.EventEmitter,t.cols=Math.max(e.rawOptions.cols||0,o.MINIMUM_COLS),t.rows=Math.max(e.rawOptions.rows||0,o.MINIMUM_ROWS),t.buffers=new v.BufferSet(e,t),t}return h(i,f),Object.defineProperty(i.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){f.prototype.dispose.call(this),this.buffers.dispose()},i.prototype.resize=function(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:t})},i.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},i.prototype.scroll=function(e,t){t===void 0&&(t=!1);var r,n=this.buffer;(r=this._cachedBlankLine)&&r.length===this.cols&&r.getFg(0)===e.fg&&r.getBg(0)===e.bg||(r=n.getBlankLine(e,t),this._cachedBlankLine=r),r.isWrapped=t;var p=n.ybase+n.scrollTop,c=n.ybase+n.scrollBottom;if(n.scrollTop===0){var m=n.lines.isFull;c===n.lines.length-1?m?n.lines.recycle().copyFrom(r):n.lines.push(r.clone()):n.lines.splice(c+1,0,r.clone()),m?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{var C=c-p+1;n.lines.shiftElements(p+1,C-1,-1),n.lines.set(c,r.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)},i.prototype.scrollLines=function(e,t,r){var n=this.buffer;if(e<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else e+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);var p=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+e,n.ybase),0),p!==n.ydisp&&(t||this._onScroll.fire(n.ydisp))},i.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},i.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},i.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},i.prototype.scrollToLine=function(e){var t=e-this.buffer.ydisp;t!==0&&this.scrollLines(t)},u([d(0,g.IOptionsService)],i)}(a.Disposable);o.BufferService=_},7994:(M,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0;var y=function(){function l(){this.glevel=0,this._charsets=[]}return l.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},l.prototype.setgLevel=function(h){this.glevel=h,this.charset=this._charsets[h]},l.prototype.setgCharset=function(h,u){this._charsets[h]=u,this.glevel===h&&(this.charset=u)},l}();o.CharsetService=y},1753:function(M,o,y){var l=this&&this.__decorate||function(i,e,t,r){var n,p=arguments.length,c=p<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,r);else for(var m=i.length-1;m>=0;m--)(n=i[m])&&(c=(p<3?n(c):p>3?n(e,t,c):n(e,t))||c);return p>3&&c&&Object.defineProperty(e,t,c),c},h=this&&this.__param||function(i,e){return function(t,r){e(t,r,i)}},u=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;var d=y(2585),g=y(8460),v={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(i){return i.button!==4&&i.action===1&&(i.ctrl=!1,i.alt=!1,i.shift=!1,!0)}},VT200:{events:19,restrict:function(i){return i.action!==32}},DRAG:{events:23,restrict:function(i){return i.action!==32||i.button!==3}},ANY:{events:31,restrict:function(i){return!0}}};function s(i,e){var t=(i.ctrl?16:0)|(i.shift?4:0)|(i.alt?8:0);return i.button===4?(t|=64,t|=i.action):(t|=3&i.button,4&i.button&&(t|=64),8&i.button&&(t|=128),i.action===32?t|=32:i.action!==0||e||(t|=3)),t}var a=String.fromCharCode,_={DEFAULT:function(i){var e=[s(i,!1)+32,i.col+32,i.row+32];return e[0]>255||e[1]>255||e[2]>255?"":"\x1B[M"+a(e[0])+a(e[1])+a(e[2])},SGR:function(i){var e=i.action===0&&i.button!==4?"m":"M";return"\x1B[<"+s(i,!0)+";"+i.col+";"+i.row+e}},f=function(){function i(e,t){var r,n,p,c;this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new g.EventEmitter,this._lastEvent=null;try{for(var m=u(Object.keys(v)),C=m.next();!C.done;C=m.next()){var S=C.value;this.addProtocol(S,v[S])}}catch(x){r={error:x}}finally{try{C&&!C.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}try{for(var b=u(Object.keys(_)),w=b.next();!w.done;w=b.next()){var T=w.value;this.addEncoding(T,_[T])}}catch(x){p={error:x}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(p)throw p.error}}this.reset()}return i.prototype.addProtocol=function(e,t){this._protocols[e]=t},i.prototype.addEncoding=function(e,t){this._encodings[e]=t},Object.defineProperty(i.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(e){if(!this._protocols[e])throw new Error('unknown protocol "'+e+'"');this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(e){if(!this._encodings[e])throw new Error('unknown encoding "'+e+'"');this._activeEncoding=e},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(i.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),i.prototype.triggerMouseEvent=function(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,e))||!this._protocols[this._activeProtocol].restrict(e))return!1;var t=this._encodings[this._activeEncoding](e);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0},i.prototype.explainEvents=function(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}},i.prototype._compareEvents=function(e,t){return e.col===t.col&&e.row===t.row&&e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift},l([h(0,d.IBufferService),h(1,d.ICoreService)],i)}();o.CoreMouseService=f},6975:function(M,o,y){var l,h=this&&this.__extends||(l=function(e,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(r[p]=n[p])},l(e,t)},function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}l(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}),u=this&&this.__decorate||function(e,t,r,n){var p,c=arguments.length,m=c<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,t,r,n);else for(var C=e.length-1;C>=0;C--)(p=e[C])&&(m=(c<3?p(m):c>3?p(t,r,m):p(t,r))||m);return c>3&&m&&Object.defineProperty(t,r,m),m},d=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;var g=y(2585),v=y(8460),s=y(1439),a=y(844),_=Object.freeze({insertMode:!1}),f=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),i=function(e){function t(r,n,p,c){var m=e.call(this)||this;return m._bufferService=n,m._logService=p,m._optionsService=c,m.isCursorInitialized=!1,m.isCursorHidden=!1,m._onData=m.register(new v.EventEmitter),m._onUserInput=m.register(new v.EventEmitter),m._onBinary=m.register(new v.EventEmitter),m._scrollToBottom=r,m.register({dispose:function(){return m._scrollToBottom=void 0}}),m.modes=(0,s.clone)(_),m.decPrivateModes=(0,s.clone)(f),m}return h(t,e),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.modes=(0,s.clone)(_),this.decPrivateModes=(0,s.clone)(f)},t.prototype.triggerDataEvent=function(r,n){if(n===void 0&&(n=!1),!this._optionsService.rawOptions.disableStdin){var p=this._bufferService.buffer;p.ybase!==p.ydisp&&this._scrollToBottom(),n&&this._onUserInput.fire(),this._logService.debug('sending data "'+r+'"',function(){return r.split("").map(function(c){return c.charCodeAt(0)})}),this._onData.fire(r)}},t.prototype.triggerBinaryEvent=function(r){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+r+'"',function(){return r.split("").map(function(n){return n.charCodeAt(0)})}),this._onBinary.fire(r))},u([d(1,g.IBufferService),d(2,g.ILogService),d(3,g.IOptionsService)],t)}(a.Disposable);o.CoreService=i},9074:function(M,o,y){var l,h=this&&this.__extends||(l=function(i,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},l(i,e)},function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}l(i,e),i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),u=this&&this.__generator||function(i,e){var t,r,n,p,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return p={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function m(C){return function(S){return function(b){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,r&&(n=2&b[0]?r.return:b[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,b[1])).done)return n;switch(r=0,n&&(b=[2&b[0],n.value]),b[0]){case 0:case 1:n=b;break;case 4:return c.label++,{value:b[1],done:!1};case 5:c.label++,r=b[1],b=[0];continue;case 7:b=c.ops.pop(),c.trys.pop();continue;default:if(!((n=(n=c.trys).length>0&&n[n.length-1])||b[0]!==6&&b[0]!==2)){c=0;continue}if(b[0]===3&&(!n||b[1]>n[0]&&b[1]<n[3])){c.label=b[1];break}if(b[0]===6&&c.label<n[1]){c.label=n[1],n=b;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(b);break}n[2]&&c.ops.pop(),c.trys.pop();continue}b=e.call(i,c)}catch(w){b=[6,w],r=0}finally{t=n=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([C,S])}}},d=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],r=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;var g=y(8055),v=y(8460),s=y(844),a=y(6106),_=function(i){function e(){var t=i.call(this)||this;return t._decorations=new a.SortedList(function(r){return r.marker.line}),t._onDecorationRegistered=t.register(new v.EventEmitter),t._onDecorationRemoved=t.register(new v.EventEmitter),t}return h(e,i),Object.defineProperty(e.prototype,"onDecorationRegistered",{get:function(){return this._onDecorationRegistered.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDecorationRemoved",{get:function(){return this._onDecorationRemoved.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decorations",{get:function(){return this._decorations.values()},enumerable:!1,configurable:!0}),e.prototype.registerDecoration=function(t){var r=this;if(!t.marker.isDisposed){var n=new f(t);if(n){var p=n.marker.onDispose(function(){return n.dispose()});n.onDispose(function(){n&&(r._decorations.delete(n)&&r._onDecorationRemoved.fire(n),p.dispose())}),this._decorations.insert(n),this._onDecorationRegistered.fire(n)}return n}},e.prototype.reset=function(){var t,r;try{for(var n=d(this._decorations.values()),p=n.next();!p.done;p=n.next())p.value.dispose()}catch(c){t={error:c}}finally{try{p&&!p.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this._decorations.clear()},e.prototype.getDecorationsAtLine=function(t){return u(this,function(r){return[2,this._decorations.getKeyIterator(t)]})},e.prototype.getDecorationsAtCell=function(t,r,n){var p,c,m,C,S,b,w,T,x,O,E;return u(this,function(L){switch(L.label){case 0:p=0,c=0,L.label=1;case 1:L.trys.push([1,6,7,8]),m=d(this._decorations.getKeyIterator(r)),C=m.next(),L.label=2;case 2:return C.done?[3,5]:(S=C.value,p=(x=S.options.x)!==null&&x!==void 0?x:0,c=p+((O=S.options.width)!==null&&O!==void 0?O:1),!(t>=p&&t<c)||n&&((E=S.options.layer)!==null&&E!==void 0?E:"bottom")!==n?[3,4]:[4,S]);case 3:L.sent(),L.label=4;case 4:return C=m.next(),[3,2];case 5:return[3,8];case 6:return b=L.sent(),w={error:b},[3,8];case 7:try{C&&!C.done&&(T=m.return)&&T.call(m)}finally{if(w)throw w.error}return[7];case 8:return[2]}})},e.prototype.dispose=function(){var t,r;try{for(var n=d(this._decorations.values()),p=n.next();!p.done;p=n.next()){var c=p.value;this._onDecorationRemoved.fire(c)}}catch(m){t={error:m}}finally{try{p&&!p.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this.reset()},e}(s.Disposable);o.DecorationService=_;var f=function(i){function e(t){var r=i.call(this)||this;return r.options=t,r.isDisposed=!1,r.onRenderEmitter=r.register(new v.EventEmitter),r.onRender=r.onRenderEmitter.event,r._onDispose=r.register(new v.EventEmitter),r.onDispose=r._onDispose.event,r._cachedBg=null,r._cachedFg=null,r.marker=t.marker,r.options.overviewRulerOptions&&!r.options.overviewRulerOptions.position&&(r.options.overviewRulerOptions.position="full"),r}return h(e,i),Object.defineProperty(e.prototype,"backgroundColorRGB",{get:function(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=g.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"foregroundColorRGB",{get:function(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=g.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._onDispose.fire(),i.prototype.dispose.call(this))},e}(s.Disposable)},3730:function(M,o,y){var l=this&&this.__decorate||function(g,v,s,a){var _,f=arguments.length,i=f<3?v:a===null?a=Object.getOwnPropertyDescriptor(v,s):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(g,v,s,a);else for(var e=g.length-1;e>=0;e--)(_=g[e])&&(i=(f<3?_(i):f>3?_(v,s,i):_(v,s))||i);return f>3&&i&&Object.defineProperty(v,s,i),i},h=this&&this.__param||function(g,v){return function(s,a){v(s,a,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DirtyRowService=void 0;var u=y(2585),d=function(){function g(v){this._bufferService=v,this.clearRange()}return Object.defineProperty(g.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),g.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},g.prototype.markDirty=function(v){v<this._start?this._start=v:v>this._end&&(this._end=v)},g.prototype.markRangeDirty=function(v,s){if(v>s){var a=v;v=s,s=a}v<this._start&&(this._start=v),s>this._end&&(this._end=s)},g.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},l([h(0,u.IBufferService)],g)}();o.DirtyRowService=d},4348:function(M,o,y){var l=this&&this.__values||function(a){var _=typeof Symbol=="function"&&Symbol.iterator,f=_&&a[_],i=0;if(f)return f.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&i>=a.length&&(a=void 0),{value:a&&a[i++],done:!a}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},h=this&&this.__read||function(a,_){var f=typeof Symbol=="function"&&a[Symbol.iterator];if(!f)return a;var i,e,t=f.call(a),r=[];try{for(;(_===void 0||_-- >0)&&!(i=t.next()).done;)r.push(i.value)}catch(n){e={error:n}}finally{try{i&&!i.done&&(f=t.return)&&f.call(t)}finally{if(e)throw e.error}}return r},u=this&&this.__spreadArray||function(a,_,f){if(f||arguments.length===2)for(var i,e=0,t=_.length;e<t;e++)!i&&e in _||(i||(i=Array.prototype.slice.call(_,0,e)),i[e]=_[e]);return a.concat(i||Array.prototype.slice.call(_))};Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;var d=y(2585),g=y(8343),v=function(){function a(){for(var _,f,i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];this._entries=new Map;try{for(var t=l(i),r=t.next();!r.done;r=t.next()){var n=h(r.value,2),p=n[0],c=n[1];this.set(p,c)}}catch(m){_={error:m}}finally{try{r&&!r.done&&(f=t.return)&&f.call(t)}finally{if(_)throw _.error}}}return a.prototype.set=function(_,f){var i=this._entries.get(_);return this._entries.set(_,f),i},a.prototype.forEach=function(_){this._entries.forEach(function(f,i){return _(i,f)})},a.prototype.has=function(_){return this._entries.has(_)},a.prototype.get=function(_){return this._entries.get(_)},a}();o.ServiceCollection=v;var s=function(){function a(){this._services=new v,this._services.set(d.IInstantiationService,this)}return a.prototype.setService=function(_,f){this._services.set(_,f)},a.prototype.getService=function(_){return this._services.get(_)},a.prototype.createInstance=function(_){for(var f,i,e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=(0,g.getServiceDependencies)(_).sort(function(b,w){return b.index-w.index}),n=[];try{for(var p=l(r),c=p.next();!c.done;c=p.next()){var m=c.value,C=this._services.get(m.id);if(!C)throw new Error("[createInstance] "+_.name+" depends on UNKNOWN service "+m.id+".");n.push(C)}}catch(b){f={error:b}}finally{try{c&&!c.done&&(i=p.return)&&i.call(p)}finally{if(f)throw f.error}}var S=r.length>0?r[0].index:e.length;if(e.length!==S)throw new Error("[createInstance] First service dependency of "+_.name+" at position "+(S+1)+" conflicts with "+e.length+" static arguments");return new(_.bind.apply(_,u([void 0],h(u(u([],h(e),!1),h(n),!1)),!1)))},a}();o.InstantiationService=s},7866:function(M,o,y){var l=this&&this.__decorate||function(a,_,f,i){var e,t=arguments.length,r=t<3?_:i===null?i=Object.getOwnPropertyDescriptor(_,f):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,_,f,i);else for(var n=a.length-1;n>=0;n--)(e=a[n])&&(r=(t<3?e(r):t>3?e(_,f,r):e(_,f))||r);return t>3&&r&&Object.defineProperty(_,f,r),r},h=this&&this.__param||function(a,_){return function(f,i){_(f,i,a)}},u=this&&this.__read||function(a,_){var f=typeof Symbol=="function"&&a[Symbol.iterator];if(!f)return a;var i,e,t=f.call(a),r=[];try{for(;(_===void 0||_-- >0)&&!(i=t.next()).done;)r.push(i.value)}catch(n){e={error:n}}finally{try{i&&!i.done&&(f=t.return)&&f.call(t)}finally{if(e)throw e.error}}return r},d=this&&this.__spreadArray||function(a,_,f){if(f||arguments.length===2)for(var i,e=0,t=_.length;e<t;e++)!i&&e in _||(i||(i=Array.prototype.slice.call(_,0,e)),i[e]=_[e]);return a.concat(i||Array.prototype.slice.call(_))};Object.defineProperty(o,"__esModule",{value:!0}),o.LogService=void 0;var g=y(2585),v={debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF},s=function(){function a(_){var f=this;this._optionsService=_,this.logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(i){i==="logLevel"&&f._updateLogLevel()})}return a.prototype._updateLogLevel=function(){this.logLevel=v[this._optionsService.rawOptions.logLevel]},a.prototype._evalLazyOptionalParams=function(_){for(var f=0;f<_.length;f++)typeof _[f]=="function"&&(_[f]=_[f]())},a.prototype._log=function(_,f,i){this._evalLazyOptionalParams(i),_.call.apply(_,d([console,"xterm.js: "+f],u(i),!1))},a.prototype.debug=function(_){for(var f=[],i=1;i<arguments.length;i++)f[i-1]=arguments[i];this.logLevel<=g.LogLevelEnum.DEBUG&&this._log(console.log,_,f)},a.prototype.info=function(_){for(var f=[],i=1;i<arguments.length;i++)f[i-1]=arguments[i];this.logLevel<=g.LogLevelEnum.INFO&&this._log(console.info,_,f)},a.prototype.warn=function(_){for(var f=[],i=1;i<arguments.length;i++)f[i-1]=arguments[i];this.logLevel<=g.LogLevelEnum.WARN&&this._log(console.warn,_,f)},a.prototype.error=function(_){for(var f=[],i=1;i<arguments.length;i++)f[i-1]=arguments[i];this.logLevel<=g.LogLevelEnum.ERROR&&this._log(console.error,_,f)},l([h(0,g.IOptionsService)],a)}();o.LogService=s},7302:function(M,o,y){var l=this&&this.__assign||function(){return l=Object.assign||function(v){for(var s,a=1,_=arguments.length;a<_;a++)for(var f in s=arguments[a])Object.prototype.hasOwnProperty.call(s,f)&&(v[f]=s[f]);return v},l.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=o.DEFAULT_BELL_SOUND=void 0;var h=y(8460),u=y(6114);o.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:o.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:void 0};var d=["normal","bold","100","200","300","400","500","600","700","800","900"],g=function(){function v(s){this._onOptionChange=new h.EventEmitter;var a=l({},o.DEFAULT_OPTIONS);for(var _ in s)if(_ in a)try{var f=s[_];a[_]=this._sanitizeAndValidateOption(_,f)}catch(i){console.error(i)}this.rawOptions=a,this.options=l({},a),this._setupOptions()}return Object.defineProperty(v.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),v.prototype._setupOptions=function(){var s=this,a=function(e){if(!(e in o.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');return s.rawOptions[e]},_=function(e,t){if(!(e in o.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');t=s._sanitizeAndValidateOption(e,t),s.rawOptions[e]!==t&&(s.rawOptions[e]=t,s._onOptionChange.fire(e))};for(var f in this.rawOptions){var i={get:a.bind(this,f),set:_.bind(this,f)};Object.defineProperty(this.options,f,i)}},v.prototype.setOption=function(s,a){this.options[s]=a},v.prototype._sanitizeAndValidateOption=function(s,a){switch(s){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":a||(a=o.DEFAULT_OPTIONS[s]);break;case"fontWeight":case"fontWeightBold":if(typeof a=="number"&&1<=a&&a<=1e3)break;a=d.includes(a)?a:o.DEFAULT_OPTIONS[s];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(s+" cannot be less than 1, value: "+a);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(s+" cannot be less than 0, value: "+a);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(s+" cannot be less than or equal to 0, value: "+a);case"rows":case"cols":if(!a&&a!==0)throw new Error(s+" must be numeric, value: "+a)}return a},v.prototype.getOption=function(s){return this.options[s]},v}();o.OptionsService=g},8343:(M,o)=>{function y(l,h,u){h.di$target===h?h.di$dependencies.push({id:l,index:u}):(h.di$dependencies=[{id:l,index:u}],h.di$target=h)}Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0,o.serviceRegistry=new Map,o.getServiceDependencies=function(l){return l.di$dependencies||[]},o.createDecorator=function(l){if(o.serviceRegistry.has(l))return o.serviceRegistry.get(l);var h=function(u,d,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");y(h,u,g)};return h.toString=function(){return l},o.serviceRegistry.set(l,h),h}},2585:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.IDirtyRowService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;var l,h=y(8343);o.IBufferService=(0,h.createDecorator)("BufferService"),o.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),o.ICoreService=(0,h.createDecorator)("CoreService"),o.ICharsetService=(0,h.createDecorator)("CharsetService"),o.IDirtyRowService=(0,h.createDecorator)("DirtyRowService"),o.IInstantiationService=(0,h.createDecorator)("InstantiationService"),(l=o.LogLevelEnum||(o.LogLevelEnum={}))[l.DEBUG=0]="DEBUG",l[l.INFO=1]="INFO",l[l.WARN=2]="WARN",l[l.ERROR=3]="ERROR",l[l.OFF=4]="OFF",o.ILogService=(0,h.createDecorator)("LogService"),o.IOptionsService=(0,h.createDecorator)("OptionsService"),o.IUnicodeService=(0,h.createDecorator)("UnicodeService"),o.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(M,o,y)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;var l=y(8460),h=y(225),u=function(){function d(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter;var g=new h.UnicodeV6;this.register(g),this._active=g.version,this._activeProvider=g}return Object.defineProperty(d.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"activeVersion",{get:function(){return this._active},set:function(g){if(!this._providers[g])throw new Error('unknown Unicode version "'+g+'"');this._active=g,this._activeProvider=this._providers[g],this._onChange.fire(g)},enumerable:!1,configurable:!0}),d.prototype.register=function(g){this._providers[g.version]=g},d.prototype.wcwidth=function(g){return this._activeProvider.wcwidth(g)},d.prototype.getStringCellWidth=function(g){for(var v=0,s=g.length,a=0;a<s;++a){var _=g.charCodeAt(a);if(55296<=_&&_<=56319){if(++a>=s)return v+this.wcwidth(_);var f=g.charCodeAt(a);56320<=f&&f<=57343?_=1024*(_-55296)+f-56320+65536:v+=this.wcwidth(f)}v+=this.wcwidth(_)}return v},d}();o.UnicodeService=u}},B={};return function M(o){var y=B[o];if(y!==void 0)return y.exports;var l=B[o]={exports:{}};return H[o].call(l.exports,l,l.exports,M),l.exports}(4389)})()})},509:function(j,q,R){var H=R(9985),B=R(3691),M=TypeError;j.exports=function(o){if(H(o))return o;throw new M(B(o)+" is not a function")}},3550:function(j,q,R){var H=R(9985),B=String,M=TypeError;j.exports=function(o){if(typeof o=="object"||H(o))return o;throw new M("Can't set "+B(o)+" as a prototype")}},767:function(j,q,R){var H=R(3622),B=TypeError;j.exports=function(M,o){if(H(o,M))return M;throw new B("Incorrect invocation")}},5027:function(j,q,R){var H=R(8999),B=String,M=TypeError;j.exports=function(o){if(H(o))return o;throw new M(B(o)+" is not an object")}},7075:function(j){j.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},4872:function(j,q,R){var H=R(7075),B=R(7697),M=R(9037),o=R(9985),y=R(8999),l=R(6812),h=R(926),u=R(3691),d=R(5773),g=R(1880),v=R(2148),s=R(3622),a=R(1868),_=R(9385),f=R(4201),i=R(4630),e=R(618),t=e.enforce,r=e.get,n=M.Int8Array,p=n&&n.prototype,c=M.Uint8ClampedArray,m=c&&c.prototype,C=n&&a(n),S=p&&a(p),b=Object.prototype,w=M.TypeError,T=f("toStringTag"),x=i("TYPED_ARRAY_TAG"),O="TypedArrayConstructor",E=H&&!!_&&h(M.opera)!=="Opera",L=!1,A,I,V,G={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},K={BigInt64Array:8,BigUint64Array:8},Y=function(Z){if(!y(Z))return!1;var z=h(Z);return z==="DataView"||l(G,z)||l(K,z)},X=function(J){var Z=a(J);if(y(Z)){var z=r(Z);return z&&l(z,O)?z[O]:X(Z)}},k=function(J){if(!y(J))return!1;var Z=h(J);return l(G,Z)||l(K,Z)},re=function(J){if(k(J))return J;throw new w("Target is not a typed array")},Q=function(J){if(o(J)&&(!_||s(C,J)))return J;throw new w(u(J)+" is not a typed array constructor")},ne=function(J,Z,z,P){if(B){if(z)for(var D in G){var N=M[D];if(N&&l(N.prototype,J))try{delete N.prototype[J]}catch{try{N.prototype[J]=Z}catch{}}}(!S[J]||z)&&g(S,J,z?Z:E&&p[J]||Z,P)}},F=function(J,Z,z){var P,D;if(B){if(_){if(z){for(P in G)if(D=M[P],D&&l(D,J))try{delete D[J]}catch{}}if(!C[J]||z)try{return g(C,J,z?Z:E&&C[J]||Z)}catch{}else return}for(P in G)D=M[P],D&&(!D[J]||z)&&g(D,J,Z)}};for(A in G)I=M[A],V=I&&I.prototype,V?t(V)[O]=I:E=!1;for(A in K)I=M[A],V=I&&I.prototype,V&&(t(V)[O]=I);if((!E||!o(C)||C===Function.prototype)&&(C=function(){throw new w("Incorrect invocation")},E))for(A in G)M[A]&&_(M[A],C);if((!E||!S||S===b)&&(S=C.prototype,E))for(A in G)M[A]&&_(M[A].prototype,S);if(E&&a(m)!==S&&_(m,S),B&&!l(S,T)){L=!0,v(S,T,{configurable:!0,get:function(){return y(this)?this[x]:void 0}});for(A in G)M[A]&&d(M[A],x,A)}j.exports={NATIVE_ARRAY_BUFFER_VIEWS:E,TYPED_ARRAY_TAG:L&&x,aTypedArray:re,aTypedArrayConstructor:Q,exportTypedArrayMethod:ne,exportTypedArrayStaticMethod:F,getTypedArrayConstructor:X,isView:Y,isTypedArray:k,TypedArray:C,TypedArrayPrototype:S}},9976:function(j,q,R){var H=R(6310);j.exports=function(B,M){for(var o=0,y=H(M),l=new B(y);y>o;)l[o]=M[o++];return l}},4328:function(j,q,R){var H=R(5290),B=R(7578),M=R(6310),o=function(y){return function(l,h,u){var d=H(l),g=M(d),v=B(u,g),s;if(y&&h!==h){for(;g>v;)if(s=d[v++],s!==s)return!0}else for(;g>v;v++)if((y||v in d)&&d[v]===h)return y||v||0;return!y&&-1}};j.exports={includes:o(!0),indexOf:o(!1)}},5649:function(j,q,R){var H=R(7697),B=R(2297),M=TypeError,o=Object.getOwnPropertyDescriptor,y=H&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(l){return l instanceof TypeError}}();j.exports=y?function(l,h){if(B(l)&&!o(l,"length").writable)throw new M("Cannot set read only .length");return l.length=h}:function(l,h){return l.length=h}},6166:function(j,q,R){var H=R(6310);j.exports=function(B,M){for(var o=H(B),y=new M(o),l=0;l<o;l++)y[l]=B[o-l-1];return y}},6134:function(j,q,R){var H=R(6310),B=R(8700),M=RangeError;j.exports=function(o,y,l,h){var u=H(o),d=B(l),g=d<0?u+d:d;if(g>=u||g<0)throw new M("Incorrect index");for(var v=new y(u),s=0;s<u;s++)v[s]=s===g?h:o[s];return v}},6648:function(j,q,R){var H=R(8844),B=H({}.toString),M=H("".slice);j.exports=function(o){return M(B(o),8,-1)}},926:function(j,q,R){var H=R(3043),B=R(9985),M=R(6648),o=R(4201),y=o("toStringTag"),l=Object,h=M(function(){return arguments}())==="Arguments",u=function(d,g){try{return d[g]}catch{}};j.exports=H?M:function(d){var g,v,s;return d===void 0?"Undefined":d===null?"Null":typeof(v=u(g=l(d),y))=="string"?v:h?M(g):(s=M(g))==="Object"&&B(g.callee)?"Arguments":s}},8758:function(j,q,R){var H=R(6812),B=R(9152),M=R(2474),o=R(2560);j.exports=function(y,l,h){for(var u=B(l),d=o.f,g=M.f,v=0;v<u.length;v++){var s=u[v];!H(y,s)&&!(h&&H(h,s))&&d(y,s,g(l,s))}}},1748:function(j,q,R){var H=R(3689);j.exports=!H(function(){function B(){}return B.prototype.constructor=null,Object.getPrototypeOf(new B)!==B.prototype})},5773:function(j,q,R){var H=R(7697),B=R(2560),M=R(5684);j.exports=H?function(o,y,l){return B.f(o,y,M(1,l))}:function(o,y,l){return o[y]=l,o}},5684:function(j){j.exports=function(q,R){return{enumerable:!(q&1),configurable:!(q&2),writable:!(q&4),value:R}}},2148:function(j,q,R){var H=R(8702),B=R(2560);j.exports=function(M,o,y){return y.get&&H(y.get,o,{getter:!0}),y.set&&H(y.set,o,{setter:!0}),B.f(M,o,y)}},1880:function(j,q,R){var H=R(9985),B=R(2560),M=R(8702),o=R(5014);j.exports=function(y,l,h,u){u||(u={});var d=u.enumerable,g=u.name!==void 0?u.name:l;if(H(h)&&M(h,g,u),u.global)d?y[l]=h:o(l,h);else{try{u.unsafe?y[l]&&(d=!0):delete y[l]}catch{}d?y[l]=h:B.f(y,l,{value:h,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return y}},5014:function(j,q,R){var H=R(9037),B=Object.defineProperty;j.exports=function(M,o){try{B(H,M,{value:o,configurable:!0,writable:!0})}catch{H[M]=o}return o}},8494:function(j,q,R){var H=R(3691),B=TypeError;j.exports=function(M,o){if(!delete M[o])throw new B("Cannot delete property "+H(o)+" of "+H(M))}},7697:function(j,q,R){var H=R(3689);j.exports=!H(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},2659:function(j){var q=typeof document=="object"&&document.all,R=typeof q>"u"&&q!==void 0;j.exports={all:q,IS_HTMLDDA:R}},6420:function(j,q,R){var H=R(9037),B=R(8999),M=H.document,o=B(M)&&B(M.createElement);j.exports=function(y){return o?M.createElement(y):{}}},5565:function(j){var q=TypeError,R=9007199254740991;j.exports=function(H){if(H>R)throw q("Maximum allowed index exceeded");return H}},7136:function(j){j.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},71:function(j){j.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},3615:function(j,q,R){var H=R(9037),B=R(71),M=H.process,o=H.Deno,y=M&&M.versions||o&&o.version,l=y&&y.v8,h,u;l&&(h=l.split("."),u=h[0]>0&&h[0]<4?1:+(h[0]+h[1])),!u&&B&&(h=B.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=B.match(/Chrome\/(\d+)/),h&&(u=+h[1]))),j.exports=u},2739:function(j){j.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6610:function(j,q,R){var H=R(8844),B=Error,M=H("".replace),o=function(h){return String(new B(h).stack)}("zxcasd"),y=/\n\s*at [^:]*:[^\n]*/,l=y.test(o);j.exports=function(h,u){if(l&&typeof h=="string"&&!B.prepareStackTrace)for(;u--;)h=M(h,y,"");return h}},9989:function(j,q,R){var H=R(9037),B=R(2474).f,M=R(5773),o=R(1880),y=R(5014),l=R(8758),h=R(5266);j.exports=function(u,d){var g=u.target,v=u.global,s=u.stat,a,_,f,i,e,t;if(v?_=H:s?_=H[g]||y(g,{}):_=(H[g]||{}).prototype,_)for(f in d){if(e=d[f],u.dontCallGetSet?(t=B(_,f),i=t&&t.value):i=_[f],a=h(v?f:g+(s?".":"#")+f,u.forced),!a&&i!==void 0){if(typeof e==typeof i)continue;l(e,i)}(u.sham||i&&i.sham)&&M(e,"sham",!0),o(_,f,e,u)}}},3689:function(j){j.exports=function(q){try{return!!q()}catch{return!0}}},7215:function(j,q,R){var H=R(3689);j.exports=!H(function(){var B=function(){}.bind();return typeof B!="function"||B.hasOwnProperty("prototype")})},2615:function(j,q,R){var H=R(7215),B=Function.prototype.call;j.exports=H?B.bind(B):function(){return B.apply(B,arguments)}},1236:function(j,q,R){var H=R(7697),B=R(6812),M=Function.prototype,o=H&&Object.getOwnPropertyDescriptor,y=B(M,"name"),l=y&&function(){}.name==="something",h=y&&(!H||H&&o(M,"name").configurable);j.exports={EXISTS:y,PROPER:l,CONFIGURABLE:h}},2743:function(j,q,R){var H=R(8844),B=R(509);j.exports=function(M,o,y){try{return H(B(Object.getOwnPropertyDescriptor(M,o)[y]))}catch{}}},8844:function(j,q,R){var H=R(7215),B=Function.prototype,M=B.call,o=H&&B.bind.bind(M,M);j.exports=H?o:function(y){return function(){return M.apply(y,arguments)}}},6058:function(j,q,R){var H=R(9037),B=R(9985),M=function(o){return B(o)?o:void 0};j.exports=function(o,y){return arguments.length<2?M(H[o]):H[o]&&H[o][y]}},4849:function(j,q,R){var H=R(509),B=R(981);j.exports=function(M,o){var y=M[o];return B(y)?void 0:H(y)}},9037:function(j,q,R){var H=function(B){return B&&B.Math===Math&&B};j.exports=H(typeof globalThis=="object"&&globalThis)||H(typeof window=="object"&&window)||H(typeof self=="object"&&self)||H(typeof R.g=="object"&&R.g)||function(){return this}()||this||Function("return this")()},6812:function(j,q,R){var H=R(8844),B=R(690),M=H({}.hasOwnProperty);j.exports=Object.hasOwn||function(y,l){return M(B(y),l)}},7248:function(j){j.exports={}},8506:function(j,q,R){var H=R(7697),B=R(3689),M=R(6420);j.exports=!H&&!B(function(){return Object.defineProperty(M("div"),"a",{get:function(){return 7}}).a!==7})},4413:function(j,q,R){var H=R(8844),B=R(3689),M=R(6648),o=Object,y=H("".split);j.exports=B(function(){return!o("z").propertyIsEnumerable(0)})?function(l){return M(l)==="String"?y(l,""):o(l)}:o},3457:function(j,q,R){var H=R(9985),B=R(8999),M=R(9385);j.exports=function(o,y,l){var h,u;return M&&H(h=y.constructor)&&h!==l&&B(u=h.prototype)&&u!==l.prototype&&M(o,u),o}},6738:function(j,q,R){var H=R(8844),B=R(9985),M=R(4091),o=H(Function.toString);B(M.inspectSource)||(M.inspectSource=function(y){return o(y)}),j.exports=M.inspectSource},618:function(j,q,R){var H=R(9834),B=R(9037),M=R(8999),o=R(5773),y=R(6812),l=R(4091),h=R(2713),u=R(7248),d="Object already initialized",g=B.TypeError,v=B.WeakMap,s,a,_,f=function(r){return _(r)?a(r):s(r,{})},i=function(r){return function(n){var p;if(!M(n)||(p=a(n)).type!==r)throw new g("Incompatible receiver, "+r+" required");return p}};if(H||l.state){var e=l.state||(l.state=new v);e.get=e.get,e.has=e.has,e.set=e.set,s=function(r,n){if(e.has(r))throw new g(d);return n.facade=r,e.set(r,n),n},a=function(r){return e.get(r)||{}},_=function(r){return e.has(r)}}else{var t=h("state");u[t]=!0,s=function(r,n){if(y(r,t))throw new g(d);return n.facade=r,o(r,t,n),n},a=function(r){return y(r,t)?r[t]:{}},_=function(r){return y(r,t)}}j.exports={set:s,get:a,has:_,enforce:f,getterFor:i}},2297:function(j,q,R){var H=R(6648);j.exports=Array.isArray||function(M){return H(M)==="Array"}},9401:function(j,q,R){var H=R(926);j.exports=function(B){var M=H(B);return M==="BigInt64Array"||M==="BigUint64Array"}},9985:function(j,q,R){var H=R(2659),B=H.all;j.exports=H.IS_HTMLDDA?function(M){return typeof M=="function"||M===B}:function(M){return typeof M=="function"}},5266:function(j,q,R){var H=R(3689),B=R(9985),M=/#|\.prototype\./,o=function(d,g){var v=l[y(d)];return v===u?!0:v===h?!1:B(g)?H(g):!!g},y=o.normalize=function(d){return String(d).replace(M,".").toLowerCase()},l=o.data={},h=o.NATIVE="N",u=o.POLYFILL="P";j.exports=o},981:function(j){j.exports=function(q){return q==null}},8999:function(j,q,R){var H=R(9985),B=R(2659),M=B.all;j.exports=B.IS_HTMLDDA?function(o){return typeof o=="object"?o!==null:H(o)||o===M}:function(o){return typeof o=="object"?o!==null:H(o)}},3931:function(j){j.exports=!1},734:function(j,q,R){var H=R(6058),B=R(9985),M=R(3622),o=R(9525),y=Object;j.exports=o?function(l){return typeof l=="symbol"}:function(l){var h=H("Symbol");return B(h)&&M(h.prototype,y(l))}},6310:function(j,q,R){var H=R(3126);j.exports=function(B){return H(B.length)}},8702:function(j,q,R){var H=R(8844),B=R(3689),M=R(9985),o=R(6812),y=R(7697),l=R(1236).CONFIGURABLE,h=R(6738),u=R(618),d=u.enforce,g=u.get,v=String,s=Object.defineProperty,a=H("".slice),_=H("".replace),f=H([].join),i=y&&!B(function(){return s(function(){},"length",{value:8}).length!==8}),e=String(String).split("String"),t=j.exports=function(r,n,p){a(v(n),0,7)==="Symbol("&&(n="["+_(v(n),/^Symbol\(([^)]*)\)/,"$1")+"]"),p&&p.getter&&(n="get "+n),p&&p.setter&&(n="set "+n),(!o(r,"name")||l&&r.name!==n)&&(y?s(r,"name",{value:n,configurable:!0}):r.name=n),i&&p&&o(p,"arity")&&r.length!==p.arity&&s(r,"length",{value:p.arity});try{p&&o(p,"constructor")&&p.constructor?y&&s(r,"prototype",{writable:!1}):r.prototype&&(r.prototype=void 0)}catch{}var c=d(r);return o(c,"source")||(c.source=f(e,typeof n=="string"?n:"")),r};Function.prototype.toString=t(function(){return M(this)&&g(this).source||h(this)},"toString")},8828:function(j){var q=Math.ceil,R=Math.floor;j.exports=Math.trunc||function(B){var M=+B;return(M>0?R:q)(M)}},3841:function(j,q,R){var H=R(4327);j.exports=function(B,M){return B===void 0?arguments.length<2?"":M:H(B)}},2560:function(j,q,R){var H=R(7697),B=R(8506),M=R(5648),o=R(5027),y=R(8360),l=TypeError,h=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",g="configurable",v="writable";q.f=H?M?function(a,_,f){if(o(a),_=y(_),o(f),typeof a=="function"&&_==="prototype"&&"value"in f&&v in f&&!f[v]){var i=u(a,_);i&&i[v]&&(a[_]=f.value,f={configurable:g in f?f[g]:i[g],enumerable:d in f?f[d]:i[d],writable:!1})}return h(a,_,f)}:h:function(a,_,f){if(o(a),_=y(_),o(f),B)try{return h(a,_,f)}catch{}if("get"in f||"set"in f)throw new l("Accessors not supported");return"value"in f&&(a[_]=f.value),a}},2474:function(j,q,R){var H=R(7697),B=R(2615),M=R(9556),o=R(5684),y=R(5290),l=R(8360),h=R(6812),u=R(8506),d=Object.getOwnPropertyDescriptor;q.f=H?d:function(v,s){if(v=y(v),s=l(s),u)try{return d(v,s)}catch{}if(h(v,s))return o(!B(M.f,v,s),v[s])}},2741:function(j,q,R){var H=R(4948),B=R(2739),M=B.concat("length","prototype");q.f=Object.getOwnPropertyNames||function(y){return H(y,M)}},7518:function(j,q){q.f=Object.getOwnPropertySymbols},1868:function(j,q,R){var H=R(6812),B=R(9985),M=R(690),o=R(2713),y=R(1748),l=o("IE_PROTO"),h=Object,u=h.prototype;j.exports=y?h.getPrototypeOf:function(d){var g=M(d);if(H(g,l))return g[l];var v=g.constructor;return B(v)&&g instanceof v?v.prototype:g instanceof h?u:null}},3622:function(j,q,R){var H=R(8844);j.exports=H({}.isPrototypeOf)},4948:function(j,q,R){var H=R(8844),B=R(6812),M=R(5290),o=R(4328).indexOf,y=R(7248),l=H([].push);j.exports=function(h,u){var d=M(h),g=0,v=[],s;for(s in d)!B(y,s)&&B(d,s)&&l(v,s);for(;u.length>g;)B(d,s=u[g++])&&(~o(v,s)||l(v,s));return v}},9556:function(j,q){var R={}.propertyIsEnumerable,H=Object.getOwnPropertyDescriptor,B=H&&!R.call({1:2},1);q.f=B?function(o){var y=H(this,o);return!!y&&y.enumerable}:R},9385:function(j,q,R){var H=R(2743),B=R(5027),M=R(3550);j.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o=!1,y={},l;try{l=H(Object.prototype,"__proto__","set"),l(y,[]),o=y instanceof Array}catch{}return function(u,d){return B(u),M(d),o?l(u,d):u.__proto__=d,u}}():void 0)},5899:function(j,q,R){var H=R(2615),B=R(9985),M=R(8999),o=TypeError;j.exports=function(y,l){var h,u;if(l==="string"&&B(h=y.toString)&&!M(u=H(h,y))||B(h=y.valueOf)&&!M(u=H(h,y))||l!=="string"&&B(h=y.toString)&&!M(u=H(h,y)))return u;throw new o("Can't convert object to primitive value")}},9152:function(j,q,R){var H=R(6058),B=R(8844),M=R(2741),o=R(7518),y=R(5027),l=B([].concat);j.exports=H("Reflect","ownKeys")||function(u){var d=M.f(y(u)),g=o.f;return g?l(d,g(u)):d}},9633:function(j,q,R){var H=R(5027);j.exports=function(){var B=H(this),M="";return B.hasIndices&&(M+="d"),B.global&&(M+="g"),B.ignoreCase&&(M+="i"),B.multiline&&(M+="m"),B.dotAll&&(M+="s"),B.unicode&&(M+="u"),B.unicodeSets&&(M+="v"),B.sticky&&(M+="y"),M}},4684:function(j,q,R){var H=R(981),B=TypeError;j.exports=function(M){if(H(M))throw new B("Can't call method on "+M);return M}},2713:function(j,q,R){var H=R(3430),B=R(4630),M=H("keys");j.exports=function(o){return M[o]||(M[o]=B(o))}},4091:function(j,q,R){var H=R(9037),B=R(5014),M="__core-js_shared__",o=H[M]||B(M,{});j.exports=o},3430:function(j,q,R){var H=R(3931),B=R(4091);(j.exports=function(M,o){return B[M]||(B[M]=o!==void 0?o:{})})("versions",[]).push({version:"3.33.1",mode:H?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.1/LICENSE",source:"https://github.com/zloirock/core-js"})},146:function(j,q,R){var H=R(3615),B=R(3689),M=R(9037),o=M.String;j.exports=!!Object.getOwnPropertySymbols&&!B(function(){var y=Symbol("symbol detection");return!o(y)||!(Object(y)instanceof Symbol)||!Symbol.sham&&H&&H<41})},7578:function(j,q,R){var H=R(8700),B=Math.max,M=Math.min;j.exports=function(o,y){var l=H(o);return l<0?B(l+y,0):M(l,y)}},1530:function(j,q,R){var H=R(8732),B=TypeError;j.exports=function(M){var o=H(M,"number");if(typeof o=="number")throw new B("Can't convert number to bigint");return BigInt(o)}},5290:function(j,q,R){var H=R(4413),B=R(4684);j.exports=function(M){return H(B(M))}},8700:function(j,q,R){var H=R(8828);j.exports=function(B){var M=+B;return M!==M||M===0?0:H(M)}},3126:function(j,q,R){var H=R(8700),B=Math.min;j.exports=function(M){return M>0?B(H(M),9007199254740991):0}},690:function(j,q,R){var H=R(4684),B=Object;j.exports=function(M){return B(H(M))}},8732:function(j,q,R){var H=R(2615),B=R(8999),M=R(734),o=R(4849),y=R(5899),l=R(4201),h=TypeError,u=l("toPrimitive");j.exports=function(d,g){if(!B(d)||M(d))return d;var v=o(d,u),s;if(v){if(g===void 0&&(g="default"),s=H(v,d,g),!B(s)||M(s))return s;throw new h("Can't convert object to primitive value")}return g===void 0&&(g="number"),y(d,g)}},8360:function(j,q,R){var H=R(8732),B=R(734);j.exports=function(M){var o=H(M,"string");return B(o)?o:o+""}},3043:function(j,q,R){var H=R(4201),B=H("toStringTag"),M={};M[B]="z",j.exports=String(M)==="[object z]"},4327:function(j,q,R){var H=R(926),B=String;j.exports=function(M){if(H(M)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return B(M)}},3691:function(j){var q=String;j.exports=function(R){try{return q(R)}catch{return"Object"}}},4630:function(j,q,R){var H=R(8844),B=0,M=Math.random(),o=H(1 .toString);j.exports=function(y){return"Symbol("+(y===void 0?"":y)+")_"+o(++B+M,36)}},9525:function(j,q,R){var H=R(146);j.exports=H&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},5648:function(j,q,R){var H=R(7697),B=R(3689);j.exports=H&&B(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},9834:function(j,q,R){var H=R(9037),B=R(9985),M=H.WeakMap;j.exports=B(M)&&/native code/.test(String(M))},4201:function(j,q,R){var H=R(9037),B=R(3430),M=R(6812),o=R(4630),y=R(146),l=R(9525),h=H.Symbol,u=B("wks"),d=l?h.for||h:h&&h.withoutSetter||o;j.exports=function(g){return M(u,g)||(u[g]=y&&M(h,g)?h[g]:d("Symbol."+g)),u[g]}},560:function(j,q,R){var H=R(9989),B=R(690),M=R(6310),o=R(5649),y=R(5565),l=R(3689),h=l(function(){return[].push.call({length:4294967296},1)!==4294967297}),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(g){return g instanceof TypeError}},d=h||!u();H({target:"Array",proto:!0,arity:1,forced:d},{push:function(v){var s=B(this),a=M(s),_=arguments.length;y(a+_);for(var f=0;f<_;f++)s[a]=arguments[f],a++;return o(s,a),a}})},1719:function(j,q,R){var H=R(9989),B=R(690),M=R(6310),o=R(5649),y=R(8494),l=R(5565),h=[].unshift(0)!==1,u=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(g){return g instanceof TypeError}},d=h||!u();H({target:"Array",proto:!0,arity:1,forced:d},{unshift:function(v){var s=B(this),a=M(s),_=arguments.length;if(_){l(a+_);for(var f=a;f--;){var i=f+_;f in s?s[i]=s[f]:y(s,i)}for(var e=0;e<_;e++)s[e]=arguments[e]}return o(s,a+_)}})},5847:function(j,q,R){var H=R(9037),B=R(7697),M=R(2148),o=R(9633),y=R(3689),l=H.RegExp,h=l.prototype,u=B&&y(function(){var d=!0;try{l(".","d")}catch{d=!1}var g={},v="",s=d?"dgimsy":"gimsy",a=function(e,t){Object.defineProperty(g,e,{get:function(){return v+=t,!0}})},_={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};d&&(_.hasIndices="d");for(var f in _)a(f,_[f]);var i=Object.getOwnPropertyDescriptor(h,"flags").get.call(g);return i!==s||v!==s});u&&M(h,"flags",{configurable:!0,get:o})},4224:function(j,q,R){var H=R(6166),B=R(4872),M=B.aTypedArray,o=B.exportTypedArrayMethod,y=B.getTypedArrayConstructor;o("toReversed",function(){return H(M(this),y(this))})},1121:function(j,q,R){var H=R(4872),B=R(8844),M=R(509),o=R(9976),y=H.aTypedArray,l=H.getTypedArrayConstructor,h=H.exportTypedArrayMethod,u=B(H.TypedArrayPrototype.sort);h("toSorted",function(g){g!==void 0&&M(g);var v=y(this),s=o(l(v),v);return u(s,g)})},7133:function(j,q,R){var H=R(6134),B=R(4872),M=R(9401),o=R(8700),y=R(1530),l=B.aTypedArray,h=B.getTypedArrayConstructor,u=B.exportTypedArrayMethod,d=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(g){return g===8}}();u("with",function(g,v){var s=l(this),a=o(g),_=M(s)?y(v):+v;return H(s,h(s),a,_)},!d)},3429:function(j,q,R){var H=R(9989),B=R(9037),M=R(6058),o=R(5684),y=R(2560).f,l=R(6812),h=R(767),u=R(3457),d=R(3841),g=R(7136),v=R(6610),s=R(7697),a=R(3931),_="DOMException",f=M("Error"),i=M(_),e=function(){h(this,t);var O=arguments.length,E=d(O<1?void 0:arguments[0]),L=d(O<2?void 0:arguments[1],"Error"),A=new i(E,L),I=new f(E);return I.name=_,y(A,"stack",o(1,v(I.stack,1))),u(A,this,e),A},t=e.prototype=i.prototype,r="stack"in new f(_),n="stack"in new i(1,2),p=i&&s&&Object.getOwnPropertyDescriptor(B,_),c=!!p&&!(p.writable&&p.configurable),m=r&&!c&&!n;H({global:!0,constructor:!0,forced:a||m},{DOMException:m?e:i});var C=M(_),S=C.prototype;if(S.constructor!==C){a||y(S,"constructor",o(1,C));for(var b in g)if(l(g,b)){var w=g[b],T=w.s;l(C,T)||y(C,T,o(6,w.c))}}}},Ut={};function Se(j){var q=Ut[j];if(q!==void 0)return q.exports;var R=Ut[j]={exports:{}};return qe[j].call(R.exports,R,R.exports,Se),R.exports}(function(){Se.d=function(j,q){for(var R in q)Se.o(q,R)&&!Se.o(j,R)&&Object.defineProperty(j,R,{enumerable:!0,get:q[R]})}})(),function(){Se.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){Se.o=function(j,q){return Object.prototype.hasOwnProperty.call(j,q)}}(),function(){Se.r=function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}}(),function(){Se.p=""}();var Nt={};(function(){if(Se.r(Nt),Se.d(Nt,{default:function(){return O}}),typeof window<"u"){var j=window.document.currentScript,q=j&&j.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);q&&(Se.p=q[1])}var R=function(){var L=this,A=L._self._c;return A("div",{ref:"terminal",staticClass:"it-terminal",class:L.terminalWindowStatus,attrs:{id:"terminal","data-testid":"terminal"}},[A("div",{staticClass:"it-header"},[A("div",{staticClass:"is-flex is-full-height is-align-items-center px-3"},[A("button",{staticClass:"button it-btn-cirle is-danger",on:{click:function(I){return L.windowHeight("minimize")}}},[A("DashIcon")],1),A("button",{staticClass:"button it-btn-cirle is-warning mx-1",attrs:{"data-testid":"maximize"},on:{click:function(I){return L.windowHeight("maximize")}}},[A("BrowserIconVue")],1),A("button",{staticClass:"button it-btn-cirle is-success",attrs:{"data-testid":"fullheight"},on:{click:function(I){return L.windowHeight("fullheight")}}},[A("DisplayIconVue")],1),A("p",{staticClass:"is-size-14 has-text-weight-bold ml-2 has-text-info",attrs:{"data-testid":"terminal-title"}},[L._v(" Integrated Terminal ")])])]),L.initializedUri?A("div",{ref:"interminal",attrs:{id:"integrated-terminal"}}):A("div",{staticClass:"is-flex is-full-height is-align-items-center is-justify-content-center",attrs:{"data-testid":"terminal-panel"}},[A("span",{staticClass:"loader"})])])},H=[],B=Se(2510),M=Se(6244),o=function(){var L=this,A=L._self._c;return A("svg",{attrs:{width:"24px",height:"24px",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[A("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 7.5C5 7.22386 5.22386 7 5.5 7H9.5C9.77614 7 10 7.22386 10 7.5C10 7.77614 9.77614 8 9.5 8H5.5C5.22386 8 5 7.77614 5 7.5Z",fill:"#ffffff"}})])},y=[],l={name:"DashIcon"},h=l;function u(E,L,A,I,V,G,K,Y){var X=typeof E=="function"?E.options:E;L&&(X.render=L,X.staticRenderFns=A,X._compiled=!0),I&&(X.functional=!0),G&&(X._scopeId="data-v-"+G);var k;if(K?(k=function(ne){ne=ne||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!ne&&typeof __VUE_SSR_CONTEXT__<"u"&&(ne=__VUE_SSR_CONTEXT__),V&&V.call(this,ne),ne&&ne._registeredComponents&&ne._registeredComponents.add(K)},X._ssrRegister=k):V&&(k=Y?function(){V.call(this,(X.functional?this.parent:this).$root.$options.shadowRoot)}:V),k)if(X.functional){X._injectStyles=k;var re=X.render;X.render=function(F,J){return k.call(J),re(F,J)}}else{var Q=X.beforeCreate;X.beforeCreate=Q?[].concat(Q,k):[k]}return{exports:E,options:X}}var d=u(h,o,y,!1,null,null,null),g=d.exports,v=function(){var L=this,A=L._self._c;return A("svg",{attrs:{width:"15px",height:"15px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none"}},[A("path",{attrs:{stroke:"#ffffff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v2M3 8v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8M3 8h18"}}),A("path",{attrs:{fill:"#ffffff",d:"M3 6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v2H3V6z"}})])},s=[],a={name:"BrowserIcon"},_=a,f=u(_,v,s,!1,null,null,null),i=f.exports,e=function(){var L=this,A=L._self._c;return A("svg",{attrs:{width:"15px",height:"15px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[A("path",{attrs:{opacity:"0.15",d:"M4 6C4 5.44771 4.44772 5 5 5H19C19.5523 5 20 5.44772 20 6V15C20 15.5523 19.5523 16 19 16H5C4.44772 16 4 15.5523 4 15V6Z",fill:"#ffffff"}}),A("path",{attrs:{d:"M12 20H16M12 20H8M12 20V16M12 16H5C4.44772 16 4 15.5523 4 15V6C4 5.44771 4.44772 5 5 5H19C19.5523 5 20 5.44772 20 6V15C20 15.5523 19.5523 16 19 16H12Z",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},t=[],r={name:"DisplayIcon"},n=r,p=u(n,e,t,!1,null,null,null),c=p.exports,C=Object.freeze({READY:"ready",DEPLOY:"deploying",RESET:"resetting",TERMINATE:"terminating"}),S={name:"Terminal",components:{DashIcon:g,BrowserIconVue:i,DisplayIconVue:c},props:{pwnboxStatus:{type:Object,default:null},terminateConnection:{type:Boolean,default:!1}},data(){return{pingTimer:!1,keystrokes:"",terminalWindowSize:"minimize",socketURI:null,socket:null,initializedUri:!1,terminalInitialHeight:42}},computed:{terminalWindowStatus(){const E={minimize:"",maximize:"it-terminal--maximize-half",fullheight:"it-terminal--maximize-full"};return Object.freeze(E),E[this.terminalWindowSize]}},watch:{pwnboxStatus:{handler(E,L){E!==L&&E.status===C.READY&&this.initSocketUri()},deep:!0},terminateConnection(E){E&&this.terminateTerminal()}},beforeDestroy(){this.terminateTerminal()},methods:{windowHeight(E){if(E==="maximize"&&setTimeout(()=>{this.$emit("height",this.$refs.terminal.clientHeight)},1300),E==="minimize"&&this.$emit("height",this.terminalInitialHeight),["maximize","fullheight"].includes(E)){let A=new CustomEvent("terminalExpand");window.dispatchEvent(A)}this.terminalWindowSize=E},initTerm(){if(!this.socket){this.initSocket();return}this.$emit("height",this.terminalInitialHeight);const E=this.$refs.interminal,L=new B.Terminal({fontSize:14,cursorBlink:!0}),A=new M.FitAddon;L.loadAddon(A),L.open(E),A.fit(),L.focus(),this.term=L,L.onData(G=>{this.socket?.send(JSON.stringify({data:G}))}),L.onResize(({cols:G,rows:K})=>{this.socket.send(JSON.stringify({size:{height:K,width:G}}))}),window.addEventListener("resize",V),window.addEventListener("terminalExpand",I);function I(){setTimeout(()=>{A.fit()},1050)}function V(){A.fit()}},terminateTerminal(){this.socket?.close(),this.term?.dispose(),this.initializedUri=!1,this.socketURI=null,this.pingTimer&&clearInterval(this.pingTimer)},initSocket(){this.socket=new WebSocket(this.socketURI),this.socket.onerror=()=>{setTimeout(()=>{this.initSocketUri()},3*1e3)},this.socket.onmessage=({data:E})=>{let L=JSON.parse(E);L.error&&setTimeout(()=>{this.initSocket()},3*1e3),E!=="1"&&this.term.write(L.data)},this.socket.onclose=()=>{this.terminateTerminal()},this.socketOnOpen()},initSocketUri(){this.initializedUri||(this.socketURI=this.pwnboxStatus.socket_url,this.socketURI&&(this.initializedUri=!0,setTimeout(()=>{this.initSocket()},2e3)))},socketOnOpen(){this.socket.onopen=()=>{this.initTerm(),this.socketKeepAlive()}},socketKeepAlive(){this.pingTimer=setInterval(()=>{this.socket.send("0")},30*1e3)}}},b=S,w=u(b,R,H,!1,null,"4e75c04e",null),T=w.exports,x=T,O=x})(),je.exports=Nt})()})(mr);var Cr=mr.exports;const Er=br(Cr);export{Er as H};
//# sourceMappingURL=core-fe-terminal-bb6d8279.js.map
